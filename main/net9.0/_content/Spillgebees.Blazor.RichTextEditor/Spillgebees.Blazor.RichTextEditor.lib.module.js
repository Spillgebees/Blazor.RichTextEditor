var hh=Object.create;var Di=Object.defineProperty;var dh=Object.getOwnPropertyDescriptor;var ph=Object.getOwnPropertyNames;var mh=Object.getPrototypeOf,gh=Object.prototype.hasOwnProperty;var Dt=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),bh=(r,t)=>{for(var e in t)Di(r,e,{get:t[e],enumerable:!0})},yh=(r,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ph(t))!gh.call(r,i)&&i!==e&&Di(r,i,{get:()=>t[i],enumerable:!(s=dh(t,i))||s.enumerable});return r};var rt=(r,t,e)=>(e=r!=null?hh(mh(r)):{},yh(t||!r||!r.__esModule?Di(e,"default",{value:r,enumerable:!0}):e,r));var Ec=Dt((f3,wc)=>{var bt=-1,it=1,W=0;function Hr(r,t,e,s,i){if(r===t)return r?[[W,r]]:[];if(e!=null){var n=a0(r,t,e);if(n)return n}var o=Yi(r,t),a=r.substring(0,o);r=r.substring(o),t=t.substring(o),o=Us(r,t);var l=r.substring(r.length-o);r=r.substring(0,r.length-o),t=t.substring(0,t.length-o);var c=Y1(r,t);return a&&c.unshift([W,a]),l&&c.push([W,l]),tn(c,i),s&&r0(c),c}function Y1(r,t){var e;if(!r)return[[it,t]];if(!t)return[[bt,r]];var s=r.length>t.length?r:t,i=r.length>t.length?t:r,n=s.indexOf(i);if(n!==-1)return e=[[it,s.substring(0,n)],[W,i],[it,s.substring(n+i.length)]],r.length>t.length&&(e[0][0]=e[2][0]=bt),e;if(i.length===1)return[[bt,r],[it,t]];var o=e0(r,t);if(o){var a=o[0],l=o[1],c=o[2],u=o[3],f=o[4],h=Hr(a,c),p=Hr(l,u);return h.concat([[W,f]],p)}return t0(r,t)}function t0(r,t){for(var e=r.length,s=t.length,i=Math.ceil((e+s)/2),n=i,o=2*i,a=new Array(o),l=new Array(o),c=0;c<o;c++)a[c]=-1,l[c]=-1;a[n+1]=0,l[n+1]=0;for(var u=e-s,f=u%2!==0,h=0,p=0,m=0,x=0,A=0;A<i;A++){for(var b=-A+h;b<=A-p;b+=2){var T=n+b,C;b===-A||b!==A&&a[T-1]<a[T+1]?C=a[T+1]:C=a[T-1]+1;for(var N=C-b;C<e&&N<s&&r.charAt(C)===t.charAt(N);)C++,N++;if(a[T]=C,C>e)p+=2;else if(N>s)h+=2;else if(f){var L=n+u-b;if(L>=0&&L<o&&l[L]!==-1){var O=e-l[L];if(C>=O)return hc(r,t,C,N)}}}for(var G=-A+m;G<=A-x;G+=2){var L=n+G,O;G===-A||G!==A&&l[L-1]<l[L+1]?O=l[L+1]:O=l[L-1]+1;for(var gt=O-G;O<e&&gt<s&&r.charAt(e-O-1)===t.charAt(s-gt-1);)O++,gt++;if(l[L]=O,O>e)x+=2;else if(gt>s)m+=2;else if(!f){var T=n+u-G;if(T>=0&&T<o&&a[T]!==-1){var C=a[T],N=n+C-T;if(O=e-O,C>=O)return hc(r,t,C,N)}}}}return[[bt,r],[it,t]]}function hc(r,t,e,s){var i=r.substring(0,e),n=t.substring(0,s),o=r.substring(e),a=t.substring(s),l=Hr(i,n),c=Hr(o,a);return l.concat(c)}function Yi(r,t){if(!r||!t||r.charAt(0)!==t.charAt(0))return 0;for(var e=0,s=Math.min(r.length,t.length),i=s,n=0;e<i;)r.substring(n,i)==t.substring(n,i)?(e=i,n=e):s=i,i=Math.floor((s-e)/2+e);return bc(r.charCodeAt(i-1))&&i--,i}function dc(r,t){var e=r.length,s=t.length;if(e==0||s==0)return 0;e>s?r=r.substring(e-s):e<s&&(t=t.substring(0,e));var i=Math.min(e,s);if(r==t)return i;for(var n=0,o=1;;){var a=r.substring(i-o),l=t.indexOf(a);if(l==-1)return n;o+=l,(l==0||r.substring(i-o)==t.substring(0,o))&&(n=o,o++)}}function Us(r,t){if(!r||!t||r.slice(-1)!==t.slice(-1))return 0;for(var e=0,s=Math.min(r.length,t.length),i=s,n=0;e<i;)r.substring(r.length-i,r.length-n)==t.substring(t.length-i,t.length-n)?(e=i,n=e):s=i,i=Math.floor((s-e)/2+e);return yc(r.charCodeAt(r.length-i))&&i--,i}function e0(r,t){var e=r.length>t.length?r:t,s=r.length>t.length?t:r;if(e.length<4||s.length*2<e.length)return null;function i(p,m,x){for(var A=p.substring(x,x+Math.floor(p.length/4)),b=-1,T="",C,N,L,O;(b=m.indexOf(A,b+1))!==-1;){var G=Yi(p.substring(x),m.substring(b)),gt=Us(p.substring(0,x),m.substring(0,b));T.length<gt+G&&(T=m.substring(b-gt,b)+m.substring(b,b+G),C=p.substring(0,x-gt),N=p.substring(x+G),L=m.substring(0,b-gt),O=m.substring(b+G))}return T.length*2>=p.length?[C,N,L,O,T]:null}var n=i(e,s,Math.ceil(e.length/4)),o=i(e,s,Math.ceil(e.length/2)),a;if(!n&&!o)return null;o?n?a=n[4].length>o[4].length?n:o:a=o:a=n;var l,c,u,f;r.length>t.length?(l=a[0],c=a[1],u=a[2],f=a[3]):(u=a[0],f=a[1],l=a[2],c=a[3]);var h=a[4];return[l,c,u,f,h]}function r0(r){for(var t=!1,e=[],s=0,i=null,n=0,o=0,a=0,l=0,c=0;n<r.length;)r[n][0]==W?(e[s++]=n,o=l,a=c,l=0,c=0,i=r[n][1]):(r[n][0]==it?l+=r[n][1].length:c+=r[n][1].length,i&&i.length<=Math.max(o,a)&&i.length<=Math.max(l,c)&&(r.splice(e[s-1],0,[bt,i]),r[e[s-1]+1][0]=it,s--,s--,n=s>0?e[s-1]:-1,o=0,a=0,l=0,c=0,i=null,t=!0)),n++;for(t&&tn(r),n0(r),n=1;n<r.length;){if(r[n-1][0]==bt&&r[n][0]==it){var u=r[n-1][1],f=r[n][1],h=dc(u,f),p=dc(f,u);h>=p?(h>=u.length/2||h>=f.length/2)&&(r.splice(n,0,[W,f.substring(0,h)]),r[n-1][1]=u.substring(0,u.length-h),r[n+1][1]=f.substring(h),n++):(p>=u.length/2||p>=f.length/2)&&(r.splice(n,0,[W,u.substring(0,p)]),r[n-1][0]=it,r[n-1][1]=f.substring(0,f.length-p),r[n+1][0]=bt,r[n+1][1]=u.substring(p),n++),n++}n++}}var pc=/[^a-zA-Z0-9]/,mc=/\s/,gc=/[\r\n]/,s0=/\n\r?\n$/,i0=/^\r?\n\r?\n/;function n0(r){function t(p,m){if(!p||!m)return 6;var x=p.charAt(p.length-1),A=m.charAt(0),b=x.match(pc),T=A.match(pc),C=b&&x.match(mc),N=T&&A.match(mc),L=C&&x.match(gc),O=N&&A.match(gc),G=L&&p.match(s0),gt=O&&m.match(i0);return G||gt?5:L||O?4:b&&!C&&N?3:C||N?2:b||T?1:0}for(var e=1;e<r.length-1;){if(r[e-1][0]==W&&r[e+1][0]==W){var s=r[e-1][1],i=r[e][1],n=r[e+1][1],o=Us(s,i);if(o){var a=i.substring(i.length-o);s=s.substring(0,s.length-o),i=a+i.substring(0,i.length-o),n=a+n}for(var l=s,c=i,u=n,f=t(s,i)+t(i,n);i.charAt(0)===n.charAt(0);){s+=i.charAt(0),i=i.substring(1)+n.charAt(0),n=n.substring(1);var h=t(s,i)+t(i,n);h>=f&&(f=h,l=s,c=i,u=n)}r[e-1][1]!=l&&(l?r[e-1][1]=l:(r.splice(e-1,1),e--),r[e][1]=c,u?r[e+1][1]=u:(r.splice(e+1,1),e--))}e++}}function tn(r,t){r.push([W,""]);for(var e=0,s=0,i=0,n="",o="",a;e<r.length;){if(e<r.length-1&&!r[e][1]){r.splice(e,1);continue}switch(r[e][0]){case it:i++,o+=r[e][1],e++;break;case bt:s++,n+=r[e][1],e++;break;case W:var l=e-i-s-1;if(t){if(l>=0&&vc(r[l][1])){var c=r[l][1].slice(-1);if(r[l][1]=r[l][1].slice(0,-1),n=c+n,o=c+o,!r[l][1]){r.splice(l,1),e--;var u=l-1;r[u]&&r[u][0]===it&&(i++,o=r[u][1]+o,u--),r[u]&&r[u][0]===bt&&(s++,n=r[u][1]+n,u--),l=u}}if(xc(r[e][1])){var c=r[e][1].charAt(0);r[e][1]=r[e][1].slice(1),n+=c,o+=c}}if(e<r.length-1&&!r[e][1]){r.splice(e,1);break}if(n.length>0||o.length>0){n.length>0&&o.length>0&&(a=Yi(o,n),a!==0&&(l>=0?r[l][1]+=o.substring(0,a):(r.splice(0,0,[W,o.substring(0,a)]),e++),o=o.substring(a),n=n.substring(a)),a=Us(o,n),a!==0&&(r[e][1]=o.substring(o.length-a)+r[e][1],o=o.substring(0,o.length-a),n=n.substring(0,n.length-a)));var f=i+s;n.length===0&&o.length===0?(r.splice(e-f,f),e=e-f):n.length===0?(r.splice(e-f,f,[it,o]),e=e-f+1):o.length===0?(r.splice(e-f,f,[bt,n]),e=e-f+1):(r.splice(e-f,f,[bt,n],[it,o]),e=e-f+2)}e!==0&&r[e-1][0]===W?(r[e-1][1]+=r[e][1],r.splice(e,1)):e++,i=0,s=0,n="",o="";break}}r[r.length-1][1]===""&&r.pop();var h=!1;for(e=1;e<r.length-1;)r[e-1][0]===W&&r[e+1][0]===W&&(r[e][1].substring(r[e][1].length-r[e-1][1].length)===r[e-1][1]?(r[e][1]=r[e-1][1]+r[e][1].substring(0,r[e][1].length-r[e-1][1].length),r[e+1][1]=r[e-1][1]+r[e+1][1],r.splice(e-1,1),h=!0):r[e][1].substring(0,r[e+1][1].length)==r[e+1][1]&&(r[e-1][1]+=r[e+1][1],r[e][1]=r[e][1].substring(r[e+1][1].length)+r[e+1][1],r.splice(e+1,1),h=!0)),e++;h&&tn(r,t)}function bc(r){return r>=55296&&r<=56319}function yc(r){return r>=56320&&r<=57343}function xc(r){return yc(r.charCodeAt(0))}function vc(r){return bc(r.charCodeAt(r.length-1))}function o0(r){for(var t=[],e=0;e<r.length;e++)r[e][1].length>0&&t.push(r[e]);return t}function Xi(r,t,e,s){return vc(r)||xc(s)?null:o0([[W,r],[bt,t],[it,e],[W,s]])}function a0(r,t,e){var s=typeof e=="number"?{index:e,length:0}:e.oldRange,i=typeof e=="number"?null:e.newRange,n=r.length,o=t.length;if(s.length===0&&(i===null||i.length===0)){var a=s.index,l=r.slice(0,a),c=r.slice(a),u=i?i.index:null;t:{var f=a+o-n;if(u!==null&&u!==f||f<0||f>o)break t;var h=t.slice(0,f),p=t.slice(f);if(p!==c)break t;var m=Math.min(a,f),x=l.slice(0,m),A=h.slice(0,m);if(x!==A)break t;var b=l.slice(m),T=h.slice(m);return Xi(x,b,T,c)}t:{if(u!==null&&u!==a)break t;var C=a,h=t.slice(0,C),p=t.slice(C);if(h!==l)break t;var N=Math.min(n-C,o-C),L=c.slice(c.length-N),O=p.slice(p.length-N);if(L!==O)break t;var b=c.slice(0,c.length-N),T=p.slice(0,p.length-N);return Xi(l,b,T,L)}}if(s.length>0&&i&&i.length===0)t:{var x=r.slice(0,s.index),L=r.slice(s.index+s.length),m=x.length,N=L.length;if(o<m+N)break t;var A=t.slice(0,m),O=t.slice(o-N);if(x!==A||L!==O)break t;var b=r.slice(m,n-N),T=t.slice(m,o-N);return Xi(x,b,T,L)}return null}function Hs(r,t,e,s){return Hr(r,t,e,s,!0)}Hs.INSERT=it;Hs.DELETE=bt;Hs.EQUAL=W;wc.exports=Hs});var gn=Dt((Fr,ar)=>{var l0=200,Rc="__lodash_hash_undefined__",Mc=9007199254740991,cn="[object Arguments]",c0="[object Array]",Bc="[object Boolean]",Dc="[object Date]",u0="[object Error]",un="[object Function]",jc="[object GeneratorFunction]",Fs="[object Map]",Pc="[object Number]",fn="[object Object]",Ac="[object Promise]",zc="[object RegExp]",$s="[object Set]",Uc="[object String]",Hc="[object Symbol]",rn="[object WeakMap]",Fc="[object ArrayBuffer]",Ws="[object DataView]",$c="[object Float32Array]",Wc="[object Float64Array]",Kc="[object Int8Array]",Vc="[object Int16Array]",Gc="[object Int32Array]",Zc="[object Uint8Array]",Jc="[object Uint8ClampedArray]",Qc="[object Uint16Array]",Xc="[object Uint32Array]",f0=/[\\^$.*+?()[\]{}|]/g,h0=/\w*$/,d0=/^\[object .+?Constructor\]$/,p0=/^(?:0|[1-9]\d*)$/,q={};q[cn]=q[c0]=q[Fc]=q[Ws]=q[Bc]=q[Dc]=q[$c]=q[Wc]=q[Kc]=q[Vc]=q[Gc]=q[Fs]=q[Pc]=q[fn]=q[zc]=q[$s]=q[Uc]=q[Hc]=q[Zc]=q[Jc]=q[Qc]=q[Xc]=!0;q[u0]=q[un]=q[rn]=!1;var m0=typeof global=="object"&&global&&global.Object===Object&&global,g0=typeof self=="object"&&self&&self.Object===Object&&self,Ft=m0||g0||Function("return this")(),Yc=typeof Fr=="object"&&Fr&&!Fr.nodeType&&Fr,Sc=Yc&&typeof ar=="object"&&ar&&!ar.nodeType&&ar,b0=Sc&&Sc.exports===Yc;function y0(r,t){return r.set(t[0],t[1]),r}function x0(r,t){return r.add(t),r}function v0(r,t){for(var e=-1,s=r?r.length:0;++e<s&&t(r[e],e,r)!==!1;);return r}function w0(r,t){for(var e=-1,s=t.length,i=r.length;++e<s;)r[i+e]=t[e];return r}function tu(r,t,e,s){var i=-1,n=r?r.length:0;for(s&&n&&(e=r[++i]);++i<n;)e=t(e,r[i],i,r);return e}function E0(r,t){for(var e=-1,s=Array(r);++e<r;)s[e]=t(e);return s}function A0(r,t){return r?.[t]}function eu(r){var t=!1;if(r!=null&&typeof r.toString!="function")try{t=!!(r+"")}catch{}return t}function Tc(r){var t=-1,e=Array(r.size);return r.forEach(function(s,i){e[++t]=[i,s]}),e}function hn(r,t){return function(e){return r(t(e))}}function Nc(r){var t=-1,e=Array(r.size);return r.forEach(function(s){e[++t]=s}),e}var S0=Array.prototype,T0=Function.prototype,Ks=Object.prototype,en=Ft["__core-js_shared__"],Cc=function(){var r=/[^.]+$/.exec(en&&en.keys&&en.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),ru=T0.toString,ue=Ks.hasOwnProperty,Vs=Ks.toString,N0=RegExp("^"+ru.call(ue).replace(f0,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Lc=b0?Ft.Buffer:void 0,Oc=Ft.Symbol,Ic=Ft.Uint8Array,C0=hn(Object.getPrototypeOf,Object),L0=Object.create,O0=Ks.propertyIsEnumerable,I0=S0.splice,_c=Object.getOwnPropertySymbols,_0=Lc?Lc.isBuffer:void 0,q0=hn(Object.keys,Object),sn=ur(Ft,"DataView"),$r=ur(Ft,"Map"),nn=ur(Ft,"Promise"),on=ur(Ft,"Set"),an=ur(Ft,"WeakMap"),Wr=ur(Object,"create"),k0=Le(sn),R0=Le($r),M0=Le(nn),B0=Le(on),D0=Le(an),qc=Oc?Oc.prototype:void 0,kc=qc?qc.valueOf:void 0;function Ce(r){var t=-1,e=r?r.length:0;for(this.clear();++t<e;){var s=r[t];this.set(s[0],s[1])}}function j0(){this.__data__=Wr?Wr(null):{}}function P0(r){return this.has(r)&&delete this.__data__[r]}function z0(r){var t=this.__data__;if(Wr){var e=t[r];return e===Rc?void 0:e}return ue.call(t,r)?t[r]:void 0}function U0(r){var t=this.__data__;return Wr?t[r]!==void 0:ue.call(t,r)}function H0(r,t){var e=this.__data__;return e[r]=Wr&&t===void 0?Rc:t,this}Ce.prototype.clear=j0;Ce.prototype.delete=P0;Ce.prototype.get=z0;Ce.prototype.has=U0;Ce.prototype.set=H0;function $t(r){var t=-1,e=r?r.length:0;for(this.clear();++t<e;){var s=r[t];this.set(s[0],s[1])}}function F0(){this.__data__=[]}function $0(r){var t=this.__data__,e=Gs(t,r);if(e<0)return!1;var s=t.length-1;return e==s?t.pop():I0.call(t,e,1),!0}function W0(r){var t=this.__data__,e=Gs(t,r);return e<0?void 0:t[e][1]}function K0(r){return Gs(this.__data__,r)>-1}function V0(r,t){var e=this.__data__,s=Gs(e,r);return s<0?e.push([r,t]):e[s][1]=t,this}$t.prototype.clear=F0;$t.prototype.delete=$0;$t.prototype.get=W0;$t.prototype.has=K0;$t.prototype.set=V0;function lr(r){var t=-1,e=r?r.length:0;for(this.clear();++t<e;){var s=r[t];this.set(s[0],s[1])}}function G0(){this.__data__={hash:new Ce,map:new($r||$t),string:new Ce}}function Z0(r){return Zs(this,r).delete(r)}function J0(r){return Zs(this,r).get(r)}function Q0(r){return Zs(this,r).has(r)}function X0(r,t){return Zs(this,r).set(r,t),this}lr.prototype.clear=G0;lr.prototype.delete=Z0;lr.prototype.get=J0;lr.prototype.has=Q0;lr.prototype.set=X0;function cr(r){this.__data__=new $t(r)}function Y0(){this.__data__=new $t}function tb(r){return this.__data__.delete(r)}function eb(r){return this.__data__.get(r)}function rb(r){return this.__data__.has(r)}function sb(r,t){var e=this.__data__;if(e instanceof $t){var s=e.__data__;if(!$r||s.length<l0-1)return s.push([r,t]),this;e=this.__data__=new lr(s)}return e.set(r,t),this}cr.prototype.clear=Y0;cr.prototype.delete=tb;cr.prototype.get=eb;cr.prototype.has=rb;cr.prototype.set=sb;function ib(r,t){var e=pn(r)||Lb(r)?E0(r.length,String):[],s=e.length,i=!!s;for(var n in r)(t||ue.call(r,n))&&!(i&&(n=="length"||Sb(n,s)))&&e.push(n);return e}function su(r,t,e){var s=r[t];(!(ue.call(r,t)&&au(s,e))||e===void 0&&!(t in r))&&(r[t]=e)}function Gs(r,t){for(var e=r.length;e--;)if(au(r[e][0],t))return e;return-1}function nb(r,t){return r&&iu(t,mn(t),r)}function ln(r,t,e,s,i,n,o){var a;if(s&&(a=n?s(r,i,n,o):s(r)),a!==void 0)return a;if(!Js(r))return r;var l=pn(r);if(l){if(a=wb(r),!t)return yb(r,a)}else{var c=Ne(r),u=c==un||c==jc;if(Ib(r))return fb(r,t);if(c==fn||c==cn||u&&!n){if(eu(r))return n?r:{};if(a=Eb(u?{}:r),!t)return xb(r,nb(a,r))}else{if(!q[c])return n?r:{};a=Ab(r,c,ln,t)}}o||(o=new cr);var f=o.get(r);if(f)return f;if(o.set(r,a),!l)var h=e?vb(r):mn(r);return v0(h||r,function(p,m){h&&(m=p,p=r[m]),su(a,m,ln(p,t,e,s,m,r,o))}),a}function ob(r){return Js(r)?L0(r):{}}function ab(r,t,e){var s=t(r);return pn(r)?s:w0(s,e(r))}function lb(r){return Vs.call(r)}function cb(r){if(!Js(r)||Nb(r))return!1;var t=cu(r)||eu(r)?N0:d0;return t.test(Le(r))}function ub(r){if(!ou(r))return q0(r);var t=[];for(var e in Object(r))ue.call(r,e)&&e!="constructor"&&t.push(e);return t}function fb(r,t){if(t)return r.slice();var e=new r.constructor(r.length);return r.copy(e),e}function dn(r){var t=new r.constructor(r.byteLength);return new Ic(t).set(new Ic(r)),t}function hb(r,t){var e=t?dn(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.byteLength)}function db(r,t,e){var s=t?e(Tc(r),!0):Tc(r);return tu(s,y0,new r.constructor)}function pb(r){var t=new r.constructor(r.source,h0.exec(r));return t.lastIndex=r.lastIndex,t}function mb(r,t,e){var s=t?e(Nc(r),!0):Nc(r);return tu(s,x0,new r.constructor)}function gb(r){return kc?Object(kc.call(r)):{}}function bb(r,t){var e=t?dn(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.length)}function yb(r,t){var e=-1,s=r.length;for(t||(t=Array(s));++e<s;)t[e]=r[e];return t}function iu(r,t,e,s){e||(e={});for(var i=-1,n=t.length;++i<n;){var o=t[i],a=s?s(e[o],r[o],o,e,r):void 0;su(e,o,a===void 0?r[o]:a)}return e}function xb(r,t){return iu(r,nu(r),t)}function vb(r){return ab(r,mn,nu)}function Zs(r,t){var e=r.__data__;return Tb(t)?e[typeof t=="string"?"string":"hash"]:e.map}function ur(r,t){var e=A0(r,t);return cb(e)?e:void 0}var nu=_c?hn(_c,Object):kb,Ne=lb;(sn&&Ne(new sn(new ArrayBuffer(1)))!=Ws||$r&&Ne(new $r)!=Fs||nn&&Ne(nn.resolve())!=Ac||on&&Ne(new on)!=$s||an&&Ne(new an)!=rn)&&(Ne=function(r){var t=Vs.call(r),e=t==fn?r.constructor:void 0,s=e?Le(e):void 0;if(s)switch(s){case k0:return Ws;case R0:return Fs;case M0:return Ac;case B0:return $s;case D0:return rn}return t});function wb(r){var t=r.length,e=r.constructor(t);return t&&typeof r[0]=="string"&&ue.call(r,"index")&&(e.index=r.index,e.input=r.input),e}function Eb(r){return typeof r.constructor=="function"&&!ou(r)?ob(C0(r)):{}}function Ab(r,t,e,s){var i=r.constructor;switch(t){case Fc:return dn(r);case Bc:case Dc:return new i(+r);case Ws:return hb(r,s);case $c:case Wc:case Kc:case Vc:case Gc:case Zc:case Jc:case Qc:case Xc:return bb(r,s);case Fs:return db(r,s,e);case Pc:case Uc:return new i(r);case zc:return pb(r);case $s:return mb(r,s,e);case Hc:return gb(r)}}function Sb(r,t){return t=t??Mc,!!t&&(typeof r=="number"||p0.test(r))&&r>-1&&r%1==0&&r<t}function Tb(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}function Nb(r){return!!Cc&&Cc in r}function ou(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||Ks;return r===e}function Le(r){if(r!=null){try{return ru.call(r)}catch{}try{return r+""}catch{}}return""}function Cb(r){return ln(r,!0,!0)}function au(r,t){return r===t||r!==r&&t!==t}function Lb(r){return Ob(r)&&ue.call(r,"callee")&&(!O0.call(r,"callee")||Vs.call(r)==cn)}var pn=Array.isArray;function lu(r){return r!=null&&_b(r.length)&&!cu(r)}function Ob(r){return qb(r)&&lu(r)}var Ib=_0||Rb;function cu(r){var t=Js(r)?Vs.call(r):"";return t==un||t==jc}function _b(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Mc}function Js(r){var t=typeof r;return!!r&&(t=="object"||t=="function")}function qb(r){return!!r&&typeof r=="object"}function mn(r){return lu(r)?ib(r):ub(r)}function kb(){return[]}function Rb(){return!1}ar.exports=Cb});var Ln=Dt((Kr,hr)=>{var Mb=200,Cn="__lodash_hash_undefined__",ii=1,wu=2,Eu=9007199254740991,Qs="[object Arguments]",vn="[object Array]",Bb="[object AsyncFunction]",Au="[object Boolean]",Su="[object Date]",Tu="[object Error]",Nu="[object Function]",Db="[object GeneratorFunction]",Xs="[object Map]",Cu="[object Number]",jb="[object Null]",fr="[object Object]",uu="[object Promise]",Pb="[object Proxy]",Lu="[object RegExp]",Ys="[object Set]",Ou="[object String]",zb="[object Symbol]",Ub="[object Undefined]",wn="[object WeakMap]",Iu="[object ArrayBuffer]",ti="[object DataView]",Hb="[object Float32Array]",Fb="[object Float64Array]",$b="[object Int8Array]",Wb="[object Int16Array]",Kb="[object Int32Array]",Vb="[object Uint8Array]",Gb="[object Uint8ClampedArray]",Zb="[object Uint16Array]",Jb="[object Uint32Array]",Qb=/[\\^$.*+?()[\]{}|]/g,Xb=/^\[object .+?Constructor\]$/,Yb=/^(?:0|[1-9]\d*)$/,M={};M[Hb]=M[Fb]=M[$b]=M[Wb]=M[Kb]=M[Vb]=M[Gb]=M[Zb]=M[Jb]=!0;M[Qs]=M[vn]=M[Iu]=M[Au]=M[ti]=M[Su]=M[Tu]=M[Nu]=M[Xs]=M[Cu]=M[fr]=M[Lu]=M[Ys]=M[Ou]=M[wn]=!1;var _u=typeof global=="object"&&global&&global.Object===Object&&global,ty=typeof self=="object"&&self&&self.Object===Object&&self,Wt=_u||ty||Function("return this")(),qu=typeof Kr=="object"&&Kr&&!Kr.nodeType&&Kr,fu=qu&&typeof hr=="object"&&hr&&!hr.nodeType&&hr,ku=fu&&fu.exports===qu,bn=ku&&_u.process,hu=function(){try{return bn&&bn.binding&&bn.binding("util")}catch{}}(),du=hu&&hu.isTypedArray;function ey(r,t){for(var e=-1,s=r==null?0:r.length,i=0,n=[];++e<s;){var o=r[e];t(o,e,r)&&(n[i++]=o)}return n}function ry(r,t){for(var e=-1,s=t.length,i=r.length;++e<s;)r[i+e]=t[e];return r}function sy(r,t){for(var e=-1,s=r==null?0:r.length;++e<s;)if(t(r[e],e,r))return!0;return!1}function iy(r,t){for(var e=-1,s=Array(r);++e<r;)s[e]=t(e);return s}function ny(r){return function(t){return r(t)}}function oy(r,t){return r.has(t)}function ay(r,t){return r?.[t]}function ly(r){var t=-1,e=Array(r.size);return r.forEach(function(s,i){e[++t]=[i,s]}),e}function cy(r,t){return function(e){return r(t(e))}}function uy(r){var t=-1,e=Array(r.size);return r.forEach(function(s){e[++t]=s}),e}var fy=Array.prototype,hy=Function.prototype,ni=Object.prototype,yn=Wt["__core-js_shared__"],Ru=hy.toString,kt=ni.hasOwnProperty,pu=function(){var r=/[^.]+$/.exec(yn&&yn.keys&&yn.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),Mu=ni.toString,dy=RegExp("^"+Ru.call(kt).replace(Qb,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mu=ku?Wt.Buffer:void 0,ei=Wt.Symbol,gu=Wt.Uint8Array,Bu=ni.propertyIsEnumerable,py=fy.splice,Oe=ei?ei.toStringTag:void 0,bu=Object.getOwnPropertySymbols,my=mu?mu.isBuffer:void 0,gy=cy(Object.keys,Object),En=dr(Wt,"DataView"),Vr=dr(Wt,"Map"),An=dr(Wt,"Promise"),Sn=dr(Wt,"Set"),Tn=dr(Wt,"WeakMap"),Gr=dr(Object,"create"),by=qe(En),yy=qe(Vr),xy=qe(An),vy=qe(Sn),wy=qe(Tn),yu=ei?ei.prototype:void 0,xn=yu?yu.valueOf:void 0;function Ie(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var s=r[t];this.set(s[0],s[1])}}function Ey(){this.__data__=Gr?Gr(null):{},this.size=0}function Ay(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t}function Sy(r){var t=this.__data__;if(Gr){var e=t[r];return e===Cn?void 0:e}return kt.call(t,r)?t[r]:void 0}function Ty(r){var t=this.__data__;return Gr?t[r]!==void 0:kt.call(t,r)}function Ny(r,t){var e=this.__data__;return this.size+=this.has(r)?0:1,e[r]=Gr&&t===void 0?Cn:t,this}Ie.prototype.clear=Ey;Ie.prototype.delete=Ay;Ie.prototype.get=Sy;Ie.prototype.has=Ty;Ie.prototype.set=Ny;function Kt(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var s=r[t];this.set(s[0],s[1])}}function Cy(){this.__data__=[],this.size=0}function Ly(r){var t=this.__data__,e=oi(t,r);if(e<0)return!1;var s=t.length-1;return e==s?t.pop():py.call(t,e,1),--this.size,!0}function Oy(r){var t=this.__data__,e=oi(t,r);return e<0?void 0:t[e][1]}function Iy(r){return oi(this.__data__,r)>-1}function _y(r,t){var e=this.__data__,s=oi(e,r);return s<0?(++this.size,e.push([r,t])):e[s][1]=t,this}Kt.prototype.clear=Cy;Kt.prototype.delete=Ly;Kt.prototype.get=Oy;Kt.prototype.has=Iy;Kt.prototype.set=_y;function _e(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var s=r[t];this.set(s[0],s[1])}}function qy(){this.size=0,this.__data__={hash:new Ie,map:new(Vr||Kt),string:new Ie}}function ky(r){var t=ai(this,r).delete(r);return this.size-=t?1:0,t}function Ry(r){return ai(this,r).get(r)}function My(r){return ai(this,r).has(r)}function By(r,t){var e=ai(this,r),s=e.size;return e.set(r,t),this.size+=e.size==s?0:1,this}_e.prototype.clear=qy;_e.prototype.delete=ky;_e.prototype.get=Ry;_e.prototype.has=My;_e.prototype.set=By;function ri(r){var t=-1,e=r==null?0:r.length;for(this.__data__=new _e;++t<e;)this.add(r[t])}function Dy(r){return this.__data__.set(r,Cn),this}function jy(r){return this.__data__.has(r)}ri.prototype.add=ri.prototype.push=Dy;ri.prototype.has=jy;function he(r){var t=this.__data__=new Kt(r);this.size=t.size}function Py(){this.__data__=new Kt,this.size=0}function zy(r){var t=this.__data__,e=t.delete(r);return this.size=t.size,e}function Uy(r){return this.__data__.get(r)}function Hy(r){return this.__data__.has(r)}function Fy(r,t){var e=this.__data__;if(e instanceof Kt){var s=e.__data__;if(!Vr||s.length<Mb-1)return s.push([r,t]),this.size=++e.size,this;e=this.__data__=new _e(s)}return e.set(r,t),this.size=e.size,this}he.prototype.clear=Py;he.prototype.delete=zy;he.prototype.get=Uy;he.prototype.has=Hy;he.prototype.set=Fy;function $y(r,t){var e=si(r),s=!e&&nx(r),i=!e&&!s&&Nn(r),n=!e&&!s&&!i&&Fu(r),o=e||s||i||n,a=o?iy(r.length,String):[],l=a.length;for(var c in r)(t||kt.call(r,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||n&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||tx(c,l)))&&a.push(c);return a}function oi(r,t){for(var e=r.length;e--;)if(Pu(r[e][0],t))return e;return-1}function Wy(r,t,e){var s=t(r);return si(r)?s:ry(s,e(r))}function Jr(r){return r==null?r===void 0?Ub:jb:Oe&&Oe in Object(r)?Xy(r):ix(r)}function xu(r){return Zr(r)&&Jr(r)==Qs}function Du(r,t,e,s,i){return r===t?!0:r==null||t==null||!Zr(r)&&!Zr(t)?r!==r&&t!==t:Ky(r,t,e,s,Du,i)}function Ky(r,t,e,s,i,n){var o=si(r),a=si(t),l=o?vn:fe(r),c=a?vn:fe(t);l=l==Qs?fr:l,c=c==Qs?fr:c;var u=l==fr,f=c==fr,h=l==c;if(h&&Nn(r)){if(!Nn(t))return!1;o=!0,u=!1}if(h&&!u)return n||(n=new he),o||Fu(r)?ju(r,t,e,s,i,n):Jy(r,t,l,e,s,i,n);if(!(e&ii)){var p=u&&kt.call(r,"__wrapped__"),m=f&&kt.call(t,"__wrapped__");if(p||m){var x=p?r.value():r,A=m?t.value():t;return n||(n=new he),i(x,A,e,s,n)}}return h?(n||(n=new he),Qy(r,t,e,s,i,n)):!1}function Vy(r){if(!Hu(r)||rx(r))return!1;var t=zu(r)?dy:Xb;return t.test(qe(r))}function Gy(r){return Zr(r)&&Uu(r.length)&&!!M[Jr(r)]}function Zy(r){if(!sx(r))return gy(r);var t=[];for(var e in Object(r))kt.call(r,e)&&e!="constructor"&&t.push(e);return t}function ju(r,t,e,s,i,n){var o=e&ii,a=r.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;var c=n.get(r);if(c&&n.get(t))return c==t;var u=-1,f=!0,h=e&wu?new ri:void 0;for(n.set(r,t),n.set(t,r);++u<a;){var p=r[u],m=t[u];if(s)var x=o?s(m,p,u,t,r,n):s(p,m,u,r,t,n);if(x!==void 0){if(x)continue;f=!1;break}if(h){if(!sy(t,function(A,b){if(!oy(h,b)&&(p===A||i(p,A,e,s,n)))return h.push(b)})){f=!1;break}}else if(!(p===m||i(p,m,e,s,n))){f=!1;break}}return n.delete(r),n.delete(t),f}function Jy(r,t,e,s,i,n,o){switch(e){case ti:if(r.byteLength!=t.byteLength||r.byteOffset!=t.byteOffset)return!1;r=r.buffer,t=t.buffer;case Iu:return!(r.byteLength!=t.byteLength||!n(new gu(r),new gu(t)));case Au:case Su:case Cu:return Pu(+r,+t);case Tu:return r.name==t.name&&r.message==t.message;case Lu:case Ou:return r==t+"";case Xs:var a=ly;case Ys:var l=s&ii;if(a||(a=uy),r.size!=t.size&&!l)return!1;var c=o.get(r);if(c)return c==t;s|=wu,o.set(r,t);var u=ju(a(r),a(t),s,i,n,o);return o.delete(r),u;case zb:if(xn)return xn.call(r)==xn.call(t)}return!1}function Qy(r,t,e,s,i,n){var o=e&ii,a=vu(r),l=a.length,c=vu(t),u=c.length;if(l!=u&&!o)return!1;for(var f=l;f--;){var h=a[f];if(!(o?h in t:kt.call(t,h)))return!1}var p=n.get(r);if(p&&n.get(t))return p==t;var m=!0;n.set(r,t),n.set(t,r);for(var x=o;++f<l;){h=a[f];var A=r[h],b=t[h];if(s)var T=o?s(b,A,h,t,r,n):s(A,b,h,r,t,n);if(!(T===void 0?A===b||i(A,b,e,s,n):T)){m=!1;break}x||(x=h=="constructor")}if(m&&!x){var C=r.constructor,N=t.constructor;C!=N&&"constructor"in r&&"constructor"in t&&!(typeof C=="function"&&C instanceof C&&typeof N=="function"&&N instanceof N)&&(m=!1)}return n.delete(r),n.delete(t),m}function vu(r){return Wy(r,lx,Yy)}function ai(r,t){var e=r.__data__;return ex(t)?e[typeof t=="string"?"string":"hash"]:e.map}function dr(r,t){var e=ay(r,t);return Vy(e)?e:void 0}function Xy(r){var t=kt.call(r,Oe),e=r[Oe];try{r[Oe]=void 0;var s=!0}catch{}var i=Mu.call(r);return s&&(t?r[Oe]=e:delete r[Oe]),i}var Yy=bu?function(r){return r==null?[]:(r=Object(r),ey(bu(r),function(t){return Bu.call(r,t)}))}:cx,fe=Jr;(En&&fe(new En(new ArrayBuffer(1)))!=ti||Vr&&fe(new Vr)!=Xs||An&&fe(An.resolve())!=uu||Sn&&fe(new Sn)!=Ys||Tn&&fe(new Tn)!=wn)&&(fe=function(r){var t=Jr(r),e=t==fr?r.constructor:void 0,s=e?qe(e):"";if(s)switch(s){case by:return ti;case yy:return Xs;case xy:return uu;case vy:return Ys;case wy:return wn}return t});function tx(r,t){return t=t??Eu,!!t&&(typeof r=="number"||Yb.test(r))&&r>-1&&r%1==0&&r<t}function ex(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}function rx(r){return!!pu&&pu in r}function sx(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||ni;return r===e}function ix(r){return Mu.call(r)}function qe(r){if(r!=null){try{return Ru.call(r)}catch{}try{return r+""}catch{}}return""}function Pu(r,t){return r===t||r!==r&&t!==t}var nx=xu(function(){return arguments}())?xu:function(r){return Zr(r)&&kt.call(r,"callee")&&!Bu.call(r,"callee")},si=Array.isArray;function ox(r){return r!=null&&Uu(r.length)&&!zu(r)}var Nn=my||ux;function ax(r,t){return Du(r,t)}function zu(r){if(!Hu(r))return!1;var t=Jr(r);return t==Nu||t==Db||t==Bb||t==Pb}function Uu(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Eu}function Hu(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}function Zr(r){return r!=null&&typeof r=="object"}var Fu=du?ny(du):Gy;function lx(r){return ox(r)?$y(r):Zy(r)}function cx(){return[]}function ux(){return!1}hr.exports=ax});var $u=Dt(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});var fx=gn(),hx=Ln(),On;(function(r){function t(n={},o={},a=!1){typeof n!="object"&&(n={}),typeof o!="object"&&(o={});let l=fx(o);a||(l=Object.keys(l).reduce((c,u)=>(l[u]!=null&&(c[u]=l[u]),c),{}));for(let c in n)n[c]!==void 0&&o[c]===void 0&&(l[c]=n[c]);return Object.keys(l).length>0?l:void 0}r.compose=t;function e(n={},o={}){typeof n!="object"&&(n={}),typeof o!="object"&&(o={});let a=Object.keys(n).concat(Object.keys(o)).reduce((l,c)=>(hx(n[c],o[c])||(l[c]=o[c]===void 0?null:o[c]),l),{});return Object.keys(a).length>0?a:void 0}r.diff=e;function s(n={},o={}){n=n||{};let a=Object.keys(o).reduce((l,c)=>(o[c]!==n[c]&&n[c]!==void 0&&(l[c]=o[c]),l),{});return Object.keys(n).reduce((l,c)=>(n[c]!==o[c]&&o[c]===void 0&&(l[c]=null),l),a)}r.invert=s;function i(n,o,a=!1){if(typeof n!="object")return o;if(typeof o!="object")return;if(!a)return o;let l=Object.keys(o).reduce((c,u)=>(n[u]===void 0&&(c[u]=o[u]),c),{});return Object.keys(l).length>0?l:void 0}r.transform=i})(On||(On={}));In.default=On});var kn=Dt(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});var _n;(function(r){function t(e){return typeof e.delete=="number"?e.delete:typeof e.retain=="number"?e.retain:typeof e.retain=="object"&&e.retain!==null?1:typeof e.insert=="string"?e.insert.length:1}r.length=t})(_n||(_n={}));qn.default=_n});var Ku=Dt(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});var Wu=kn(),Rn=class{constructor(t){this.ops=t,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(t){t||(t=1/0);let e=this.ops[this.index];if(e){let s=this.offset,i=Wu.default.length(e);if(t>=i-s?(t=i-s,this.index+=1,this.offset=0):this.offset+=t,typeof e.delete=="number")return{delete:t};{let n={};return e.attributes&&(n.attributes=e.attributes),typeof e.retain=="number"?n.retain=t:typeof e.retain=="object"&&e.retain!==null?n.retain=e.retain:typeof e.insert=="string"?n.insert=e.insert.substr(s,t):n.insert=e.insert,n}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?Wu.default.length(this.ops[this.index])-this.offset:1/0}peekType(){let t=this.ops[this.index];return t?typeof t.delete=="number"?"delete":typeof t.retain=="number"||typeof t.retain=="object"&&t.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{let t=this.offset,e=this.index,s=this.next(),i=this.ops.slice(this.index);return this.offset=t,this.index=e,[s].concat(i)}}else return[]}};Mn.default=Rn});var ft=Dt((Gt,ci)=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.AttributeMap=Gt.OpIterator=Gt.Op=void 0;var li=Ec(),dx=gn(),Bn=Ln(),ke=$u();Gt.AttributeMap=ke.default;var Vt=kn();Gt.Op=Vt.default;var wt=Ku();Gt.OpIterator=wt.default;var px="\0",Vu=(r,t)=>{if(typeof r!="object"||r===null)throw new Error(`cannot retain a ${typeof r}`);if(typeof t!="object"||t===null)throw new Error(`cannot retain a ${typeof t}`);let e=Object.keys(r)[0];if(!e||e!==Object.keys(t)[0])throw new Error(`embed types not matched: ${e} != ${Object.keys(t)[0]}`);return[e,r[e],t[e]]},Zt=class r{constructor(t){Array.isArray(t)?this.ops=t:t!=null&&Array.isArray(t.ops)?this.ops=t.ops:this.ops=[]}static registerEmbed(t,e){this.handlers[t]=e}static unregisterEmbed(t){delete this.handlers[t]}static getHandler(t){let e=this.handlers[t];if(!e)throw new Error(`no handlers for embed type "${t}"`);return e}insert(t,e){let s={};return typeof t=="string"&&t.length===0?this:(s.insert=t,e!=null&&typeof e=="object"&&Object.keys(e).length>0&&(s.attributes=e),this.push(s))}delete(t){return t<=0?this:this.push({delete:t})}retain(t,e){if(typeof t=="number"&&t<=0)return this;let s={retain:t};return e!=null&&typeof e=="object"&&Object.keys(e).length>0&&(s.attributes=e),this.push(s)}push(t){let e=this.ops.length,s=this.ops[e-1];if(t=dx(t),typeof s=="object"){if(typeof t.delete=="number"&&typeof s.delete=="number")return this.ops[e-1]={delete:s.delete+t.delete},this;if(typeof s.delete=="number"&&t.insert!=null&&(e-=1,s=this.ops[e-1],typeof s!="object"))return this.ops.unshift(t),this;if(Bn(t.attributes,s.attributes)){if(typeof t.insert=="string"&&typeof s.insert=="string")return this.ops[e-1]={insert:s.insert+t.insert},typeof t.attributes=="object"&&(this.ops[e-1].attributes=t.attributes),this;if(typeof t.retain=="number"&&typeof s.retain=="number")return this.ops[e-1]={retain:s.retain+t.retain},typeof t.attributes=="object"&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this}chop(){let t=this.ops[this.ops.length-1];return t&&typeof t.retain=="number"&&!t.attributes&&this.ops.pop(),this}filter(t){return this.ops.filter(t)}forEach(t){this.ops.forEach(t)}map(t){return this.ops.map(t)}partition(t){let e=[],s=[];return this.forEach(i=>{(t(i)?e:s).push(i)}),[e,s]}reduce(t,e){return this.ops.reduce(t,e)}changeLength(){return this.reduce((t,e)=>e.insert?t+Vt.default.length(e):e.delete?t-e.delete:t,0)}length(){return this.reduce((t,e)=>t+Vt.default.length(e),0)}slice(t=0,e=1/0){let s=[],i=new wt.default(this.ops),n=0;for(;n<e&&i.hasNext();){let o;n<t?o=i.next(t-n):(o=i.next(e-n),s.push(o)),n+=Vt.default.length(o)}return new r(s)}compose(t){let e=new wt.default(this.ops),s=new wt.default(t.ops),i=[],n=s.peek();if(n!=null&&typeof n.retain=="number"&&n.attributes==null){let a=n.retain;for(;e.peekType()==="insert"&&e.peekLength()<=a;)a-=e.peekLength(),i.push(e.next());n.retain-a>0&&s.next(n.retain-a)}let o=new r(i);for(;e.hasNext()||s.hasNext();)if(s.peekType()==="insert")o.push(s.next());else if(e.peekType()==="delete")o.push(e.next());else{let a=Math.min(e.peekLength(),s.peekLength()),l=e.next(a),c=s.next(a);if(c.retain){let u={};if(typeof l.retain=="number")u.retain=typeof c.retain=="number"?a:c.retain;else if(typeof c.retain=="number")l.retain==null?u.insert=l.insert:u.retain=l.retain;else{let h=l.retain==null?"insert":"retain",[p,m,x]=Vu(l[h],c.retain),A=r.getHandler(p);u[h]={[p]:A.compose(m,x,h==="retain")}}let f=ke.default.compose(l.attributes,c.attributes,typeof l.retain=="number");if(f&&(u.attributes=f),o.push(u),!s.hasNext()&&Bn(o.ops[o.ops.length-1],u)){let h=new r(e.rest());return o.concat(h).chop()}}else typeof c.delete=="number"&&(typeof l.retain=="number"||typeof l.retain=="object"&&l.retain!==null)&&o.push(c)}return o.chop()}concat(t){let e=new r(this.ops.slice());return t.ops.length>0&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e}diff(t,e){if(this.ops===t.ops)return new r;let s=[this,t].map(l=>l.map(c=>{if(c.insert!=null)return typeof c.insert=="string"?c.insert:px;let u=l===t?"on":"with";throw new Error("diff() called "+u+" non-document")}).join("")),i=new r,n=li(s[0],s[1],e,!0),o=new wt.default(this.ops),a=new wt.default(t.ops);return n.forEach(l=>{let c=l[1].length;for(;c>0;){let u=0;switch(l[0]){case li.INSERT:u=Math.min(a.peekLength(),c),i.push(a.next(u));break;case li.DELETE:u=Math.min(c,o.peekLength()),o.next(u),i.delete(u);break;case li.EQUAL:u=Math.min(o.peekLength(),a.peekLength(),c);let f=o.next(u),h=a.next(u);Bn(f.insert,h.insert)?i.retain(u,ke.default.diff(f.attributes,h.attributes)):i.push(h).delete(u);break}c-=u}}),i.chop()}eachLine(t,e=`
`){let s=new wt.default(this.ops),i=new r,n=0;for(;s.hasNext();){if(s.peekType()!=="insert")return;let o=s.peek(),a=Vt.default.length(o)-s.peekLength(),l=typeof o.insert=="string"?o.insert.indexOf(e,a)-a:-1;if(l<0)i.push(s.next());else if(l>0)i.push(s.next(l));else{if(t(i,s.next(1).attributes||{},n)===!1)return;n+=1,i=new r}}i.length()>0&&t(i,{},n)}invert(t){let e=new r;return this.reduce((s,i)=>{if(i.insert)e.delete(Vt.default.length(i));else{if(typeof i.retain=="number"&&i.attributes==null)return e.retain(i.retain),s+i.retain;if(i.delete||typeof i.retain=="number"){let n=i.delete||i.retain;return t.slice(s,s+n).forEach(a=>{i.delete?e.push(a):i.retain&&i.attributes&&e.retain(Vt.default.length(a),ke.default.invert(i.attributes,a.attributes))}),s+n}else if(typeof i.retain=="object"&&i.retain!==null){let n=t.slice(s,s+1),o=new wt.default(n.ops).next(),[a,l,c]=Vu(i.retain,o.insert),u=r.getHandler(a);return e.retain({[a]:u.invert(l,c)},ke.default.invert(i.attributes,o.attributes)),s+1}}return s},0),e.chop()}transform(t,e=!1){if(e=!!e,typeof t=="number")return this.transformPosition(t,e);let s=t,i=new wt.default(this.ops),n=new wt.default(s.ops),o=new r;for(;i.hasNext()||n.hasNext();)if(i.peekType()==="insert"&&(e||n.peekType()!=="insert"))o.retain(Vt.default.length(i.next()));else if(n.peekType()==="insert")o.push(n.next());else{let a=Math.min(i.peekLength(),n.peekLength()),l=i.next(a),c=n.next(a);if(l.delete)continue;if(c.delete)o.push(c);else{let u=l.retain,f=c.retain,h=typeof f=="object"&&f!==null?f:a;if(typeof u=="object"&&u!==null&&typeof f=="object"&&f!==null){let p=Object.keys(u)[0];if(p===Object.keys(f)[0]){let m=r.getHandler(p);m&&(h={[p]:m.transform(u[p],f[p],e)})}}o.retain(h,ke.default.transform(l.attributes,c.attributes,e))}}return o.chop()}transformPosition(t,e=!1){e=!!e;let s=new wt.default(this.ops),i=0;for(;s.hasNext()&&i<=t;){let n=s.peekLength(),o=s.peekType();if(s.next(),o==="delete"){t-=Math.min(n,t-i);continue}else o==="insert"&&(i<t||!e)&&(t+=n);i+=n}return t}};Zt.Op=Vt.default;Zt.OpIterator=wt.default;Zt.AttributeMap=ke.default;Zt.handlers={};Gt.default=Zt;typeof ci=="object"&&(ci.exports=Zt,ci.exports.default=Zt)});var Ju=Dt((_3,Un)=>{"use strict";var gx=Object.prototype.hasOwnProperty,nt="~";function Xr(){}Object.create&&(Xr.prototype=Object.create(null),new Xr().__proto__||(nt=!1));function bx(r,t,e){this.fn=r,this.context=t,this.once=e||!1}function Zu(r,t,e,s,i){if(typeof e!="function")throw new TypeError("The listener must be a function");var n=new bx(e,s||r,i),o=nt?nt+t:t;return r._events[o]?r._events[o].fn?r._events[o]=[r._events[o],n]:r._events[o].push(n):(r._events[o]=n,r._eventsCount++),r}function ui(r,t){--r._eventsCount===0?r._events=new Xr:delete r._events[t]}function X(){this._events=new Xr,this._eventsCount=0}X.prototype.eventNames=function(){var t=[],e,s;if(this._eventsCount===0)return t;for(s in e=this._events)gx.call(e,s)&&t.push(nt?s.slice(1):s);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(e)):t};X.prototype.listeners=function(t){var e=nt?nt+t:t,s=this._events[e];if(!s)return[];if(s.fn)return[s.fn];for(var i=0,n=s.length,o=new Array(n);i<n;i++)o[i]=s[i].fn;return o};X.prototype.listenerCount=function(t){var e=nt?nt+t:t,s=this._events[e];return s?s.fn?1:s.length:0};X.prototype.emit=function(t,e,s,i,n,o){var a=nt?nt+t:t;if(!this._events[a])return!1;var l=this._events[a],c=arguments.length,u,f;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,s),!0;case 4:return l.fn.call(l.context,e,s,i),!0;case 5:return l.fn.call(l.context,e,s,i,n),!0;case 6:return l.fn.call(l.context,e,s,i,n,o),!0}for(f=1,u=new Array(c-1);f<c;f++)u[f-1]=arguments[f];l.fn.apply(l.context,u)}else{var h=l.length,p;for(f=0;f<h;f++)switch(l[f].once&&this.removeListener(t,l[f].fn,void 0,!0),c){case 1:l[f].fn.call(l[f].context);break;case 2:l[f].fn.call(l[f].context,e);break;case 3:l[f].fn.call(l[f].context,e,s);break;case 4:l[f].fn.call(l[f].context,e,s,i);break;default:if(!u)for(p=1,u=new Array(c-1);p<c;p++)u[p-1]=arguments[p];l[f].fn.apply(l[f].context,u)}}return!0};X.prototype.on=function(t,e,s){return Zu(this,t,e,s,!1)};X.prototype.once=function(t,e,s){return Zu(this,t,e,s,!0)};X.prototype.removeListener=function(t,e,s,i){var n=nt?nt+t:t;if(!this._events[n])return this;if(!e)return ui(this,n),this;var o=this._events[n];if(o.fn)o.fn===e&&(!i||o.once)&&(!s||o.context===s)&&ui(this,n);else{for(var a=0,l=[],c=o.length;a<c;a++)(o[a].fn!==e||i&&!o[a].once||s&&o[a].context!==s)&&l.push(o[a]);l.length?this._events[n]=l.length===1?l[0]:l:ui(this,n)}return this};X.prototype.removeAllListeners=function(t){var e;return t?(e=nt?nt+t:t,this._events[e]&&ui(this,e)):(this._events=new Xr,this._eventsCount=0),this};X.prototype.off=X.prototype.removeListener;X.prototype.addListener=X.prototype.on;X.prefixed=nt;X.EventEmitter=X;typeof Un<"u"&&(Un.exports=X)});var rh=Dt((JC,eh)=>{"use strict";var l2=function(t){return c2(t)&&!u2(t)};function c2(r){return!!r&&typeof r=="object"}function u2(r){var t=Object.prototype.toString.call(r);return t==="[object RegExp]"||t==="[object Date]"||d2(r)}var f2=typeof Symbol=="function"&&Symbol.for,h2=f2?Symbol.for("react.element"):60103;function d2(r){return r.$$typeof===h2}function p2(r){return Array.isArray(r)?[]:{}}function hs(r,t){return t.clone!==!1&&t.isMergeableObject(r)?_r(p2(r),r,t):r}function m2(r,t,e){return r.concat(t).map(function(s){return hs(s,e)})}function g2(r,t){if(!t.customMerge)return _r;var e=t.customMerge(r);return typeof e=="function"?e:_r}function b2(r){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(r).filter(function(t){return Object.propertyIsEnumerable.call(r,t)}):[]}function Yf(r){return Object.keys(r).concat(b2(r))}function th(r,t){try{return t in r}catch{return!1}}function y2(r,t){return th(r,t)&&!(Object.hasOwnProperty.call(r,t)&&Object.propertyIsEnumerable.call(r,t))}function x2(r,t,e){var s={};return e.isMergeableObject(r)&&Yf(r).forEach(function(i){s[i]=hs(r[i],e)}),Yf(t).forEach(function(i){y2(r,i)||(th(r,i)&&e.isMergeableObject(t[i])?s[i]=g2(i,e)(r[i],t[i],e):s[i]=hs(t[i],e))}),s}function _r(r,t,e){e=e||{},e.arrayMerge=e.arrayMerge||m2,e.isMergeableObject=e.isMergeableObject||l2,e.cloneUnlessOtherwiseSpecified=hs;var s=Array.isArray(t),i=Array.isArray(r),n=s===i;return n?s?e.arrayMerge(r,t,e):x2(r,t,e):hs(t,e)}_r.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(s,i){return _r(s,i,e)},{})};var v2=_r;eh.exports=v2});var xh=typeof global=="object"&&global&&global.Object===Object&&global,ms=xh;var vh=typeof self=="object"&&self&&self.Object===Object&&self,wh=ms||vh||Function("return this")(),U=wh;var Eh=U.Symbol,xt=Eh;var Yo=Object.prototype,Ah=Yo.hasOwnProperty,Sh=Yo.toString,kr=xt?xt.toStringTag:void 0;function Th(r){var t=Ah.call(r,kr),e=r[kr];try{r[kr]=void 0;var s=!0}catch{}var i=Sh.call(r);return s&&(t?r[kr]=e:delete r[kr]),i}var ta=Th;var Nh=Object.prototype,Ch=Nh.toString;function Lh(r){return Ch.call(r)}var ea=Lh;var Oh="[object Null]",Ih="[object Undefined]",ra=xt?xt.toStringTag:void 0;function _h(r){return r==null?r===void 0?Ih:Oh:ra&&ra in Object(r)?ta(r):ea(r)}var Nt=_h;function qh(r){return r!=null&&typeof r=="object"}var V=qh;var kh=Array.isArray,vt=kh;function Rh(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}var Z=Rh;function Mh(r){return r}var gs=Mh;var Bh="[object AsyncFunction]",Dh="[object Function]",jh="[object GeneratorFunction]",Ph="[object Proxy]";function zh(r){if(!Z(r))return!1;var t=Nt(r);return t==Dh||t==jh||t==Bh||t==Ph}var ze=zh;var Uh=U["__core-js_shared__"],bs=Uh;var sa=function(){var r=/[^.]+$/.exec(bs&&bs.keys&&bs.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function Hh(r){return!!sa&&sa in r}var ia=Hh;var Fh=Function.prototype,$h=Fh.toString;function Wh(r){if(r!=null){try{return $h.call(r)}catch{}try{return r+""}catch{}}return""}var jt=Wh;var Kh=/[\\^$.*+?()[\]{}|]/g,Vh=/^\[object .+?Constructor\]$/,Gh=Function.prototype,Zh=Object.prototype,Jh=Gh.toString,Qh=Zh.hasOwnProperty,Xh=RegExp("^"+Jh.call(Qh).replace(Kh,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Yh(r){if(!Z(r)||ia(r))return!1;var t=ze(r)?Xh:Vh;return t.test(jt(r))}var na=Yh;function td(r,t){return r?.[t]}var oa=td;function ed(r,t){var e=oa(r,t);return na(e)?e:void 0}var at=ed;var rd=at(U,"WeakMap"),ys=rd;var aa=Object.create,sd=function(){function r(){}return function(t){if(!Z(t))return{};if(aa)return aa(t);r.prototype=t;var e=new r;return r.prototype=void 0,e}}(),la=sd;function id(r,t,e){switch(e.length){case 0:return r.call(t);case 1:return r.call(t,e[0]);case 2:return r.call(t,e[0],e[1]);case 3:return r.call(t,e[0],e[1],e[2])}return r.apply(t,e)}var ca=id;function nd(r,t){var e=-1,s=r.length;for(t||(t=Array(s));++e<s;)t[e]=r[e];return t}var xs=nd;var od=800,ad=16,ld=Date.now;function cd(r){var t=0,e=0;return function(){var s=ld(),i=ad-(s-e);if(e=s,i>0){if(++t>=od)return arguments[0]}else t=0;return r.apply(void 0,arguments)}}var ua=cd;function ud(r){return function(){return r}}var fa=ud;var fd=function(){try{var r=at(Object,"defineProperty");return r({},"",{}),r}catch{}}(),Ue=fd;var hd=Ue?function(r,t){return Ue(r,"toString",{configurable:!0,enumerable:!1,value:fa(t),writable:!0})}:gs,ha=hd;var dd=ua(ha),da=dd;function pd(r,t){for(var e=-1,s=r==null?0:r.length;++e<s&&t(r[e],e,r)!==!1;);return r}var pa=pd;var md=9007199254740991,gd=/^(?:0|[1-9]\d*)$/;function bd(r,t){var e=typeof r;return t=t??md,!!t&&(e=="number"||e!="symbol"&&gd.test(r))&&r>-1&&r%1==0&&r<t}var vs=bd;function yd(r,t,e){t=="__proto__"&&Ue?Ue(r,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):r[t]=e}var He=yd;function xd(r,t){return r===t||r!==r&&t!==t}var Ot=xd;var vd=Object.prototype,wd=vd.hasOwnProperty;function Ed(r,t,e){var s=r[t];(!(wd.call(r,t)&&Ot(s,e))||e===void 0&&!(t in r))&&He(r,t,e)}var ws=Ed;function Ad(r,t,e,s){var i=!e;e||(e={});for(var n=-1,o=t.length;++n<o;){var a=t[n],l=s?s(e[a],r[a],a,e,r):void 0;l===void 0&&(l=r[a]),i?He(e,a,l):ws(e,a,l)}return e}var It=Ad;var ma=Math.max;function Sd(r,t,e){return t=ma(t===void 0?r.length-1:t,0),function(){for(var s=arguments,i=-1,n=ma(s.length-t,0),o=Array(n);++i<n;)o[i]=s[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=s[i];return a[t]=e(o),ca(r,this,a)}}var ga=Sd;function Td(r,t){return da(ga(r,t,gs),r+"")}var ba=Td;var Nd=9007199254740991;function Cd(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Nd}var Es=Cd;function Ld(r){return r!=null&&Es(r.length)&&!ze(r)}var ee=Ld;function Od(r,t,e){if(!Z(e))return!1;var s=typeof t;return(s=="number"?ee(e)&&vs(t,e.length):s=="string"&&t in e)?Ot(e[t],r):!1}var ya=Od;function Id(r){return ba(function(t,e){var s=-1,i=e.length,n=i>1?e[i-1]:void 0,o=i>2?e[2]:void 0;for(n=r.length>3&&typeof n=="function"?(i--,n):void 0,o&&ya(e[0],e[1],o)&&(n=i<3?void 0:n,i=1),t=Object(t);++s<i;){var a=e[s];a&&r(t,a,s,n)}return t})}var xa=Id;var _d=Object.prototype;function qd(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||_d;return r===e}var Fe=qd;function kd(r,t){for(var e=-1,s=Array(r);++e<r;)s[e]=t(e);return s}var va=kd;var Rd="[object Arguments]";function Md(r){return V(r)&&Nt(r)==Rd}var ji=Md;var wa=Object.prototype,Bd=wa.hasOwnProperty,Dd=wa.propertyIsEnumerable,jd=ji(function(){return arguments}())?ji:function(r){return V(r)&&Bd.call(r,"callee")&&!Dd.call(r,"callee")},Rr=jd;function Pd(){return!1}var Ea=Pd;var Ta=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Aa=Ta&&typeof module=="object"&&module&&!module.nodeType&&module,zd=Aa&&Aa.exports===Ta,Sa=zd?U.Buffer:void 0,Ud=Sa?Sa.isBuffer:void 0,Hd=Ud||Ea,Pt=Hd;var Fd="[object Arguments]",$d="[object Array]",Wd="[object Boolean]",Kd="[object Date]",Vd="[object Error]",Gd="[object Function]",Zd="[object Map]",Jd="[object Number]",Qd="[object Object]",Xd="[object RegExp]",Yd="[object Set]",tp="[object String]",ep="[object WeakMap]",rp="[object ArrayBuffer]",sp="[object DataView]",ip="[object Float32Array]",np="[object Float64Array]",op="[object Int8Array]",ap="[object Int16Array]",lp="[object Int32Array]",cp="[object Uint8Array]",up="[object Uint8ClampedArray]",fp="[object Uint16Array]",hp="[object Uint32Array]",R={};R[ip]=R[np]=R[op]=R[ap]=R[lp]=R[cp]=R[up]=R[fp]=R[hp]=!0;R[Fd]=R[$d]=R[rp]=R[Wd]=R[sp]=R[Kd]=R[Vd]=R[Gd]=R[Zd]=R[Jd]=R[Qd]=R[Xd]=R[Yd]=R[tp]=R[ep]=!1;function dp(r){return V(r)&&Es(r.length)&&!!R[Nt(r)]}var Na=dp;function pp(r){return function(t){return r(t)}}var $e=pp;var Ca=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Mr=Ca&&typeof module=="object"&&module&&!module.nodeType&&module,mp=Mr&&Mr.exports===Ca,Pi=mp&&ms.process,gp=function(){try{var r=Mr&&Mr.require&&Mr.require("util").types;return r||Pi&&Pi.binding&&Pi.binding("util")}catch{}}(),zt=gp;var La=zt&&zt.isTypedArray,bp=La?$e(La):Na,We=bp;var yp=Object.prototype,xp=yp.hasOwnProperty;function vp(r,t){var e=vt(r),s=!e&&Rr(r),i=!e&&!s&&Pt(r),n=!e&&!s&&!i&&We(r),o=e||s||i||n,a=o?va(r.length,String):[],l=a.length;for(var c in r)(t||xp.call(r,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||n&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||vs(c,l)))&&a.push(c);return a}var As=vp;function wp(r,t){return function(e){return r(t(e))}}var Ss=wp;var Ep=Ss(Object.keys,Object),Oa=Ep;var Ap=Object.prototype,Sp=Ap.hasOwnProperty;function Tp(r){if(!Fe(r))return Oa(r);var t=[];for(var e in Object(r))Sp.call(r,e)&&e!="constructor"&&t.push(e);return t}var Ia=Tp;function Np(r){return ee(r)?As(r):Ia(r)}var Ke=Np;function Cp(r){var t=[];if(r!=null)for(var e in Object(r))t.push(e);return t}var _a=Cp;var Lp=Object.prototype,Op=Lp.hasOwnProperty;function Ip(r){if(!Z(r))return _a(r);var t=Fe(r),e=[];for(var s in r)s=="constructor"&&(t||!Op.call(r,s))||e.push(s);return e}var qa=Ip;function _p(r){return ee(r)?As(r,!0):qa(r)}var _t=_p;var qp=at(Object,"create"),Ut=qp;function kp(){this.__data__=Ut?Ut(null):{},this.size=0}var ka=kp;function Rp(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t}var Ra=Rp;var Mp="__lodash_hash_undefined__",Bp=Object.prototype,Dp=Bp.hasOwnProperty;function jp(r){var t=this.__data__;if(Ut){var e=t[r];return e===Mp?void 0:e}return Dp.call(t,r)?t[r]:void 0}var Ma=jp;var Pp=Object.prototype,zp=Pp.hasOwnProperty;function Up(r){var t=this.__data__;return Ut?t[r]!==void 0:zp.call(t,r)}var Ba=Up;var Hp="__lodash_hash_undefined__";function Fp(r,t){var e=this.__data__;return this.size+=this.has(r)?0:1,e[r]=Ut&&t===void 0?Hp:t,this}var Da=Fp;function Ve(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var s=r[t];this.set(s[0],s[1])}}Ve.prototype.clear=ka;Ve.prototype.delete=Ra;Ve.prototype.get=Ma;Ve.prototype.has=Ba;Ve.prototype.set=Da;var zi=Ve;function $p(){this.__data__=[],this.size=0}var ja=$p;function Wp(r,t){for(var e=r.length;e--;)if(Ot(r[e][0],t))return e;return-1}var re=Wp;var Kp=Array.prototype,Vp=Kp.splice;function Gp(r){var t=this.__data__,e=re(t,r);if(e<0)return!1;var s=t.length-1;return e==s?t.pop():Vp.call(t,e,1),--this.size,!0}var Pa=Gp;function Zp(r){var t=this.__data__,e=re(t,r);return e<0?void 0:t[e][1]}var za=Zp;function Jp(r){return re(this.__data__,r)>-1}var Ua=Jp;function Qp(r,t){var e=this.__data__,s=re(e,r);return s<0?(++this.size,e.push([r,t])):e[s][1]=t,this}var Ha=Qp;function Ge(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var s=r[t];this.set(s[0],s[1])}}Ge.prototype.clear=ja;Ge.prototype.delete=Pa;Ge.prototype.get=za;Ge.prototype.has=Ua;Ge.prototype.set=Ha;var se=Ge;var Xp=at(U,"Map"),ie=Xp;function Yp(){this.size=0,this.__data__={hash:new zi,map:new(ie||se),string:new zi}}var Fa=Yp;function tm(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}var $a=tm;function em(r,t){var e=r.__data__;return $a(t)?e[typeof t=="string"?"string":"hash"]:e.map}var ne=em;function rm(r){var t=ne(this,r).delete(r);return this.size-=t?1:0,t}var Wa=rm;function sm(r){return ne(this,r).get(r)}var Ka=sm;function im(r){return ne(this,r).has(r)}var Va=im;function nm(r,t){var e=ne(this,r),s=e.size;return e.set(r,t),this.size+=e.size==s?0:1,this}var Ga=nm;function Ze(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var s=r[t];this.set(s[0],s[1])}}Ze.prototype.clear=Fa;Ze.prototype.delete=Wa;Ze.prototype.get=Ka;Ze.prototype.has=Va;Ze.prototype.set=Ga;var Ts=Ze;function om(r,t){for(var e=-1,s=t.length,i=r.length;++e<s;)r[i+e]=t[e];return r}var Ns=om;var am=Ss(Object.getPrototypeOf,Object),Je=am;var lm="[object Object]",cm=Function.prototype,um=Object.prototype,Za=cm.toString,fm=um.hasOwnProperty,hm=Za.call(Object);function dm(r){if(!V(r)||Nt(r)!=lm)return!1;var t=Je(r);if(t===null)return!0;var e=fm.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&Za.call(e)==hm}var Ja=dm;function pm(){this.__data__=new se,this.size=0}var Qa=pm;function mm(r){var t=this.__data__,e=t.delete(r);return this.size=t.size,e}var Xa=mm;function gm(r){return this.__data__.get(r)}var Ya=gm;function bm(r){return this.__data__.has(r)}var tl=bm;var ym=200;function xm(r,t){var e=this.__data__;if(e instanceof se){var s=e.__data__;if(!ie||s.length<ym-1)return s.push([r,t]),this.size=++e.size,this;e=this.__data__=new Ts(s)}return e.set(r,t),this.size=e.size,this}var el=xm;function Qe(r){var t=this.__data__=new se(r);this.size=t.size}Qe.prototype.clear=Qa;Qe.prototype.delete=Xa;Qe.prototype.get=Ya;Qe.prototype.has=tl;Qe.prototype.set=el;var oe=Qe;function vm(r,t){return r&&It(t,Ke(t),r)}var rl=vm;function wm(r,t){return r&&It(t,_t(t),r)}var sl=wm;var al=typeof exports=="object"&&exports&&!exports.nodeType&&exports,il=al&&typeof module=="object"&&module&&!module.nodeType&&module,Em=il&&il.exports===al,nl=Em?U.Buffer:void 0,ol=nl?nl.allocUnsafe:void 0;function Am(r,t){if(t)return r.slice();var e=r.length,s=ol?ol(e):new r.constructor(e);return r.copy(s),s}var Cs=Am;function Sm(r,t){for(var e=-1,s=r==null?0:r.length,i=0,n=[];++e<s;){var o=r[e];t(o,e,r)&&(n[i++]=o)}return n}var ll=Sm;function Tm(){return[]}var Ls=Tm;var Nm=Object.prototype,Cm=Nm.propertyIsEnumerable,cl=Object.getOwnPropertySymbols,Lm=cl?function(r){return r==null?[]:(r=Object(r),ll(cl(r),function(t){return Cm.call(r,t)}))}:Ls,Xe=Lm;function Om(r,t){return It(r,Xe(r),t)}var ul=Om;var Im=Object.getOwnPropertySymbols,_m=Im?function(r){for(var t=[];r;)Ns(t,Xe(r)),r=Je(r);return t}:Ls,Os=_m;function qm(r,t){return It(r,Os(r),t)}var fl=qm;function km(r,t,e){var s=t(r);return vt(r)?s:Ns(s,e(r))}var Is=km;function Rm(r){return Is(r,Ke,Xe)}var Br=Rm;function Mm(r){return Is(r,_t,Os)}var hl=Mm;var Bm=at(U,"DataView"),_s=Bm;var Dm=at(U,"Promise"),qs=Dm;var jm=at(U,"Set"),ks=jm;var dl="[object Map]",Pm="[object Object]",pl="[object Promise]",ml="[object Set]",gl="[object WeakMap]",bl="[object DataView]",zm=jt(_s),Um=jt(ie),Hm=jt(qs),Fm=jt(ks),$m=jt(ys),Ae=Nt;(_s&&Ae(new _s(new ArrayBuffer(1)))!=bl||ie&&Ae(new ie)!=dl||qs&&Ae(qs.resolve())!=pl||ks&&Ae(new ks)!=ml||ys&&Ae(new ys)!=gl)&&(Ae=function(r){var t=Nt(r),e=t==Pm?r.constructor:void 0,s=e?jt(e):"";if(s)switch(s){case zm:return bl;case Um:return dl;case Hm:return pl;case Fm:return ml;case $m:return gl}return t});var Ht=Ae;var Wm=Object.prototype,Km=Wm.hasOwnProperty;function Vm(r){var t=r.length,e=new r.constructor(t);return t&&typeof r[0]=="string"&&Km.call(r,"index")&&(e.index=r.index,e.input=r.input),e}var yl=Vm;var Gm=U.Uint8Array,Ye=Gm;function Zm(r){var t=new r.constructor(r.byteLength);return new Ye(t).set(new Ye(r)),t}var tr=Zm;function Jm(r,t){var e=t?tr(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.byteLength)}var xl=Jm;var Qm=/\w*$/;function Xm(r){var t=new r.constructor(r.source,Qm.exec(r));return t.lastIndex=r.lastIndex,t}var vl=Xm;var wl=xt?xt.prototype:void 0,El=wl?wl.valueOf:void 0;function Ym(r){return El?Object(El.call(r)):{}}var Al=Ym;function tg(r,t){var e=t?tr(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.length)}var Rs=tg;var eg="[object Boolean]",rg="[object Date]",sg="[object Map]",ig="[object Number]",ng="[object RegExp]",og="[object Set]",ag="[object String]",lg="[object Symbol]",cg="[object ArrayBuffer]",ug="[object DataView]",fg="[object Float32Array]",hg="[object Float64Array]",dg="[object Int8Array]",pg="[object Int16Array]",mg="[object Int32Array]",gg="[object Uint8Array]",bg="[object Uint8ClampedArray]",yg="[object Uint16Array]",xg="[object Uint32Array]";function vg(r,t,e){var s=r.constructor;switch(t){case cg:return tr(r);case eg:case rg:return new s(+r);case ug:return xl(r,e);case fg:case hg:case dg:case pg:case mg:case gg:case bg:case yg:case xg:return Rs(r,e);case sg:return new s;case ig:case ag:return new s(r);case ng:return vl(r);case og:return new s;case lg:return Al(r)}}var Sl=vg;function wg(r){return typeof r.constructor=="function"&&!Fe(r)?la(Je(r)):{}}var Ms=wg;var Eg="[object Map]";function Ag(r){return V(r)&&Ht(r)==Eg}var Tl=Ag;var Nl=zt&&zt.isMap,Sg=Nl?$e(Nl):Tl,Cl=Sg;var Tg="[object Set]";function Ng(r){return V(r)&&Ht(r)==Tg}var Ll=Ng;var Ol=zt&&zt.isSet,Cg=Ol?$e(Ol):Ll,Il=Cg;var Lg=1,Og=2,Ig=4,_l="[object Arguments]",_g="[object Array]",qg="[object Boolean]",kg="[object Date]",Rg="[object Error]",ql="[object Function]",Mg="[object GeneratorFunction]",Bg="[object Map]",Dg="[object Number]",kl="[object Object]",jg="[object RegExp]",Pg="[object Set]",zg="[object String]",Ug="[object Symbol]",Hg="[object WeakMap]",Fg="[object ArrayBuffer]",$g="[object DataView]",Wg="[object Float32Array]",Kg="[object Float64Array]",Vg="[object Int8Array]",Gg="[object Int16Array]",Zg="[object Int32Array]",Jg="[object Uint8Array]",Qg="[object Uint8ClampedArray]",Xg="[object Uint16Array]",Yg="[object Uint32Array]",_={};_[_l]=_[_g]=_[Fg]=_[$g]=_[qg]=_[kg]=_[Wg]=_[Kg]=_[Vg]=_[Gg]=_[Zg]=_[Bg]=_[Dg]=_[kl]=_[jg]=_[Pg]=_[zg]=_[Ug]=_[Jg]=_[Qg]=_[Xg]=_[Yg]=!0;_[Rg]=_[ql]=_[Hg]=!1;function Bs(r,t,e,s,i,n){var o,a=t&Lg,l=t&Og,c=t&Ig;if(e&&(o=i?e(r,s,i,n):e(r)),o!==void 0)return o;if(!Z(r))return r;var u=vt(r);if(u){if(o=yl(r),!a)return xs(r,o)}else{var f=Ht(r),h=f==ql||f==Mg;if(Pt(r))return Cs(r,a);if(f==kl||f==_l||h&&!i){if(o=l||h?{}:Ms(r),!a)return l?fl(r,sl(o,r)):ul(r,rl(o,r))}else{if(!_[f])return i?r:{};o=Sl(r,f,a)}}n||(n=new oe);var p=n.get(r);if(p)return p;n.set(r,o),Il(r)?r.forEach(function(A){o.add(Bs(A,t,e,A,r,n))}):Cl(r)&&r.forEach(function(A,b){o.set(b,Bs(A,t,e,b,r,n))});var m=c?l?hl:Br:l?_t:Ke,x=u?void 0:m(r);return pa(x||r,function(A,b){x&&(b=A,A=r[b]),ws(o,b,Bs(A,t,e,b,r,n))}),o}var Rl=Bs;var t1=1,e1=4;function r1(r){return Rl(r,t1|e1)}var qt=r1;var s1="__lodash_hash_undefined__";function i1(r){return this.__data__.set(r,s1),this}var Ml=i1;function n1(r){return this.__data__.has(r)}var Bl=n1;function Ds(r){var t=-1,e=r==null?0:r.length;for(this.__data__=new Ts;++t<e;)this.add(r[t])}Ds.prototype.add=Ds.prototype.push=Ml;Ds.prototype.has=Bl;var Dl=Ds;function o1(r,t){for(var e=-1,s=r==null?0:r.length;++e<s;)if(t(r[e],e,r))return!0;return!1}var jl=o1;function a1(r,t){return r.has(t)}var Pl=a1;var l1=1,c1=2;function u1(r,t,e,s,i,n){var o=e&l1,a=r.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;var c=n.get(r),u=n.get(t);if(c&&u)return c==t&&u==r;var f=-1,h=!0,p=e&c1?new Dl:void 0;for(n.set(r,t),n.set(t,r);++f<a;){var m=r[f],x=t[f];if(s)var A=o?s(x,m,f,t,r,n):s(m,x,f,r,t,n);if(A!==void 0){if(A)continue;h=!1;break}if(p){if(!jl(t,function(b,T){if(!Pl(p,T)&&(m===b||i(m,b,e,s,n)))return p.push(T)})){h=!1;break}}else if(!(m===x||i(m,x,e,s,n))){h=!1;break}}return n.delete(r),n.delete(t),h}var js=u1;function f1(r){var t=-1,e=Array(r.size);return r.forEach(function(s,i){e[++t]=[i,s]}),e}var zl=f1;function h1(r){var t=-1,e=Array(r.size);return r.forEach(function(s){e[++t]=s}),e}var Ul=h1;var d1=1,p1=2,m1="[object Boolean]",g1="[object Date]",b1="[object Error]",y1="[object Map]",x1="[object Number]",v1="[object RegExp]",w1="[object Set]",E1="[object String]",A1="[object Symbol]",S1="[object ArrayBuffer]",T1="[object DataView]",Hl=xt?xt.prototype:void 0,Ui=Hl?Hl.valueOf:void 0;function N1(r,t,e,s,i,n,o){switch(e){case T1:if(r.byteLength!=t.byteLength||r.byteOffset!=t.byteOffset)return!1;r=r.buffer,t=t.buffer;case S1:return!(r.byteLength!=t.byteLength||!n(new Ye(r),new Ye(t)));case m1:case g1:case x1:return Ot(+r,+t);case b1:return r.name==t.name&&r.message==t.message;case v1:case E1:return r==t+"";case y1:var a=zl;case w1:var l=s&d1;if(a||(a=Ul),r.size!=t.size&&!l)return!1;var c=o.get(r);if(c)return c==t;s|=p1,o.set(r,t);var u=js(a(r),a(t),s,i,n,o);return o.delete(r),u;case A1:if(Ui)return Ui.call(r)==Ui.call(t)}return!1}var Fl=N1;var C1=1,L1=Object.prototype,O1=L1.hasOwnProperty;function I1(r,t,e,s,i,n){var o=e&C1,a=Br(r),l=a.length,c=Br(t),u=c.length;if(l!=u&&!o)return!1;for(var f=l;f--;){var h=a[f];if(!(o?h in t:O1.call(t,h)))return!1}var p=n.get(r),m=n.get(t);if(p&&m)return p==t&&m==r;var x=!0;n.set(r,t),n.set(t,r);for(var A=o;++f<l;){h=a[f];var b=r[h],T=t[h];if(s)var C=o?s(T,b,h,t,r,n):s(b,T,h,r,t,n);if(!(C===void 0?b===T||i(b,T,e,s,n):C)){x=!1;break}A||(A=h=="constructor")}if(x&&!A){var N=r.constructor,L=t.constructor;N!=L&&"constructor"in r&&"constructor"in t&&!(typeof N=="function"&&N instanceof N&&typeof L=="function"&&L instanceof L)&&(x=!1)}return n.delete(r),n.delete(t),x}var $l=I1;var _1=1,Wl="[object Arguments]",Kl="[object Array]",Ps="[object Object]",q1=Object.prototype,Vl=q1.hasOwnProperty;function k1(r,t,e,s,i,n){var o=vt(r),a=vt(t),l=o?Kl:Ht(r),c=a?Kl:Ht(t);l=l==Wl?Ps:l,c=c==Wl?Ps:c;var u=l==Ps,f=c==Ps,h=l==c;if(h&&Pt(r)){if(!Pt(t))return!1;o=!0,u=!1}if(h&&!u)return n||(n=new oe),o||We(r)?js(r,t,e,s,i,n):Fl(r,t,l,e,s,i,n);if(!(e&_1)){var p=u&&Vl.call(r,"__wrapped__"),m=f&&Vl.call(t,"__wrapped__");if(p||m){var x=p?r.value():r,A=m?t.value():t;return n||(n=new oe),i(x,A,e,s,n)}}return h?(n||(n=new oe),$l(r,t,e,s,i,n)):!1}var Gl=k1;function Zl(r,t,e,s,i){return r===t?!0:r==null||t==null||!V(r)&&!V(t)?r!==r&&t!==t:Gl(r,t,e,s,Zl,i)}var Jl=Zl;function R1(r){return function(t,e,s){for(var i=-1,n=Object(t),o=s(t),a=o.length;a--;){var l=o[r?a:++i];if(e(n[l],l,n)===!1)break}return t}}var Ql=R1;var M1=Ql(),Xl=M1;function B1(r,t,e){(e!==void 0&&!Ot(r[t],e)||e===void 0&&!(t in r))&&He(r,t,e)}var Dr=B1;function D1(r){return V(r)&&ee(r)}var Yl=D1;function j1(r,t){if(!(t==="constructor"&&typeof r[t]=="function")&&t!="__proto__")return r[t]}var jr=j1;function P1(r){return It(r,_t(r))}var tc=P1;function z1(r,t,e,s,i,n,o){var a=jr(r,e),l=jr(t,e),c=o.get(l);if(c){Dr(r,e,c);return}var u=n?n(a,l,e+"",r,t,o):void 0,f=u===void 0;if(f){var h=vt(l),p=!h&&Pt(l),m=!h&&!p&&We(l);u=l,h||p||m?vt(a)?u=a:Yl(a)?u=xs(a):p?(f=!1,u=Cs(l,!0)):m?(f=!1,u=Rs(l,!0)):u=[]:Ja(l)||Rr(l)?(u=a,Rr(a)?u=tc(a):(!Z(a)||ze(a))&&(u=Ms(l))):f=!1}f&&(o.set(l,u),i(u,l,s,n,o),o.delete(l)),Dr(r,e,u)}var ec=z1;function rc(r,t,e,s,i){r!==t&&Xl(t,function(n,o){if(i||(i=new oe),Z(n))ec(r,t,o,e,rc,s,i);else{var a=s?s(jr(r,o),n,o+"",r,t,i):void 0;a===void 0&&(a=n),Dr(r,o,a)}},_t)}var sc=rc;function U1(r,t){return Jl(r,t)}var Se=U1;var H1=xa(function(r,t,e){sc(r,t,e)}),lt=H1;var Ur={};bh(Ur,{Attributor:()=>st,AttributorStore:()=>Pr,BlockBlot:()=>Te,ClassAttributor:()=>H,ContainerBlot:()=>nr,EmbedBlot:()=>D,InlineBlot:()=>zs,LeafBlot:()=>F,ParentBlot:()=>ct,Registry:()=>ce,Scope:()=>y,ScrollBlot:()=>zr,StyleAttributor:()=>ut,TextBlot:()=>or});var y=(r=>(r[r.TYPE=3]="TYPE",r[r.LEVEL=12]="LEVEL",r[r.ATTRIBUTE=13]="ATTRIBUTE",r[r.BLOT=14]="BLOT",r[r.INLINE=7]="INLINE",r[r.BLOCK=11]="BLOCK",r[r.BLOCK_BLOT=10]="BLOCK_BLOT",r[r.INLINE_BLOT=6]="INLINE_BLOT",r[r.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",r[r.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",r[r.ANY=15]="ANY",r))(y||{}),st=class{constructor(t,e,s={}){this.attrName=t,this.keyName=e;let i=y.TYPE&y.ATTRIBUTE;this.scope=s.scope!=null?s.scope&y.LEVEL|i:y.ATTRIBUTE,s.whitelist!=null&&(this.whitelist=s.whitelist)}static keys(t){return Array.from(t.attributes).map(e=>e.name)}add(t,e){return this.canAdd(t,e)?(t.setAttribute(this.keyName,e),!0):!1}canAdd(t,e){return this.whitelist==null?!0:typeof e=="string"?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1}remove(t){t.removeAttribute(this.keyName)}value(t){let e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""}},le=class extends Error{constructor(t){t="[Parchment] "+t,super(t),this.message=t,this.name=this.constructor.name}},oc=class Fi{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,e=!1){if(t==null)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(e){let s=null;try{s=t.parentNode}catch{return null}return this.find(s,e)}return null}create(t,e,s){let i=this.query(e);if(i==null)throw new le(`Unable to create ${e} blot`);let n=i,o=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:n.create(s),a=new n(t,o,s);return Fi.blots.set(a.domNode,a),a}find(t,e=!1){return Fi.find(t,e)}query(t,e=y.ANY){let s;return typeof t=="string"?s=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?s=this.types.text:typeof t=="number"?t&y.LEVEL&y.BLOCK?s=this.types.block:t&y.LEVEL&y.INLINE&&(s=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some(i=>(s=this.classes[i],!!s)),s=s||this.tags[t.tagName]),s==null?null:"scope"in s&&e&y.LEVEL&s.scope&&e&y.TYPE&s.scope?s:null}register(...t){return t.map(e=>{let s="blotName"in e,i="attrName"in e;if(!s&&!i)throw new le("Invalid definition");if(s&&e.blotName==="abstract")throw new le("Cannot register abstract class");let n=s?e.blotName:i?e.attrName:void 0;return this.types[n]=e,i?typeof e.keyName=="string"&&(this.attributes[e.keyName]=e):s&&(e.className&&(this.classes[e.className]=e),e.tagName&&(Array.isArray(e.tagName)?e.tagName=e.tagName.map(o=>o.toUpperCase()):e.tagName=e.tagName.toUpperCase(),(Array.isArray(e.tagName)?e.tagName:[e.tagName]).forEach(o=>{(this.tags[o]==null||e.className==null)&&(this.tags[o]=e)}))),e})}};oc.blots=new WeakMap;var ce=oc;function ic(r,t){return(r.getAttribute("class")||"").split(/\s+/).filter(e=>e.indexOf(`${t}-`)===0)}var $i=class extends st{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map(e=>e.split("-").slice(0,-1).join("-"))}add(t,e){return this.canAdd(t,e)?(this.remove(t),t.classList.add(`${this.keyName}-${e}`),!0):!1}remove(t){ic(t,this.keyName).forEach(e=>{t.classList.remove(e)}),t.classList.length===0&&t.removeAttribute("class")}value(t){let e=(ic(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""}},H=$i;function Hi(r){let t=r.split("-"),e=t.slice(1).map(s=>s[0].toUpperCase()+s.slice(1)).join("");return t[0]+e}var Wi=class extends st{static keys(t){return(t.getAttribute("style")||"").split(";").map(e=>e.split(":")[0].trim())}add(t,e){return this.canAdd(t,e)?(t.style[Hi(this.keyName)]=e,!0):!1}remove(t){t.style[Hi(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){let e=t.style[Hi(this.keyName)];return this.canAdd(t,e)?e:""}},ut=Wi,Ki=class{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,e){e?t.add(this.domNode,e)&&(t.value(this.domNode)!=null?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};let t=ce.find(this.domNode);if(t==null)return;let e=st.keys(this.domNode),s=H.keys(this.domNode),i=ut.keys(this.domNode);e.concat(s).concat(i).forEach(n=>{let o=t.scroll.query(n,y.ATTRIBUTE);o instanceof st&&(this.attributes[o.attrName]=o)})}copy(t){Object.keys(this.attributes).forEach(e=>{let s=this.attributes[e].value(this.domNode);t.format(e,s)})}move(t){this.copy(t),Object.keys(this.attributes).forEach(e=>{this.attributes[e].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((t,e)=>(t[e]=this.attributes[e].value(this.domNode),t),{})}},Pr=Ki,ac=class{constructor(t,e){this.scroll=t,this.domNode=e,ce.blots.set(e,this),this.prev=null,this.next=null}static create(t){if(this.tagName==null)throw new le("Blot definition missing tagName");let e,s;return Array.isArray(this.tagName)?(typeof t=="string"?(s=t.toUpperCase(),parseInt(s,10).toString()===s&&(s=parseInt(s,10))):typeof t=="number"&&(s=t),typeof s=="number"?e=document.createElement(this.tagName[s-1]):s&&this.tagName.indexOf(s)>-1?e=document.createElement(s):e=document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){let t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){this.parent!=null&&this.parent.removeChild(this),ce.blots.delete(this.domNode)}deleteAt(t,e){this.isolate(t,e).remove()}formatAt(t,e,s,i){let n=this.isolate(t,e);if(this.scroll.query(s,y.BLOT)!=null&&i)n.wrap(s,i);else if(this.scroll.query(s,y.ATTRIBUTE)!=null){let o=this.scroll.create(this.statics.scope);n.wrap(o),o.format(s,i)}}insertAt(t,e,s){let i=s==null?this.scroll.create("text",e):this.scroll.create(e,s),n=this.split(t);this.parent.insertBefore(i,n||void 0)}isolate(t,e){let s=this.split(t);if(s==null)throw new Error("Attempt to isolate at end");return s.split(e),s}length(){return 1}offset(t=this.parent){return this.parent==null||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,e){let s=typeof t=="string"?this.scroll.create(t,e):t;return this.parent!=null&&(this.parent.insertBefore(s,this.next||void 0),this.remove()),s}split(t,e){return t===0?this:this.next}update(t,e){}wrap(t,e){let s=typeof t=="string"?this.scroll.create(t,e):t;if(this.parent!=null&&this.parent.insertBefore(s,this.next||void 0),typeof s.appendChild!="function")throw new le(`Cannot wrap ${t}`);return s.appendChild(this),s}};ac.blotName="abstract";var lc=ac,cc=class extends lc{static value(t){return!0}index(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(t,e){let s=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(s+=1),[this.parent.domNode,s]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};cc.scope=y.INLINE_BLOT;var F1=cc,F=F1,Vi=class{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){let e=t.slice(1);this.append(...e)}}at(t){let e=this.iterator(),s=e();for(;s&&t>0;)t-=1,s=e();return s}contains(t){let e=this.iterator(),s=e();for(;s;){if(s===t)return!0;s=e()}return!1}indexOf(t){let e=this.iterator(),s=e(),i=0;for(;s;){if(s===t)return i;i+=1,s=e()}return-1}insertBefore(t,e){t!=null&&(this.remove(t),t.next=e,e!=null?(t.prev=e.prev,e.prev!=null&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):this.tail!=null?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let e=0,s=this.head;for(;s!=null;){if(s===t)return e;e+=s.length(),s=s.next}return-1}remove(t){this.contains(t)&&(t.prev!=null&&(t.prev.next=t.next),t.next!=null&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{let e=t;return t!=null&&(t=t.next),e}}find(t,e=!1){let s=this.iterator(),i=s();for(;i;){let n=i.length();if(t<n||e&&t===n&&(i.next==null||i.next.length()!==0))return[i,t];t-=n,i=s()}return[null,0]}forEach(t){let e=this.iterator(),s=e();for(;s;)t(s),s=e()}forEachAt(t,e,s){if(e<=0)return;let[i,n]=this.find(t),o=t-n,a=this.iterator(i),l=a();for(;l&&o<t+e;){let c=l.length();t>o?s(l,t-o,Math.min(e,o+c-t)):s(l,0,Math.min(c,t+e-o)),o+=c,l=a()}}map(t){return this.reduce((e,s)=>(e.push(t(s)),e),[])}reduce(t,e){let s=this.iterator(),i=s();for(;i;)e=t(e,i),i=s();return e}};function nc(r,t){let e=t.find(r);if(e)return e;try{return t.create(r)}catch{let s=t.create(y.INLINE);return Array.from(r.childNodes).forEach(i=>{s.domNode.appendChild(i)}),r.parentNode&&r.parentNode.replaceChild(s.domNode,r),s.attach(),s}}var uc=class ae extends lc{constructor(t,e){super(t,e),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach(t=>{t.attach()})}attachUI(t){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=t,ae.uiClass&&this.uiNode.classList.add(ae.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new Vi,Array.from(this.domNode.childNodes).filter(t=>t!==this.uiNode).reverse().forEach(t=>{try{let e=nc(t,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(e){if(e instanceof le)return;throw e}})}deleteAt(t,e){if(t===0&&e===this.length())return this.remove();this.children.forEachAt(t,e,(s,i,n)=>{s.deleteAt(i,n)})}descendant(t,e=0){let[s,i]=this.children.find(e);return t.blotName==null&&t(s)||t.blotName!=null&&s instanceof t?[s,i]:s instanceof ae?s.descendant(t,i):[null,-1]}descendants(t,e=0,s=Number.MAX_VALUE){let i=[],n=s;return this.children.forEachAt(e,s,(o,a,l)=>{(t.blotName==null&&t(o)||t.blotName!=null&&o instanceof t)&&i.push(o),o instanceof ae&&(i=i.concat(o.descendants(t,a,n))),n-=l}),i}detach(){this.children.forEach(t=>{t.detach()}),super.detach()}enforceAllowedChildren(){let t=!1;this.children.forEach(e=>{t||this.statics.allowedChildren.some(s=>e instanceof s)||(e.statics.scope===y.BLOCK_BLOT?(e.next!=null&&this.splitAfter(e),e.prev!=null&&this.splitAfter(e.prev),e.parent.unwrap(),t=!0):e instanceof ae?e.unwrap():e.remove())})}formatAt(t,e,s,i){this.children.forEachAt(t,e,(n,o,a)=>{n.formatAt(o,a,s,i)})}insertAt(t,e,s){let[i,n]=this.children.find(t);if(i)i.insertAt(n,e,s);else{let o=s==null?this.scroll.create("text",e):this.scroll.create(e,s);this.appendChild(o)}}insertBefore(t,e){t.parent!=null&&t.parent.children.remove(t);let s=null;this.children.insertBefore(t,e||null),t.parent=this,e!=null&&(s=e.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==s)&&this.domNode.insertBefore(t.domNode,s),t.attach()}length(){return this.children.reduce((t,e)=>t+e.length(),0)}moveChildren(t,e){this.children.forEach(s=>{t.insertBefore(s,e)})}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){let e=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(e)}else this.remove()}path(t,e=!1){let[s,i]=this.children.find(t,e),n=[[this,t]];return s instanceof ae?n.concat(s.path(i,e)):(s!=null&&n.push([s,i]),n)}removeChild(t){this.children.remove(t)}replaceWith(t,e){let s=typeof t=="string"?this.scroll.create(t,e):t;return s instanceof ae&&this.moveChildren(s),super.replaceWith(s)}split(t,e=!1){if(!e){if(t===0)return this;if(t===this.length())return this.next}let s=this.clone();return this.parent&&this.parent.insertBefore(s,this.next||void 0),this.children.forEachAt(t,this.length(),(i,n,o)=>{let a=i.split(n,e);a!=null&&s.appendChild(a)}),s}splitAfter(t){let e=this.clone();for(;t.next!=null;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,e){let s=[],i=[];t.forEach(n=>{n.target===this.domNode&&n.type==="childList"&&(s.push(...n.addedNodes),i.push(...n.removedNodes))}),i.forEach(n=>{if(n.parentNode!=null&&n.tagName!=="IFRAME"&&document.body.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;let o=this.scroll.find(n);o!=null&&(o.domNode.parentNode==null||o.domNode.parentNode===this.domNode)&&o.detach()}),s.filter(n=>n.parentNode===this.domNode&&n!==this.uiNode).sort((n,o)=>n===o?0:n.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(n=>{let o=null;n.nextSibling!=null&&(o=this.scroll.find(n.nextSibling));let a=nc(n,this.scroll);(a.next!==o||a.next==null)&&(a.parent!=null&&a.parent.removeChild(this),this.insertBefore(a,o||void 0))}),this.enforceAllowedChildren()}};uc.uiClass="";var $1=uc,ct=$1;function W1(r,t){if(Object.keys(r).length!==Object.keys(t).length)return!1;for(let e in r)if(r[e]!==t[e])return!1;return!0}var er=class rr extends ct{static create(t){return super.create(t)}static formats(t,e){let s=e.query(rr.blotName);if(!(s!=null&&t.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new Pr(this.domNode)}format(t,e){if(t===this.statics.blotName&&!e)this.children.forEach(s=>{s instanceof rr||(s=s.wrap(rr.blotName,!0)),this.attributes.copy(s)}),this.unwrap();else{let s=this.scroll.query(t,y.INLINE);if(s==null)return;s instanceof st?this.attributes.attribute(s,e):e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e)}}formats(){let t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(t[this.statics.blotName]=e),t}formatAt(t,e,s,i){this.formats()[s]!=null||this.scroll.query(s,y.ATTRIBUTE)?this.isolate(t,e).format(s,i):super.formatAt(t,e,s,i)}optimize(t){super.optimize(t);let e=this.formats();if(Object.keys(e).length===0)return this.unwrap();let s=this.next;s instanceof rr&&s.prev===this&&W1(e,s.formats())&&(s.moveChildren(this),s.remove())}replaceWith(t,e){let s=super.replaceWith(t,e);return this.attributes.copy(s),s}update(t,e){super.update(t,e),t.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}wrap(t,e){let s=super.wrap(t,e);return s instanceof rr&&this.attributes.move(s),s}};er.allowedChildren=[er,F],er.blotName="inline",er.scope=y.INLINE_BLOT,er.tagName="SPAN";var K1=er,zs=K1,sr=class Gi extends ct{static create(t){return super.create(t)}static formats(t,e){let s=e.query(Gi.blotName);if(!(s!=null&&t.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new Pr(this.domNode)}format(t,e){let s=this.scroll.query(t,y.BLOCK);s!=null&&(s instanceof st?this.attributes.attribute(s,e):t===this.statics.blotName&&!e?this.replaceWith(Gi.blotName):e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e))}formats(){let t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(t[this.statics.blotName]=e),t}formatAt(t,e,s,i){this.scroll.query(s,y.BLOCK)!=null?this.format(s,i):super.formatAt(t,e,s,i)}insertAt(t,e,s){if(s==null||this.scroll.query(e,y.INLINE)!=null)super.insertAt(t,e,s);else{let i=this.split(t);if(i!=null){let n=this.scroll.create(e,s);i.parent.insertBefore(n,i)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(t,e){let s=super.replaceWith(t,e);return this.attributes.copy(s),s}update(t,e){super.update(t,e),t.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}};sr.blotName="block",sr.scope=y.BLOCK_BLOT,sr.tagName="P",sr.allowedChildren=[zs,sr,F];var V1=sr,Te=V1,Zi=class extends ct{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,e){super.deleteAt(t,e),this.enforceAllowedChildren()}formatAt(t,e,s,i){super.formatAt(t,e,s,i),this.enforceAllowedChildren()}insertAt(t,e,s){super.insertAt(t,e,s),this.enforceAllowedChildren()}optimize(t){super.optimize(t),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Zi.blotName="container",Zi.scope=y.BLOCK_BLOT;var G1=Zi,nr=G1,Ji=class extends F{static formats(t,e){}format(t,e){super.formatAt(0,this.length(),t,e)}formatAt(t,e,s,i){t===0&&e===this.length()?this.format(s,i):super.formatAt(t,e,s,i)}formats(){return this.statics.formats(this.domNode,this.scroll)}},D=Ji,Z1={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},J1=100,ir=class extends ct{constructor(t,e){super(null,e),this.registry=t,this.scroll=this,this.build(),this.observer=new MutationObserver(s=>{this.update(s)}),this.observer.observe(this.domNode,Z1),this.attach()}create(t,e){return this.registry.create(this,t,e)}find(t,e=!1){let s=this.registry.find(t,e);return s?s.scroll===this?s:e?this.find(s.scroll.domNode.parentNode,!0):null:null}query(t,e=y.ANY){return this.registry.query(t,e)}register(...t){return this.registry.register(...t)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,e){this.update(),t===0&&e===this.length()?this.children.forEach(s=>{s.remove()}):super.deleteAt(t,e)}formatAt(t,e,s,i){this.update(),super.formatAt(t,e,s,i)}insertAt(t,e,s){this.update(),super.insertAt(t,e,s)}optimize(t=[],e={}){super.optimize(e);let s=e.mutationsMap||new WeakMap,i=Array.from(this.observer.takeRecords());for(;i.length>0;)t.push(i.pop());let n=(l,c=!0)=>{l==null||l===this||l.domNode.parentNode!=null&&(s.has(l.domNode)||s.set(l.domNode,[]),c&&n(l.parent))},o=l=>{s.has(l.domNode)&&(l instanceof ct&&l.children.forEach(o),s.delete(l.domNode),l.optimize(e))},a=t;for(let l=0;a.length>0;l+=1){if(l>=J1)throw new Error("[Parchment] Maximum optimize iterations reached");for(a.forEach(c=>{let u=this.find(c.target,!0);u!=null&&(u.domNode===c.target&&(c.type==="childList"?(n(this.find(c.previousSibling,!1)),Array.from(c.addedNodes).forEach(f=>{let h=this.find(f,!1);n(h,!1),h instanceof ct&&h.children.forEach(p=>{n(p,!1)})})):c.type==="attributes"&&n(u.prev)),n(u))}),this.children.forEach(o),a=Array.from(this.observer.takeRecords()),i=a.slice();i.length>0;)t.push(i.pop())}}update(t,e={}){t=t||this.observer.takeRecords();let s=new WeakMap;t.map(i=>{let n=this.find(i.target,!0);return n==null?null:s.has(n.domNode)?(s.get(n.domNode).push(i),null):(s.set(n.domNode,[i]),n)}).forEach(i=>{i!=null&&i!==this&&s.has(i.domNode)&&i.update(s.get(i.domNode)||[],e)}),e.mutationsMap=s,s.has(this.domNode)&&super.update(s.get(this.domNode),e),this.optimize(t,e)}};ir.blotName="scroll",ir.defaultChild=Te,ir.allowedChildren=[Te,nr],ir.scope=y.BLOCK_BLOT,ir.tagName="DIV";var Q1=ir,zr=Q1,Qi=class fc extends F{static create(t){return document.createTextNode(t)}static value(t){return t.data}constructor(t,e){super(t,e),this.text=this.statics.value(this.domNode)}deleteAt(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)}index(t,e){return this.domNode===t?e:-1}insertAt(t,e,s){s==null?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,e,s)}length(){return this.text.length}optimize(t){super.optimize(t),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof fc&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,e=!1){return[this.domNode,t]}split(t,e=!1){if(!e){if(t===0)return this;if(t===this.length())return this.next}let s=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(s,this.next||void 0),this.text=this.statics.value(this.domNode),s}update(t,e){t.some(s=>s.type==="characterData"&&s.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Qi.blotName="text",Qi.scope=y.INLINE_BLOT;var X1=Qi,or=X1;var pe=rt(ft(),1);var j=rt(ft(),1);var jn=rt(ft(),1);var Qr=class extends D{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}};Qr.blotName="break";Qr.tagName="BR";var J=Qr;var z=class extends or{},mx={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Re(r){return r.replace(/[&<>"']/g,t=>mx[t])}var Dn=class r extends zs{static allowedChildren=[r,J,D,z];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(t,e){let s=r.order.indexOf(t),i=r.order.indexOf(e);return s>=0||i>=0?s-i:t===e?0:t<e?-1:1}formatAt(t,e,s,i){if(r.compare(this.statics.blotName,s)<0&&this.scroll.query(s,y.BLOT)){let n=this.isolate(t,e);i&&n.wrap(s,i)}else super.formatAt(t,e,s,i)}optimize(t){if(super.optimize(t),this.parent instanceof r&&r.compare(this.statics.blotName,this.parent.statics.blotName)>0){let e=this.parent.isolate(this.offset(),this.length());this.moveChildren(e),e.wrap(this)}}},Q=Dn;var Gu=1,I=class extends Te{cache={};delta(){return this.cache.delta==null&&(this.cache.delta=Pn(this)),this.cache.delta}deleteAt(t,e){super.deleteAt(t,e),this.cache={}}formatAt(t,e,s,i){e<=0||(this.scroll.query(s,y.BLOCK)?t+e===this.length()&&this.format(s,i):super.formatAt(t,Math.min(e,this.length()-t-1),s,i),this.cache={})}insertAt(t,e,s){if(s!=null){super.insertAt(t,e,s),this.cache={};return}if(e.length===0)return;let i=e.split(`
`),n=i.shift();n.length>0&&(t<this.length()-1||this.children.tail==null?super.insertAt(Math.min(t,this.length()-1),n):this.children.tail.insertAt(this.children.tail.length(),n),this.cache={});let o=this;i.reduce((a,l)=>(o=o.split(a,!0),o.insertAt(0,l),l.length),t+n.length)}insertBefore(t,e){let{head:s}=this.children;super.insertBefore(t,e),s instanceof J&&s.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+Gu),this.cache.length}moveChildren(t,e){super.moveChildren(t,e),this.cache={}}optimize(t){super.optimize(t),this.cache={}}path(t){return super.path(t,!0)}removeChild(t){super.removeChild(t),this.cache={}}split(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e&&(t===0||t>=this.length()-Gu)){let i=this.clone();return t===0?(this.parent.insertBefore(i,this),this):(this.parent.insertBefore(i,this.next),i)}let s=super.split(t,e);return this.cache={},s}};I.blotName="block";I.tagName="P";I.defaultChild=J;I.allowedChildren=[J,Q,D,z];var K=class extends D{attach(){super.attach(),this.attributes=new Pr(this.domNode)}delta(){return new jn.default().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(t,e){let s=this.scroll.query(t,y.BLOCK_ATTRIBUTE);s!=null&&this.attributes.attribute(s,e)}formatAt(t,e,s,i){this.format(s,i)}insertAt(t,e,s){if(s!=null){super.insertAt(t,e,s);return}let i=e.split(`
`),n=i.pop(),o=i.map(l=>{let c=this.scroll.create(I.blotName);return c.insertAt(0,l),c}),a=this.split(t);o.forEach(l=>{this.parent.insertBefore(l,a)}),n&&this.parent.insertBefore(this.scroll.create("text",n),a)}};K.scope=y.BLOCK_BLOT;function Pn(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return r.descendants(F).reduce((e,s)=>s.length()===0?e:e.insert(s.value(),ht(s,{},t)),new jn.default).insert(`
`,ht(r))}function ht(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return r==null||("formats"in r&&typeof r.formats=="function"&&(t={...t,...r.formats()},e&&delete t["code-token"]),r.parent==null||r.parent.statics.blotName==="scroll"||r.parent.statics.scope!==r.statics.scope)?t:ht(r.parent,t,e)}var zn=class r extends D{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(t,e,s){super(t,e),this.selection=s,this.textNode=document.createTextNode(r.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(t,e){if(this.savedLength!==0){super.format(t,e);return}let s=this,i=0;for(;s!=null&&s.statics.scope!==y.BLOCK_BLOT;)i+=s.offset(s.parent),s=s.parent;s!=null&&(this.savedLength=r.CONTENTS.length,s.optimize(),s.formatAt(i,r.CONTENTS.length,t,e),this.savedLength=0)}index(t,e){return t===this.textNode?0:super.index(t,e)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;let t=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);let e=this.prev instanceof z?this.prev:null,s=e?e.length():0,i=this.next instanceof z?this.next:null,n=i?i.text:"",{textNode:o}=this,a=o.data.split(r.CONTENTS).join("");o.data=r.CONTENTS;let l;if(e)l=e,(a||i)&&(e.insertAt(e.length(),a+n),i&&i.remove());else if(i)l=i,i.insertAt(0,a);else{let c=document.createTextNode(a);l=this.scroll.create(c),this.parent.insertBefore(l,this)}if(this.remove(),t){let c=(h,p)=>e&&h===e.domNode?p:h===o?s+p-1:i&&h===i.domNode?s+a.length+p:null,u=c(t.start.node,t.start.offset),f=c(t.end.node,t.end.offset);if(u!==null&&f!==null)return{startNode:l.domNode,startOffset:u,endNode:l.domNode,endOffset:f}}return null}update(t,e){if(t.some(s=>s.type==="characterData"&&s.target===this.textNode)){let s=this.restore();s&&(e.range=s)}}optimize(t){super.optimize(t);let{parent:e}=this;for(;e;){if(e.domNode.tagName==="A"){this.savedLength=r.CONTENTS.length,e.isolate(this.offset(e),this.length()).unwrap(),this.savedLength=0;break}e=e.parent}}value(){return""}},de=zn;var Hn=rt(Ju(),1);var Yr=new WeakMap;var Fn=["error","warn","log","info"],$n="warn";function Qu(r){if($n&&Fn.indexOf(r)<=Fn.indexOf($n)){for(var t=arguments.length,e=new Array(t>1?t-1:0),s=1;s<t;s++)e[s-1]=arguments[s];console[r](...e)}}function Wn(r){return Fn.reduce((t,e)=>(t[e]=Qu.bind(console,e,r),t),{})}Wn.level=r=>{$n=r};Qu.level=Wn.level;var yt=Wn;var Kn=yt("quill:events"),yx=["selectionchange","mousedown","mouseup","click"];yx.forEach(r=>{document.addEventListener(r,function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];Array.from(document.querySelectorAll(".ql-container")).forEach(i=>{let n=Yr.get(i);n&&n.emitter&&n.emitter.handleDOM(...e)})})});var Vn=class extends Hn.default{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",Kn.error)}emit(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return Kn.log.call(Kn,...e),super.emit(...e)}handleDOM(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),i=1;i<e;i++)s[i-1]=arguments[i];(this.domListeners[t.type]||[]).forEach(n=>{let{node:o,handler:a}=n;(t.target===o||o.contains(t.target))&&a(t,...s)})}listenDOM(t,e,s){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:e,handler:s})}},v=Vn;var Gn=yt("quill:selection"),ot=class{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=t,this.length=e}},Jn=class{constructor(t,e){this.emitter=e,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new ot(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,v.sources.USER),1)}),this.emitter.on(v.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;let s=this.getNativeRange();s!=null&&s.start.node!==this.cursor.textNode&&this.emitter.once(v.events.SCROLL_UPDATE,(i,n)=>{try{this.root.contains(s.start.node)&&this.root.contains(s.end.node)&&this.setNativeRange(s.start.node,s.start.offset,s.end.node,s.end.offset);let o=n.some(a=>a.type==="characterData"||a.type==="childList"||a.type==="attributes"&&a.target===this.root);this.update(o?v.sources.SILENT:i)}catch{}})}),this.emitter.on(v.events.SCROLL_OPTIMIZE,(s,i)=>{if(i.range){let{startNode:n,startOffset:o,endNode:a,endOffset:l}=i.range;this.setNativeRange(n,o,a,l),this.update(v.sources.SILENT)}}),this.update(v.sources.SILENT)}handleComposition(){this.emitter.on(v.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(v.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){let t=this.cursor.restore();if(!t)return;setTimeout(()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(v.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(t,e){this.scroll.update();let s=this.getNativeRange();if(!(s==null||!s.native.collapsed||this.scroll.query(t,y.BLOCK))){if(s.start.node!==this.cursor.textNode){let i=this.scroll.find(s.start.node,!1);if(i==null)return;if(i instanceof F){let n=i.split(s.start.offset);i.parent.insertBefore(this.cursor,n)}else i.insertBefore(this.cursor,s.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=this.scroll.length();t=Math.min(t,s-1),e=Math.min(t+e,s-1)-t;let i,[n,o]=this.scroll.leaf(t);if(n==null)return null;if(e>0&&o===n.length()){let[u]=this.scroll.leaf(t+1);if(u){let[f]=this.scroll.line(t),[h]=this.scroll.line(t+1);f===h&&(n=u,o=0)}}[i,o]=n.position(o,!0);let a=document.createRange();if(e>0)return a.setStart(i,o),[n,o]=this.scroll.leaf(t+e),n==null?null:([i,o]=n.position(o,!0),a.setEnd(i,o),a.getBoundingClientRect());let l="left",c;if(i instanceof Text){if(!i.data.length)return null;o<i.data.length?(a.setStart(i,o),a.setEnd(i,o+1)):(a.setStart(i,o-1),a.setEnd(i,o),l="right"),c=a.getBoundingClientRect()}else{if(!(n.domNode instanceof Element))return null;c=n.domNode.getBoundingClientRect(),o>0&&(l="right")}return{bottom:c.top+c.height,height:c.height,left:c[l],right:c[l],top:c.top,width:0}}getNativeRange(){let t=document.getSelection();if(t==null||t.rangeCount<=0)return null;let e=t.getRangeAt(0);if(e==null)return null;let s=this.normalizeNative(e);return Gn.info("getNativeRange",s),s}getRange(){let t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];let e=this.getNativeRange();return e==null?[null,null]:[this.normalizedToRange(e),e]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&Zn(this.root,document.activeElement)}normalizedToRange(t){let e=[[t.start.node,t.start.offset]];t.native.collapsed||e.push([t.end.node,t.end.offset]);let s=e.map(o=>{let[a,l]=o,c=this.scroll.find(a,!0),u=c.offset(this.scroll);return l===0?u:c instanceof F?u+c.index(a,l):u+c.length()}),i=Math.min(Math.max(...s),this.scroll.length()-1),n=Math.min(i,...s);return new ot(n,i-n)}normalizeNative(t){if(!Zn(this.root,t.startContainer)||!t.collapsed&&!Zn(this.root,t.endContainer))return null;let e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach(s=>{let{node:i,offset:n}=s;for(;!(i instanceof Text)&&i.childNodes.length>0;)if(i.childNodes.length>n)i=i.childNodes[n],n=0;else if(i.childNodes.length===n)i=i.lastChild,i instanceof Text?n=i.data.length:i.childNodes.length>0?n=i.childNodes.length:n=i.childNodes.length+1;else break;s.node=i,s.offset=n}),e}rangeToNative(t){let e=this.scroll.length(),s=(i,n)=>{i=Math.min(e-1,i);let[o,a]=this.scroll.leaf(i);return o?o.position(a,n):[null,-1]};return[...s(t.index,!1),...s(t.index+t.length,!0)]}setNativeRange(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e,n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Gn.info("setNativeRange",t,e,s,i),t!=null&&(this.root.parentNode==null||t.parentNode==null||s.parentNode==null))return;let o=document.getSelection();if(o!=null)if(t!=null){this.hasFocus()||this.root.focus({preventScroll:!0});let{native:a}=this.getNativeRange()||{};if(a==null||n||t!==a.startContainer||e!==a.startOffset||s!==a.endContainer||i!==a.endOffset){t instanceof Element&&t.tagName==="BR"&&(e=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),s instanceof Element&&s.tagName==="BR"&&(i=Array.from(s.parentNode.childNodes).indexOf(s),s=s.parentNode);let l=document.createRange();l.setStart(t,e),l.setEnd(s,i),o.removeAllRanges(),o.addRange(l)}}else o.removeAllRanges(),this.root.blur()}setRange(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.sources.API;if(typeof e=="string"&&(s=e,e=!1),Gn.info("setRange",t),t!=null){let i=this.rangeToNative(t);this.setNativeRange(...i,e)}else this.setNativeRange(null);this.update(s)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v.sources.USER,e=this.lastRange,[s,i]=this.getRange();if(this.lastRange=s,this.lastNative=i,this.lastRange!=null&&(this.savedRange=this.lastRange),!Se(e,this.lastRange)){if(!this.composing&&i!=null&&i.native.collapsed&&i.start.node!==this.cursor.textNode){let o=this.cursor.restore();o&&this.setNativeRange(o.startNode,o.startOffset,o.endNode,o.endOffset)}let n=[v.events.SELECTION_CHANGE,qt(this.lastRange),qt(e),t];this.emitter.emit(v.events.EDITOR_CHANGE,...n),t!==v.sources.SILENT&&this.emitter.emit(...n)}}};function Zn(r,t){try{t.parentNode}catch{return!1}return r.contains(t)}var Xu=Jn;var xx=/^[ -~]*$/,Xn=class{constructor(t){this.scroll=t,this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let e=this.scroll.length();this.scroll.batchStart();let s=Yu(t),i=new j.default;return wx(s.ops.slice()).reduce((o,a)=>{let l=j.Op.length(a),c=a.attributes||{},u=!1,f=!1;if(a.insert!=null){if(i.retain(l),typeof a.insert=="string"){let m=a.insert;f=!m.endsWith(`
`)&&(e<=o||!!this.scroll.descendant(K,o)[0]),this.scroll.insertAt(o,m);let[x,A]=this.scroll.line(o),b=lt({},ht(x));if(x instanceof I){let[T]=x.descendant(F,A);T&&(b=lt(b,ht(T)))}c=j.AttributeMap.diff(b,c)||{}}else if(typeof a.insert=="object"){let m=Object.keys(a.insert)[0];if(m==null)return o;let x=this.scroll.query(m,y.INLINE)!=null;if(x)(e<=o||this.scroll.descendant(K,o)[0])&&(f=!0);else if(o>0){let[A,b]=this.scroll.descendant(F,o-1);A instanceof z?A.value()[b]!==`
`&&(u=!0):A instanceof D&&A.statics.scope===y.INLINE_BLOT&&(u=!0)}if(this.scroll.insertAt(o,m,a.insert[m]),x){let[A]=this.scroll.descendant(F,o);if(A){let b=lt({},ht(A));c=j.AttributeMap.diff(b,c)||{}}}}e+=l}else if(i.push(a),a.retain!==null&&typeof a.retain=="object"){let m=Object.keys(a.retain)[0];if(m==null)return o;this.scroll.updateEmbedAt(o,m,a.retain[m])}Object.keys(c).forEach(m=>{this.scroll.formatAt(o,l,m,c[m])});let h=u?1:0,p=f?1:0;return e+=h+p,i.retain(h),i.delete(p),o+l+h+p},0),i.reduce((o,a)=>typeof a.delete=="number"?(this.scroll.deleteAt(o,a.delete),o):o+j.Op.length(a),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(s)}deleteText(t,e){return this.scroll.deleteAt(t,e),this.update(new j.default().retain(t).delete(e))}formatLine(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(s).forEach(n=>{this.scroll.lines(t,Math.max(e,1)).forEach(o=>{o.format(n,s[n])})}),this.scroll.optimize();let i=new j.default().retain(t).retain(e,qt(s));return this.update(i)}formatText(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(s).forEach(n=>{this.scroll.formatAt(t,e,n,s[n])});let i=new j.default().retain(t).retain(e,qt(s));return this.update(i)}getContents(t,e){return this.delta.slice(t,t+e)}getDelta(){return this.scroll.lines().reduce((t,e)=>t.concat(e.delta()),new j.default)}getFormat(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=[],i=[];e===0?this.scroll.path(t).forEach(a=>{let[l]=a;l instanceof I?s.push(l):l instanceof F&&i.push(l)}):(s=this.scroll.lines(t,e),i=this.scroll.descendants(F,t,e));let[n,o]=[s,i].map(a=>{let l=a.shift();if(l==null)return{};let c=ht(l);for(;Object.keys(c).length>0;){let u=a.shift();if(u==null)return c;c=vx(ht(u),c)}return c});return{...n,...o}}getHTML(t,e){let[s,i]=this.scroll.line(t);if(s){let n=s.length();return s.length()>=i+e&&!(i===0&&e===n)?ts(s,i,e,!0):ts(this.scroll,t,e,!0)}return""}getText(t,e){return this.getContents(t,e).filter(s=>typeof s.insert=="string").map(s=>s.insert).join("")}insertContents(t,e){let s=Yu(e),i=new j.default().retain(t).concat(s);return this.scroll.insertContents(t,s),this.update(i)}insertEmbed(t,e,s){return this.scroll.insertAt(t,e,s),this.update(new j.default().retain(t).insert({[e]:s}))}insertText(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(t,e),Object.keys(s).forEach(i=>{this.scroll.formatAt(t,e.length,i,s[i])}),this.update(new j.default().retain(t).insert(e,qt(s)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;let t=this.scroll.children.head;if(t?.statics.blotName!==I.blotName)return!1;let e=t;return e.children.length>1?!1:e.children.head instanceof J}removeFormat(t,e){let s=this.getText(t,e),[i,n]=this.scroll.line(t+e),o=0,a=new j.default;i!=null&&(o=i.length()-n,a=i.delta().slice(n,n+o-1).insert(`
`));let c=this.getContents(t,e+o).diff(new j.default().insert(s).concat(a)),u=new j.default().retain(t).concat(c);return this.applyDelta(u)}update(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,i=this.delta;if(e.length===1&&e[0].type==="characterData"&&e[0].target.data.match(xx)&&this.scroll.find(e[0].target)){let n=this.scroll.find(e[0].target),o=ht(n),a=n.offset(this.scroll),l=e[0].oldValue.replace(de.CONTENTS,""),c=new j.default().insert(l),u=new j.default().insert(n.value()),f=s&&{oldRange:tf(s.oldRange,-a),newRange:tf(s.newRange,-a)};t=new j.default().retain(a).concat(c.diff(u,f)).reduce((p,m)=>m.insert?p.insert(m.insert,o):p.push(m),new j.default),this.delta=i.compose(t)}else this.delta=this.getDelta(),(!t||!Se(i.compose(t),this.delta))&&(t=i.diff(this.delta,s));return t}};function pr(r,t,e){if(r.length===0){let[p]=Qn(e.pop());return t<=0?`</li></${p}>`:`</li></${p}>${pr([],t-1,e)}`}let[{child:s,offset:i,length:n,indent:o,type:a},...l]=r,[c,u]=Qn(a);if(o>t)return e.push(a),o===t+1?`<${c}><li${u}>${ts(s,i,n)}${pr(l,o,e)}`:`<${c}><li>${pr(r,t+1,e)}`;let f=e[e.length-1];if(o===t&&a===f)return`</li><li${u}>${ts(s,i,n)}${pr(l,o,e)}`;let[h]=Qn(e.pop());return`</li></${h}>${pr(r,t-1,e)}`}function ts(r,t,e){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in r&&typeof r.html=="function")return r.html(t,e);if(r instanceof z)return Re(r.value().slice(t,t+e)).replaceAll(" ","&nbsp;");if(r instanceof ct){if(r.statics.blotName==="list-container"){let c=[];return r.children.forEachAt(t,e,(u,f,h)=>{let p="formats"in u&&typeof u.formats=="function"?u.formats():{};c.push({child:u,offset:f,length:h,indent:p.indent||0,type:p.list})}),pr(c,-1,[])}let i=[];if(r.children.forEachAt(t,e,(c,u,f)=>{i.push(ts(c,u,f))}),s||r.statics.blotName==="list")return i.join("");let{outerHTML:n,innerHTML:o}=r.domNode,[a,l]=n.split(`>${o}<`);return a==="<table"?`<table style="border: 1px solid #000;">${i.join("")}<${l}`:`${a}>${i.join("")}<${l}`}return r.domNode instanceof Element?r.domNode.outerHTML:""}function vx(r,t){return Object.keys(t).reduce((e,s)=>{if(r[s]==null)return e;let i=t[s];return i===r[s]?e[s]=i:Array.isArray(i)?i.indexOf(r[s])<0?e[s]=i.concat([r[s]]):e[s]=i:e[s]=[i,r[s]],e},{})}function Qn(r){let t=r==="ordered"?"ol":"ul";switch(r){case"checked":return[t,' data-list="checked"'];case"unchecked":return[t,' data-list="unchecked"'];default:return[t,""]}}function Yu(r){return r.reduce((t,e)=>{if(typeof e.insert=="string"){let s=e.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return t.insert(s,e.attributes)}return t.push(e)},new j.default)}function tf(r,t){let{index:e,length:s}=r;return new ot(e+t,s)}function wx(r){let t=[];return r.forEach(e=>{typeof e.insert=="string"?e.insert.split(`
`).forEach((i,n)=>{n&&t.push({insert:`
`,attributes:e.attributes}),i&&t.push({insert:i,attributes:e.attributes})}):t.push(e)}),t}var ef=Xn;var Yn=class{static DEFAULTS={};constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=t,this.options=e}},P=Yn;var fi="\uFEFF",to=class extends D{constructor(t,e){super(t,e),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(s=>{this.contentNode.appendChild(s)}),this.leftGuard=document.createTextNode(fi),this.rightGuard=document.createTextNode(fi),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(t,e){return t===this.leftGuard?0:t===this.rightGuard?1:super.index(t,e)}restore(t){let e=null,s,i=t.data.split(fi).join("");if(t===this.leftGuard)if(this.prev instanceof z){let n=this.prev.length();this.prev.insertAt(n,i),e={startNode:this.prev.domNode,startOffset:n+i.length}}else s=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(s),this),e={startNode:s,startOffset:i.length};else t===this.rightGuard&&(this.next instanceof z?(this.next.insertAt(0,i),e={startNode:this.next.domNode,startOffset:i.length}):(s=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(s),this.next),e={startNode:s,startOffset:i.length}));return t.data=fi,e}update(t,e){t.forEach(s=>{if(s.type==="characterData"&&(s.target===this.leftGuard||s.target===this.rightGuard)){let i=this.restore(s.target);i&&(e.range=i)}})}},mr=to;var eo=class{isComposing=!1;constructor(t,e){this.scroll=t,this.emitter=e,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",t=>{this.isComposing||this.handleCompositionStart(t)}),this.scroll.domNode.addEventListener("compositionend",t=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(t)})})}handleCompositionStart(t){let e=t.target instanceof Node?this.scroll.find(t.target,!0):null;e&&!(e instanceof mr)&&(this.emitter.emit(v.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(v.events.COMPOSITION_START,t),this.isComposing=!0)}handleCompositionEnd(t){this.emitter.emit(v.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(v.events.COMPOSITION_END,t),this.isComposing=!1}},rf=eo;var ro=class r{static DEFAULTS={modules:{}};static themes={default:r};modules={};constructor(t,e){this.quill=t,this.options=e}init(){Object.keys(this.options.modules).forEach(t=>{this.modules[t]==null&&this.addModule(t)})}addModule(t){let e=this.quill.constructor.import(`modules/${t}`);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}},gr=ro;var Ex=r=>r.parentElement||r.getRootNode().host||null,Ax=r=>{let t=r.getBoundingClientRect(),e="offsetWidth"in r&&Math.abs(t.width)/r.offsetWidth||1,s="offsetHeight"in r&&Math.abs(t.height)/r.offsetHeight||1;return{top:t.top,right:t.left+r.clientWidth*e,bottom:t.top+r.clientHeight*s,left:t.left}},hi=r=>{let t=parseInt(r,10);return Number.isNaN(t)?0:t},sf=(r,t,e,s,i,n)=>r<e&&t>s?0:r<e?-(e-r+i):t>s?t-r>s-e?r+i-e:t-s+n:0,Sx=(r,t)=>{let e=r.ownerDocument,s=t,i=r;for(;i;){let n=i===e.body,o=n?{top:0,right:window.visualViewport?.width??e.documentElement.clientWidth,bottom:window.visualViewport?.height??e.documentElement.clientHeight,left:0}:Ax(i),a=getComputedStyle(i),l=sf(s.left,s.right,o.left,o.right,hi(a.scrollPaddingLeft),hi(a.scrollPaddingRight)),c=sf(s.top,s.bottom,o.top,o.bottom,hi(a.scrollPaddingTop),hi(a.scrollPaddingBottom));if(l||c)if(n)e.defaultView?.scrollBy(l,c);else{let{scrollLeft:u,scrollTop:f}=i;c&&(i.scrollTop+=c),l&&(i.scrollLeft+=l);let h=i.scrollLeft-u,p=i.scrollTop-f;s={left:s.left-h,top:s.top-p,right:s.right-h,bottom:s.bottom-p}}i=n||a.position==="fixed"?null:Ex(i)}},nf=Sx;var Tx=100,Nx=["block","break","cursor","inline","scroll","text"],Cx=(r,t,e)=>{let s=new ce;return Nx.forEach(i=>{let n=t.query(i);n&&s.register(n)}),r.forEach(i=>{let n=t.query(i);n||e.error(`Cannot register "${i}" specified in "formats" config. Are you sure it was registered?`);let o=0;for(;n;)if(s.register(n),n="blotName"in n?n.requiredContainer??null:null,o+=1,o>Tx){e.error(`Cycle detected in registering blot requiredContainer: "${i}"`);break}}),s},of=Cx;var br=yt("quill"),di=new ce;ct.uiClass="ql-ui";var d=class r{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:di,theme:"default"};static events=v.events;static sources=v.sources;static version="2.0.3";static imports={delta:pe.default,parchment:Ur,"core/module":P,"core/theme":gr};static debug(t){t===!0&&(t="log"),yt.level(t)}static find(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Yr.get(t)||di.find(t,e)}static import(t){return this.imports[t]==null&&br.error(`Cannot import ${t}. Are you sure it was registered?`),this.imports[t]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){let t=arguments.length<=0?void 0:arguments[0],e=!!(!(arguments.length<=1)&&arguments[1]),s="attrName"in t?t.attrName:t.blotName;typeof s=="string"?this.register(`formats/${s}`,t,e):Object.keys(t).forEach(i=>{this.register(i,t[i],e)})}else{let t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],s=!!(!(arguments.length<=2)&&arguments[2]);this.imports[t]!=null&&!s&&br.warn(`Overwriting ${t} with`,e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&e&&typeof e!="boolean"&&e.blotName!=="abstract"&&di.register(e),typeof e.register=="function"&&e.register(di)}}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=Lx(t,e),this.container=this.options.container,this.container==null){br.error("Invalid Quill container",t);return}this.options.debug&&r.debug(this.options.debug);let s=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Yr.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new v;let i=zr.blotName,n=this.options.registry.query(i);if(!n||!("blotName"in n))throw new Error(`Cannot initialize Quill without "${i}" blot`);if(this.scroll=new n(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new ef(this.scroll),this.selection=new Xu(this.scroll,this.emitter),this.composition=new rf(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(v.events.EDITOR_CHANGE,o=>{o===v.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(v.events.SCROLL_UPDATE,(o,a)=>{let l=this.selection.lastRange,[c]=this.selection.getRange(),u=l&&c?{oldRange:l,newRange:c}:void 0;Ct.call(this,()=>this.editor.update(null,a,u),o)}),this.emitter.on(v.events.SCROLL_EMBED_UPDATE,(o,a)=>{let l=this.selection.lastRange,[c]=this.selection.getRange(),u=l&&c?{oldRange:l,newRange:c}:void 0;Ct.call(this,()=>{let f=new pe.default().retain(o.offset(this)).retain({[o.statics.blotName]:a});return this.editor.update(f,[],u)},r.sources.USER)}),s){let o=this.clipboard.convert({html:`${s}<p><br></p>`,text:`
`});this.setContents(o)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof t=="string"){let s=t;t=document.createElement("div"),t.classList.add(s)}return this.container.insertBefore(t,e),t}blur(){this.selection.setRange(null)}deleteText(t,e,s){return[t,e,,s]=Jt(t,e,s),Ct.call(this,()=>this.editor.deleteText(t,e),s,t,-1*e)}disable(){this.enable(!1)}editReadOnly(t){this.allowReadOnlyEdits=!0;let e=t();return this.allowReadOnlyEdits=!1,e}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}format(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.sources.API;return Ct.call(this,()=>{let i=this.getSelection(!0),n=new pe.default;if(i==null)return n;if(this.scroll.query(t,y.BLOCK))n=this.editor.formatLine(i.index,i.length,{[t]:e});else{if(i.length===0)return this.selection.format(t,e),n;n=this.editor.formatText(i.index,i.length,{[t]:e})}return this.setSelection(i,v.sources.SILENT),n},s)}formatLine(t,e,s,i,n){let o;return[t,e,o,n]=Jt(t,e,s,i,n),Ct.call(this,()=>this.editor.formatLine(t,e,o),n,t,0)}formatText(t,e,s,i,n){let o;return[t,e,o,n]=Jt(t,e,s,i,n),Ct.call(this,()=>this.editor.formatText(t,e,o),n,t,0)}getBounds(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=null;if(typeof t=="number"?s=this.selection.getBounds(t,e):s=this.selection.getBounds(t.index,t.length),!s)return null;let i=this.container.getBoundingClientRect();return{bottom:s.bottom-i.top,height:s.height,left:s.left-i.left,right:s.right-i.left,top:s.top-i.top,width:s.width}}getContents(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-t;return[t,e]=Jt(t,e),this.editor.getContents(t,e)}getFormat(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof t=="number"?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof t!="number"?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}getModule(t){return this.theme.modules[t]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(e=e??this.getLength()-t),[t,e]=Jt(t,e),this.editor.getHTML(t,e)}getText(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(e=e??this.getLength()-t),[t,e]=Jt(t,e),this.editor.getText(t,e)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,e,s){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r.sources.API;return Ct.call(this,()=>this.editor.insertEmbed(t,e,s),i,t)}insertText(t,e,s,i,n){let o;return[t,,o,n]=Jt(t,0,s,i,n),Ct.call(this,()=>this.editor.insertText(t,e,o),n,t,e.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(t,e,s){return[t,e,,s]=Jt(t,e,s),Ct.call(this,()=>this.editor.removeFormat(t,e),s,t)}scrollRectIntoView(t){nf(this.root,t)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){let t=this.selection.lastRange,e=t&&this.selection.getBounds(t.index,t.length);e&&this.scrollRectIntoView(e)}setContents(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v.sources.API;return Ct.call(this,()=>{t=new pe.default(t);let s=this.getLength(),i=this.editor.deleteText(0,s),n=this.editor.insertContents(0,t),o=this.editor.deleteText(this.getLength()-1,1);return i.compose(n).compose(o)},e)}setSelection(t,e,s){t==null?this.selection.setRange(null,e||r.sources.API):([t,e,,s]=Jt(t,e,s),this.selection.setRange(new ot(Math.max(0,t),e),s),s!==v.sources.SILENT&&this.scrollSelectionIntoView())}setText(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v.sources.API,s=new pe.default().insert(t);return this.setContents(s,e)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v.sources.USER,e=this.scroll.update(t);return this.selection.update(t),e}updateContents(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v.sources.API;return Ct.call(this,()=>(t=new pe.default(t),this.editor.applyDelta(t)),e,!0)}};function af(r){return typeof r=="string"?document.querySelector(r):r}function so(r){return Object.entries(r??{}).reduce((t,e)=>{let[s,i]=e;return{...t,[s]:i===!0?{}:i}},{})}function lf(r){return Object.fromEntries(Object.entries(r).filter(t=>t[1]!==void 0))}function Lx(r,t){let e=af(r);if(!e)throw new Error("Invalid Quill container");let i=!t.theme||t.theme===d.DEFAULTS.theme?gr:d.import(`themes/${t.theme}`);if(!i)throw new Error(`Invalid theme ${t.theme}. Did you register it?`);let{modules:n,...o}=d.DEFAULTS,{modules:a,...l}=i.DEFAULTS,c=so(t.modules);c!=null&&c.toolbar&&c.toolbar.constructor!==Object&&(c={...c,toolbar:{container:c.toolbar}});let u=lt({},so(n),so(a),c),f={...o,...lf(l),...lf(t)},h=t.registry;return h?t.formats&&br.warn('Ignoring "formats" option because "registry" is specified'):h=t.formats?of(t.formats,f.registry,br):f.registry,{...f,registry:h,container:e,theme:i,modules:Object.entries(u).reduce((p,m)=>{let[x,A]=m;if(!A)return p;let b=d.import(`modules/${x}`);return b==null?(br.error(`Cannot load ${x} module. Are you sure you registered it?`),p):{...p,[x]:lt({},b.DEFAULTS||{},A)}},{}),bounds:af(f.bounds)}}function Ct(r,t,e,s){if(!this.isEnabled()&&t===v.sources.USER&&!this.allowReadOnlyEdits)return new pe.default;let i=e==null?null:this.getSelection(),n=this.editor.delta,o=r();if(i!=null&&(e===!0&&(e=i.index),s==null?i=cf(i,o,t):s!==0&&(i=cf(i,e,s,t)),this.setSelection(i,v.sources.SILENT)),o.length()>0){let a=[v.events.TEXT_CHANGE,o,n,t];this.emitter.emit(v.events.EDITOR_CHANGE,...a),t!==v.sources.SILENT&&this.emitter.emit(...a)}return o}function Jt(r,t,e,s,i){let n={};return typeof r.index=="number"&&typeof r.length=="number"?typeof t!="number"?(i=s,s=e,e=t,t=r.length,r=r.index):(t=r.length,r=r.index):typeof t!="number"&&(i=s,s=e,e=t,t=0),typeof e=="object"?(n=e,i=s):typeof e=="string"&&(s!=null?n[e]=s:i=e),i=i||v.sources.API,[r,t,n,i]}function cf(r,t,e,s){let i=typeof e=="number"?e:0;if(r==null)return null;let n,o;return t&&typeof t.transformPosition=="function"?[n,o]=[r.index,r.index+r.length].map(a=>t.transformPosition(a,s!==v.sources.USER)):[n,o]=[r.index,r.index+r.length].map(a=>a<t||a===t&&s===v.sources.USER?a:i>=0?a+i:Math.max(t,a+i)),new ot(n,o-n)}var io=class extends nr{},Et=io;var At=rt(ft(),1);function uf(r){return r instanceof I||r instanceof K}function ff(r){return typeof r.updateContent=="function"}var oo=class extends zr{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=I;static allowedChildren=[I,K,Et];constructor(t,e,s){let{emitter:i}=s;super(t,e),this.emitter=i,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",n=>this.handleDragStart(n))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;let t=this.batch;this.batch=!1,this.update(t)}emitMount(t){this.emitter.emit(v.events.SCROLL_BLOT_MOUNT,t)}emitUnmount(t){this.emitter.emit(v.events.SCROLL_BLOT_UNMOUNT,t)}emitEmbedUpdate(t,e){this.emitter.emit(v.events.SCROLL_EMBED_UPDATE,t,e)}deleteAt(t,e){let[s,i]=this.line(t),[n]=this.line(t+e);if(super.deleteAt(t,e),n!=null&&s!==n&&i>0){if(s instanceof K||n instanceof K){this.optimize();return}let o=n.children.head instanceof J?null:n.children.head;s.moveChildren(n,o),s.remove()}this.optimize()}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",t?"true":"false")}formatAt(t,e,s,i){super.formatAt(t,e,s,i),this.optimize()}insertAt(t,e,s){if(t>=this.length())if(s==null||this.scroll.query(e,y.BLOCK)==null){let i=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(i),s==null&&e.endsWith(`
`)?i.insertAt(0,e.slice(0,-1),s):i.insertAt(0,e,s)}else{let i=this.scroll.create(e,s);this.appendChild(i)}else super.insertAt(t,e,s);this.optimize()}insertBefore(t,e){if(t.statics.scope===y.INLINE_BLOT){let s=this.scroll.create(this.statics.defaultChild.blotName);s.appendChild(t),super.insertBefore(s,e)}else super.insertBefore(t,e)}insertContents(t,e){let s=this.deltaToRenderBlocks(e.concat(new At.default().insert(`
`))),i=s.pop();if(i==null)return;this.batchStart();let n=s.shift();if(n){let l=n.type==="block"&&(n.delta.length()===0||!this.descendant(K,t)[0]&&t<this.length()),c=n.type==="block"?n.delta:new At.default().insert({[n.key]:n.value});no(this,t,c);let u=n.type==="block"?1:0,f=t+c.length()+u;l&&this.insertAt(f-1,`
`);let h=ht(this.line(t)[0]),p=At.AttributeMap.diff(h,n.attributes)||{};Object.keys(p).forEach(m=>{this.formatAt(f-1,1,m,p[m])}),t=f}let[o,a]=this.children.find(t);if(s.length&&(o&&(o=o.split(a),a=0),s.forEach(l=>{if(l.type==="block"){let c=this.createBlock(l.attributes,o||void 0);no(c,0,l.delta)}else{let c=this.create(l.key,l.value);this.insertBefore(c,o||void 0),Object.keys(l.attributes).forEach(u=>{c.format(u,l.attributes[u])})}})),i.type==="block"&&i.delta.length()){let l=o?o.offset(o.scroll)+a:this.length();no(this,l,i.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(t){let e=this.path(t).pop();if(!e)return[null,-1];let[s,i]=e;return s instanceof F?[s,i]:[null,-1]}line(t){return t===this.length()?this.line(t-1):this.descendant(uf,t)}lines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,s=(i,n,o)=>{let a=[],l=o;return i.children.forEachAt(n,o,(c,u,f)=>{uf(c)?a.push(c):c instanceof nr&&(a=a.concat(s(c,u,l))),l-=f}),a};return s(this,t,e)}optimize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(t,e),t.length>0&&this.emitter.emit(v.events.SCROLL_OPTIMIZE,t,e))}path(t){return super.path(t).slice(1)}remove(){}update(t){if(this.batch){Array.isArray(t)&&(this.batch=this.batch.concat(t));return}let e=v.sources.USER;typeof t=="string"&&(e=t),Array.isArray(t)||(t=this.observer.takeRecords()),t=t.filter(s=>{let{target:i}=s,n=this.find(i,!0);return n&&!ff(n)}),t.length>0&&this.emitter.emit(v.events.SCROLL_BEFORE_UPDATE,e,t),super.update(t.concat([])),t.length>0&&this.emitter.emit(v.events.SCROLL_UPDATE,e,t)}updateEmbedAt(t,e,s){let[i]=this.descendant(n=>n instanceof K,t);i&&i.statics.blotName===e&&ff(i)&&i.updateContent(s)}handleDragStart(t){t.preventDefault()}deltaToRenderBlocks(t){let e=[],s=new At.default;return t.forEach(i=>{let n=i?.insert;if(n)if(typeof n=="string"){let o=n.split(`
`);o.slice(0,-1).forEach(l=>{s.insert(l,i.attributes),e.push({type:"block",delta:s,attributes:i.attributes??{}}),s=new At.default});let a=o[o.length-1];a&&s.insert(a,i.attributes)}else{let o=Object.keys(n)[0];if(!o)return;this.query(o,y.INLINE)?s.push(i):(s.length()&&e.push({type:"block",delta:s,attributes:{}}),s=new At.default,e.push({type:"blockEmbed",key:o,value:n[o],attributes:i.attributes??{}}))}}),s.length()&&e.push({type:"block",delta:s,attributes:{}}),e}createBlock(t,e){let s,i={};Object.entries(t).forEach(a=>{let[l,c]=a;this.query(l,y.BLOCK&y.BLOT)!=null?s=l:i[l]=c});let n=this.create(s||this.statics.defaultChild.blotName,s?t[s]:void 0);this.insertBefore(n,e||void 0);let o=n.length();return Object.entries(i).forEach(a=>{let[l,c]=a;n.formatAt(0,o,l,c)}),n}};function no(r,t,e){e.reduce((s,i)=>{let n=At.Op.length(i),o=i.attributes||{};if(i.insert!=null){if(typeof i.insert=="string"){let a=i.insert;r.insertAt(s,a);let[l]=r.descendant(F,s),c=ht(l);o=At.AttributeMap.diff(c,o)||{}}else if(typeof i.insert=="object"){let a=Object.keys(i.insert)[0];if(a==null)return s;if(r.insertAt(s,a,i.insert[a]),r.scroll.query(a,y.INLINE)!=null){let[c]=r.descendant(F,s),u=ht(c);o=At.AttributeMap.diff(u,o)||{}}}}return Object.keys(o).forEach(a=>{r.formatAt(s,n,a,o[a])}),s+n},t)}var hf=oo;var dt=rt(ft(),1);var ao={scope:y.BLOCK,whitelist:["right","center","justify"]},df=new st("align","align",ao),lo=new H("align","ql-align",ao),pi=new ut("align","text-align",ao);var es=class extends ut{value(t){let e=super.value(t);return e.startsWith("rgb(")?(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${e.split(",").map(i=>`00${parseInt(i,10).toString(16)}`.slice(-2)).join("")}`):e}},pf=new H("color","ql-color",{scope:y.INLINE}),rs=new es("color","color",{scope:y.INLINE});var mf=new H("background","ql-bg",{scope:y.INLINE}),ss=new es("background","background-color",{scope:y.INLINE});var Rt=class extends Et{static create(t){let e=super.create(t);return e.setAttribute("spellcheck","false"),e}code(t,e){return this.children.map(s=>s.length()<=1?"":s.domNode.innerText).join(`
`).slice(t,t+e)}html(t,e){return`<pre>
${Re(this.code(t,e))}
</pre>`}},$=class extends I{static TAB="  ";static register(){d.register(Rt)}},yr=class extends Q{};yr.blotName="code";yr.tagName="CODE";$.blotName="code-block";$.className="ql-code-block";$.tagName="DIV";Rt.blotName="code-block-container";Rt.className="ql-code-block-container";Rt.tagName="DIV";Rt.allowedChildren=[$];$.allowedChildren=[z,J,de];$.requiredContainer=Rt;var co={scope:y.BLOCK,whitelist:["rtl"]},mi=new st("direction","dir",co),uo=new H("direction","ql-direction",co),gi=new ut("direction","direction",co);var gf={scope:y.INLINE,whitelist:["serif","monospace"]},ho=new H("font","ql-font",gf),fo=class extends ut{value(t){return super.value(t).replace(/["']/g,"")}},bi=new fo("font","font-family",gf);var po=new H("size","ql-size",{scope:y.INLINE,whitelist:["small","large","huge"]}),yi=new ut("size","font-size",{scope:y.INLINE,whitelist:["10px","18px","32px"]});var Y=rt(ft(),1);var Ox=yt("quill:keyboard"),Ix=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",is=class r extends P{static match(t,e){return["altKey","ctrlKey","metaKey","shiftKey"].some(s=>!!e[s]!==t[s]&&e[s]!==null)?!1:e.key===t.key||e.key===t.which}constructor(t,e){super(t,e),this.bindings={},Object.keys(this.options.bindings).forEach(s=>{this.options.bindings[s]&&this.addBinding(this.options.bindings[s])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=qx(t);if(i==null){Ox.warn("Attempted to add invalid keyboard binding",i);return}typeof e=="function"&&(e={handler:e}),typeof s=="function"&&(s={handler:s}),(Array.isArray(i.key)?i.key:[i.key]).forEach(o=>{let a={...i,key:o,...e,...s};this.bindings[a.key]=this.bindings[a.key]||[],this.bindings[a.key].push(a)})}listen(){this.quill.root.addEventListener("keydown",t=>{if(t.defaultPrevented||t.isComposing||t.keyCode===229&&(t.key==="Enter"||t.key==="Backspace"))return;let i=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter(b=>r.match(t,b));if(i.length===0)return;let n=d.find(t.target,!0);if(n&&n.scroll!==this.quill.scroll)return;let o=this.quill.getSelection();if(o==null||!this.quill.hasFocus())return;let[a,l]=this.quill.getLine(o.index),[c,u]=this.quill.getLeaf(o.index),[f,h]=o.length===0?[c,u]:this.quill.getLeaf(o.index+o.length),p=c instanceof or?c.value().slice(0,u):"",m=f instanceof or?f.value().slice(h):"",x={collapsed:o.length===0,empty:o.length===0&&a.length()<=1,format:this.quill.getFormat(o),line:a,offset:l,prefix:p,suffix:m,event:t};i.some(b=>{if(b.collapsed!=null&&b.collapsed!==x.collapsed||b.empty!=null&&b.empty!==x.empty||b.offset!=null&&b.offset!==x.offset)return!1;if(Array.isArray(b.format)){if(b.format.every(T=>x.format[T]==null))return!1}else if(typeof b.format=="object"&&!Object.keys(b.format).every(T=>b.format[T]===!0?x.format[T]!=null:b.format[T]===!1?x.format[T]==null:Se(b.format[T],x.format[T])))return!1;return b.prefix!=null&&!b.prefix.test(x.prefix)||b.suffix!=null&&!b.suffix.test(x.suffix)?!1:b.handler.call(this,o,x,b)!==!0})&&t.preventDefault()})}handleBackspace(t,e){let s=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(t.index===0||this.quill.getLength()<=1)return;let i={},[n]=this.quill.getLine(t.index),o=new Y.default().retain(t.index-s).delete(s);if(e.offset===0){let[a]=this.quill.getLine(t.index-1);if(a&&!(a.statics.blotName==="block"&&a.length()<=1)){let c=n.formats(),u=this.quill.getFormat(t.index-1,1);if(i=Y.AttributeMap.diff(c,u)||{},Object.keys(i).length>0){let f=new Y.default().retain(t.index+n.length()-2).retain(1,i);o=o.compose(f)}}}this.quill.updateContents(o,d.sources.USER),this.quill.focus()}handleDelete(t,e){let s=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(t.index>=this.quill.getLength()-s)return;let i={},[n]=this.quill.getLine(t.index),o=new Y.default().retain(t.index).delete(s);if(e.offset>=n.length()-1){let[a]=this.quill.getLine(t.index+1);if(a){let l=n.formats(),c=this.quill.getFormat(t.index,1);i=Y.AttributeMap.diff(l,c)||{},Object.keys(i).length>0&&(o=o.retain(a.length()-1).retain(1,i))}}this.quill.updateContents(o,d.sources.USER),this.quill.focus()}handleDeleteRange(t){ns({range:t,quill:this.quill}),this.quill.focus()}handleEnter(t,e){let s=Object.keys(e.format).reduce((n,o)=>(this.quill.scroll.query(o,y.BLOCK)&&!Array.isArray(e.format[o])&&(n[o]=e.format[o]),n),{}),i=new Y.default().retain(t.index).delete(t.length).insert(`
`,s);this.quill.updateContents(i,d.sources.USER),this.quill.setSelection(t.index+1,d.sources.SILENT),this.quill.focus()}},_x={bindings:{bold:mo("bold"),italic:mo("italic"),underline:mo("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(r,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","+1",d.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(r,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","-1",d.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(r,t){t.format.indent!=null?this.quill.format("indent","-1",d.sources.USER):t.format.list!=null&&this.quill.format("list",!1,d.sources.USER)}},"indent code-block":bf(!0),"outdent code-block":bf(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(r){this.quill.deleteText(r.index-1,1,d.sources.USER)}},tab:{key:"Tab",handler(r,t){if(t.format.table)return!0;this.quill.history.cutoff();let e=new Y.default().retain(r.index).delete(r.length).insert("	");return this.quill.updateContents(e,d.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(r.index+1,d.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,d.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(r,t){let e={list:!1};t.format.indent&&(e.indent=!1),this.quill.formatLine(r.index,r.length,e,d.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(r){let[t,e]=this.quill.getLine(r.index),s={...t.formats(),list:"checked"},i=new Y.default().retain(r.index).insert(`
`,s).retain(t.length()-e-1).retain(1,{list:"unchecked"});this.quill.updateContents(i,d.sources.USER),this.quill.setSelection(r.index+1,d.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(r,t){let[e,s]=this.quill.getLine(r.index),i=new Y.default().retain(r.index).insert(`
`,t.format).retain(e.length()-s-1).retain(1,{header:null});this.quill.updateContents(i,d.sources.USER),this.quill.setSelection(r.index+1,d.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(r){let t=this.quill.getModule("table");if(t){let[e,s,i,n]=t.getTable(r),o=kx(e,s,i,n);if(o==null)return;let a=e.offset();if(o<0){let l=new Y.default().retain(a).insert(`
`);this.quill.updateContents(l,d.sources.USER),this.quill.setSelection(r.index+1,r.length,d.sources.SILENT)}else if(o>0){a+=e.length();let l=new Y.default().retain(a).insert(`
`);this.quill.updateContents(l,d.sources.USER),this.quill.setSelection(a,d.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(r,t){let{event:e,line:s}=t,i=s.offset(this.quill.scroll);e.shiftKey?this.quill.setSelection(i-1,d.sources.USER):this.quill.setSelection(i+s.length(),d.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(r,t){if(this.quill.scroll.query("list")==null)return!0;let{length:e}=t.prefix,[s,i]=this.quill.getLine(r.index);if(i>e)return!0;let n;switch(t.prefix.trim()){case"[]":case"[ ]":n="unchecked";break;case"[x]":n="checked";break;case"-":case"*":n="bullet";break;default:n="ordered"}this.quill.insertText(r.index," ",d.sources.USER),this.quill.history.cutoff();let o=new Y.default().retain(r.index-i).delete(e+1).retain(s.length()-2-i).retain(1,{list:n});return this.quill.updateContents(o,d.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(r.index-e,d.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(r){let[t,e]=this.quill.getLine(r.index),s=2,i=t;for(;i!=null&&i.length()<=1&&i.formats()["code-block"];)if(i=i.prev,s-=1,s<=0){let n=new Y.default().retain(r.index+t.length()-e-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(n,d.sources.USER),this.quill.setSelection(r.index-1,d.sources.SILENT),!1}return!0}},"embed left":xi("ArrowLeft",!1),"embed left shift":xi("ArrowLeft",!0),"embed right":xi("ArrowRight",!1),"embed right shift":xi("ArrowRight",!0),"table down":yf(!1),"table up":yf(!0)}};is.DEFAULTS=_x;function bf(r){return{key:"Tab",shiftKey:!r,format:{"code-block":!0},handler(t,e){let{event:s}=e,i=this.quill.scroll.query("code-block"),{TAB:n}=i;if(t.length===0&&!s.shiftKey){this.quill.insertText(t.index,n,d.sources.USER),this.quill.setSelection(t.index+n.length,d.sources.SILENT);return}let o=t.length===0?this.quill.getLines(t.index,1):this.quill.getLines(t),{index:a,length:l}=t;o.forEach((c,u)=>{r?(c.insertAt(0,n),u===0?a+=n.length:l+=n.length):c.domNode.textContent.startsWith(n)&&(c.deleteAt(0,n.length),u===0?a-=n.length:l-=n.length)}),this.quill.update(d.sources.USER),this.quill.setSelection(a,l,d.sources.SILENT)}}}function xi(r,t){return{key:r,shiftKey:t,altKey:null,[r==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(s){let{index:i}=s;r==="ArrowRight"&&(i+=s.length+1);let[n]=this.quill.getLeaf(i);return n instanceof D?(r==="ArrowLeft"?t?this.quill.setSelection(s.index-1,s.length+1,d.sources.USER):this.quill.setSelection(s.index-1,d.sources.USER):t?this.quill.setSelection(s.index,s.length+1,d.sources.USER):this.quill.setSelection(s.index+s.length+1,d.sources.USER),!1):!0}}}function mo(r){return{key:r[0],shortKey:!0,handler(t,e){this.quill.format(r,!e.format[r],d.sources.USER)}}}function yf(r){return{key:r?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(t,e){let s=r?"prev":"next",i=e.line,n=i.parent[s];if(n!=null){if(n.statics.blotName==="table-row"){let o=n.children.head,a=i;for(;a.prev!=null;)a=a.prev,o=o.next;let l=o.offset(this.quill.scroll)+Math.min(e.offset,o.length()-1);this.quill.setSelection(l,0,d.sources.USER)}}else{let o=i.table()[s];o!=null&&(r?this.quill.setSelection(o.offset(this.quill.scroll)+o.length()-1,0,d.sources.USER):this.quill.setSelection(o.offset(this.quill.scroll),0,d.sources.USER))}return!1}}}function qx(r){if(typeof r=="string"||typeof r=="number")r={key:r};else if(typeof r=="object")r=qt(r);else return null;return r.shortKey&&(r[Ix]=r.shortKey,delete r.shortKey),r}function ns(r){let{quill:t,range:e}=r,s=t.getLines(e),i={};if(s.length>1){let n=s[0].formats(),o=s[s.length-1].formats();i=Y.AttributeMap.diff(o,n)||{}}t.deleteText(e,d.sources.USER),Object.keys(i).length>0&&t.formatLine(e.index,1,i,d.sources.USER),t.setSelection(e.index,d.sources.SILENT)}function kx(r,t,e,s){return t.prev==null&&t.next==null?e.prev==null&&e.next==null?s===0?-1:1:e.prev==null?-1:1:t.prev==null?-1:t.next==null?1:null}var Rx=/font-weight:\s*normal/,Mx=["P","OL","UL"],xf=r=>r&&Mx.includes(r.tagName),Bx=r=>{Array.from(r.querySelectorAll("br")).filter(t=>xf(t.previousElementSibling)&&xf(t.nextElementSibling)).forEach(t=>{t.parentNode?.removeChild(t)})},Dx=r=>{Array.from(r.querySelectorAll('b[style*="font-weight"]')).filter(t=>t.getAttribute("style")?.match(Rx)).forEach(t=>{let e=r.createDocumentFragment();e.append(...t.childNodes),t.parentNode?.replaceChild(e,t)})};function go(r){r.querySelector('[id^="docs-internal-guid-"]')&&(Dx(r),Bx(r))}var jx=/\bmso-list:[^;]*ignore/i,Px=/\bmso-list:[^;]*\bl(\d+)/i,zx=/\bmso-list:[^;]*\blevel(\d+)/i,Ux=(r,t)=>{let e=r.getAttribute("style"),s=e?.match(Px);if(!s)return null;let i=Number(s[1]),n=e?.match(zx),o=n?Number(n[1]):1,a=new RegExp(`@list l${i}:level${o}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),l=t.match(a),c=l&&l[1]==="bullet"?"bullet":"ordered";return{id:i,indent:o,type:c,element:r}},Hx=r=>{let t=Array.from(r.querySelectorAll("[style*=mso-list]")),e=[],s=[];t.forEach(o=>{(o.getAttribute("style")||"").match(jx)?e.push(o):s.push(o)}),e.forEach(o=>o.parentNode?.removeChild(o));let i=r.documentElement.innerHTML,n=s.map(o=>Ux(o,i)).filter(o=>o);for(;n.length;){let o=[],a=n.shift();for(;a;)o.push(a),a=n.length&&n[0]?.element===a.element.nextElementSibling&&n[0].id===a.id?n.shift():null;let l=document.createElement("ul");o.forEach(f=>{let h=document.createElement("li");h.setAttribute("data-list",f.type),f.indent>1&&h.setAttribute("class",`ql-indent-${f.indent-1}`),h.innerHTML=f.element.innerHTML,l.appendChild(h)});let c=o[0]?.element,{parentNode:u}=c??{};c&&u?.replaceChild(l,c),o.slice(1).forEach(f=>{let{element:h}=f;u?.removeChild(h)})}};function bo(r){r.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&Hx(r)}var Fx=[bo,go],$x=r=>{r.documentElement&&Fx.forEach(t=>{t(r)})},vf=$x;var Wx=yt("quill:clipboard"),Kx=[[Node.TEXT_NODE,iv],[Node.TEXT_NODE,Ef],["br",Qx],[Node.ELEMENT_NODE,Ef],[Node.ELEMENT_NODE,Jx],[Node.ELEMENT_NODE,Zx],[Node.ELEMENT_NODE,rv],["li",tv],["ol, ul",ev],["pre",Xx],["tr",sv],["b",yo("bold")],["i",yo("italic")],["strike",yo("strike")],["style",Yx]],Vx=[df,mi].reduce((r,t)=>(r[t.keyName]=t,r),{}),wf=[pi,ss,rs,gi,bi,yi].reduce((r,t)=>(r[t.keyName]=t,r),{}),wi=class extends P{static DEFAULTS={matchers:[]};constructor(t,e){super(t,e),this.quill.root.addEventListener("copy",s=>this.onCaptureCopy(s,!1)),this.quill.root.addEventListener("cut",s=>this.onCaptureCopy(s,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],Kx.concat(this.options.matchers??[]).forEach(s=>{let[i,n]=s;this.addMatcher(i,n)})}addMatcher(t,e){this.matchers.push([t,e])}convert(t){let{html:e,text:s}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i[$.blotName])return new dt.default().insert(s||"",{[$.blotName]:i[$.blotName]});if(!e)return new dt.default().insert(s||"",i);let n=this.convertHTML(e);return os(n,`
`)&&(n.ops[n.ops.length-1].attributes==null||i.table)?n.compose(new dt.default().retain(n.length()-1).delete(1)):n}normalizeHTML(t){vf(t)}convertHTML(t){let e=new DOMParser().parseFromString(t,"text/html");this.normalizeHTML(e);let s=e.body,i=new WeakMap,[n,o]=this.prepareMatching(s,i);return Ei(this.quill.scroll,s,n,o,i)}dangerouslyPasteHTML(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:d.sources.API;if(typeof t=="string"){let i=this.convert({html:t,text:""});this.quill.setContents(i,e),this.quill.setSelection(0,d.sources.SILENT)}else{let i=this.convert({html:e,text:""});this.quill.updateContents(new dt.default().retain(t).concat(i),s),this.quill.setSelection(t+i.length(),d.sources.SILENT)}}onCaptureCopy(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t.defaultPrevented)return;t.preventDefault();let[s]=this.quill.selection.getRange();if(s==null)return;let{html:i,text:n}=this.onCopy(s,e);t.clipboardData?.setData("text/plain",n),t.clipboardData?.setData("text/html",i),e&&ns({range:s,quill:this.quill})}normalizeURIList(t){return t.split(/\r?\n/).filter(e=>e[0]!=="#").join(`
`)}onCapturePaste(t){if(t.defaultPrevented||!this.quill.isEnabled())return;t.preventDefault();let e=this.quill.getSelection(!0);if(e==null)return;let s=t.clipboardData?.getData("text/html"),i=t.clipboardData?.getData("text/plain");if(!s&&!i){let o=t.clipboardData?.getData("text/uri-list");o&&(i=this.normalizeURIList(o))}let n=Array.from(t.clipboardData?.files||[]);if(!s&&n.length>0){this.quill.uploader.upload(e,n);return}if(s&&n.length>0){let o=new DOMParser().parseFromString(s,"text/html");if(o.body.childElementCount===1&&o.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(e,n);return}}this.onPaste(e,{html:s,text:i})}onCopy(t){let e=this.quill.getText(t);return{html:this.quill.getSemanticHTML(t),text:e}}onPaste(t,e){let{text:s,html:i}=e,n=this.quill.getFormat(t.index),o=this.convert({text:s,html:i},n);Wx.log("onPaste",o,{text:s,html:i});let a=new dt.default().retain(t.index).delete(t.length).concat(o);this.quill.updateContents(a,d.sources.USER),this.quill.setSelection(a.length()-t.length,d.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(t,e){let s=[],i=[];return this.matchers.forEach(n=>{let[o,a]=n;switch(o){case Node.TEXT_NODE:i.push(a);break;case Node.ELEMENT_NODE:s.push(a);break;default:Array.from(t.querySelectorAll(o)).forEach(l=>{e.has(l)?e.get(l)?.push(a):e.set(l,[a])});break}}),[s,i]}};function Me(r,t,e,s){return s.query(t)?r.reduce((i,n)=>{if(!n.insert)return i;if(n.attributes&&n.attributes[t])return i.push(n);let o=e?{[t]:e}:{};return i.insert(n.insert,{...o,...n.attributes})},new dt.default):r}function os(r,t){let e="";for(let s=r.ops.length-1;s>=0&&e.length<t.length;--s){let i=r.ops[s];if(typeof i.insert!="string")break;e=i.insert+e}return e.slice(-1*t.length)===t}function me(r,t){if(!(r instanceof Element))return!1;let e=t.query(r);return e&&e.prototype instanceof D?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(r.tagName.toLowerCase())}function Gx(r,t){return r.previousElementSibling&&r.nextElementSibling&&!me(r.previousElementSibling,t)&&!me(r.nextElementSibling,t)}var vi=new WeakMap;function Af(r){return r==null?!1:(vi.has(r)||(r.tagName==="PRE"?vi.set(r,!0):vi.set(r,Af(r.parentNode))),vi.get(r))}function Ei(r,t,e,s,i){return t.nodeType===t.TEXT_NODE?s.reduce((n,o)=>o(t,n,r),new dt.default):t.nodeType===t.ELEMENT_NODE?Array.from(t.childNodes||[]).reduce((n,o)=>{let a=Ei(r,o,e,s,i);return o.nodeType===t.ELEMENT_NODE&&(a=e.reduce((l,c)=>c(o,l,r),a),a=(i.get(o)||[]).reduce((l,c)=>c(o,l,r),a)),n.concat(a)},new dt.default):new dt.default}function yo(r){return(t,e,s)=>Me(e,r,!0,s)}function Zx(r,t,e){let s=st.keys(r),i=H.keys(r),n=ut.keys(r),o={};return s.concat(i).concat(n).forEach(a=>{let l=e.query(a,y.ATTRIBUTE);l!=null&&(o[l.attrName]=l.value(r),o[l.attrName])||(l=Vx[a],l!=null&&(l.attrName===a||l.keyName===a)&&(o[l.attrName]=l.value(r)||void 0),l=wf[a],l!=null&&(l.attrName===a||l.keyName===a)&&(l=wf[a],o[l.attrName]=l.value(r)||void 0))}),Object.entries(o).reduce((a,l)=>{let[c,u]=l;return Me(a,c,u,e)},t)}function Jx(r,t,e){let s=e.query(r);if(s==null)return t;if(s.prototype instanceof D){let i={},n=s.value(r);if(n!=null)return i[s.blotName]=n,new dt.default().insert(i,s.formats(r,e))}else if(s.prototype instanceof Te&&!os(t,`
`)&&t.insert(`
`),"blotName"in s&&"formats"in s&&typeof s.formats=="function")return Me(t,s.blotName,s.formats(r,e),e);return t}function Qx(r,t){return os(t,`
`)||t.insert(`
`),t}function Xx(r,t,e){let s=e.query("code-block"),i=s&&"formats"in s&&typeof s.formats=="function"?s.formats(r,e):!0;return Me(t,"code-block",i,e)}function Yx(){return new dt.default}function tv(r,t,e){let s=e.query(r);if(s==null||s.blotName!=="list"||!os(t,`
`))return t;let i=-1,n=r.parentNode;for(;n!=null;)["OL","UL"].includes(n.tagName)&&(i+=1),n=n.parentNode;return i<=0?t:t.reduce((o,a)=>a.insert?a.attributes&&typeof a.attributes.indent=="number"?o.push(a):o.insert(a.insert,{indent:i,...a.attributes||{}}):o,new dt.default)}function ev(r,t,e){let s=r,i=s.tagName==="OL"?"ordered":"bullet",n=s.getAttribute("data-checked");return n&&(i=n==="true"?"checked":"unchecked"),Me(t,"list",i,e)}function Ef(r,t,e){if(!os(t,`
`)){if(me(r,e)&&(r.childNodes.length>0||r instanceof HTMLParagraphElement))return t.insert(`
`);if(t.length()>0&&r.nextSibling){let s=r.nextSibling;for(;s!=null;){if(me(s,e))return t.insert(`
`);let i=e.query(s);if(i&&i.prototype instanceof K)return t.insert(`
`);s=s.firstChild}}}return t}function rv(r,t,e){let s={},i=r.style||{};return i.fontStyle==="italic"&&(s.italic=!0),i.textDecoration==="underline"&&(s.underline=!0),i.textDecoration==="line-through"&&(s.strike=!0),(i.fontWeight?.startsWith("bold")||parseInt(i.fontWeight,10)>=700)&&(s.bold=!0),t=Object.entries(s).reduce((n,o)=>{let[a,l]=o;return Me(n,a,l,e)},t),parseFloat(i.textIndent||0)>0?new dt.default().insert("	").concat(t):t}function sv(r,t,e){let s=r.parentElement?.tagName==="TABLE"?r.parentElement:r.parentElement?.parentElement;if(s!=null){let n=Array.from(s.querySelectorAll("tr")).indexOf(r)+1;return Me(t,"table",n,e)}return t}function iv(r,t,e){let s=r.data;if(r.parentElement?.tagName==="O:P")return t.insert(s.trim());if(!Af(r)){if(s.trim().length===0&&s.includes(`
`)&&!Gx(r,e))return t;s=s.replace(/[^\S\u00a0]/g," "),s=s.replace(/ {2,}/g," "),(r.previousSibling==null&&r.parentElement!=null&&me(r.parentElement,e)||r.previousSibling instanceof Element&&me(r.previousSibling,e))&&(s=s.replace(/^ /,"")),(r.nextSibling==null&&r.parentElement!=null&&me(r.parentElement,e)||r.nextSibling instanceof Element&&me(r.nextSibling,e))&&(s=s.replace(/ $/,"")),s=s.replaceAll("\xA0"," ")}return t.insert(s)}var Ai=class extends P{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(t,e){super(t,e),this.quill.on(d.events.EDITOR_CHANGE,(s,i,n,o)=>{s===d.events.SELECTION_CHANGE?i&&o!==d.sources.SILENT&&(this.currentRange=i):s===d.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||o===d.sources.USER?this.record(i,n):this.transform(i)),this.currentRange=xo(this.currentRange,i))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",s=>{s.inputType==="historyUndo"?(this.undo(),s.preventDefault()):s.inputType==="historyRedo"&&(this.redo(),s.preventDefault())})}change(t,e){if(this.stack[t].length===0)return;let s=this.stack[t].pop();if(!s)return;let i=this.quill.getContents(),n=s.delta.invert(i);this.stack[e].push({delta:n,range:xo(s.range,n)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(s.delta,d.sources.USER),this.ignoreChange=!1,this.restoreSelection(s)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(t,e){if(t.ops.length===0)return;this.stack.redo=[];let s=t.invert(e),i=this.currentRange,n=Date.now();if(this.lastRecorded+this.options.delay>n&&this.stack.undo.length>0){let o=this.stack.undo.pop();o&&(s=s.compose(o.delta),i=o.range)}else this.lastRecorded=n;s.length()!==0&&(this.stack.undo.push({delta:s,range:i}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(t){Sf(this.stack.undo,t),Sf(this.stack.redo,t)}undo(){this.change("undo","redo")}restoreSelection(t){if(t.range)this.quill.setSelection(t.range,d.sources.USER);else{let e=ov(this.quill.scroll,t.delta);this.quill.setSelection(e,d.sources.USER)}}};function Sf(r,t){let e=t;for(let s=r.length-1;s>=0;s-=1){let i=r[s];r[s]={delta:e.transform(i.delta,!0),range:i.range&&xo(i.range,e)},e=i.delta.transform(e),r[s].delta.length()===0&&r.splice(s,1)}}function nv(r,t){let e=t.ops[t.ops.length-1];return e==null?!1:e.insert!=null?typeof e.insert=="string"&&e.insert.endsWith(`
`):e.attributes!=null?Object.keys(e.attributes).some(s=>r.query(s,y.BLOCK)!=null):!1}function ov(r,t){let e=t.reduce((i,n)=>i+(n.delete||0),0),s=t.length()-e;return nv(r,t)&&(s-=1),s}function xo(r,t){if(!r)return r;let e=t.transformPosition(r.index),s=t.transformPosition(r.index+r.length);return{index:e,length:s-e}}var Tf=rt(ft(),1);var Si=class extends P{constructor(t,e){super(t,e),t.root.addEventListener("drop",s=>{s.preventDefault();let i=null;if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(s.clientX,s.clientY);else if(document.caretPositionFromPoint){let o=document.caretPositionFromPoint(s.clientX,s.clientY);i=document.createRange(),i.setStart(o.offsetNode,o.offset),i.setEnd(o.offsetNode,o.offset)}let n=i&&t.selection.normalizeNative(i);if(n){let o=t.selection.normalizedToRange(n);s.dataTransfer?.files&&this.upload(o,s.dataTransfer.files)}})}upload(t,e){let s=[];Array.from(e).forEach(i=>{i&&this.options.mimetypes?.includes(i.type)&&s.push(i)}),s.length>0&&this.options.handler.call(this,t,s)}};Si.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(r,t){if(!this.quill.scroll.query("image"))return;let e=t.map(s=>new Promise(i=>{let n=new FileReader;n.onload=()=>{i(n.result)},n.readAsDataURL(s)}));Promise.all(e).then(s=>{let i=s.reduce((n,o)=>n.insert({image:o}),new Tf.default().retain(r.index).delete(r.length));this.quill.updateContents(i,v.sources.USER),this.quill.setSelection(r.index+s.length,v.sources.SILENT)})}};var Nf=Si;var ge=rt(ft(),1);var Cf=rt(ft(),1);var av=["insertText","insertReplacementText"],vo=class extends P{constructor(t,e){super(t,e),t.root.addEventListener("beforeinput",s=>{this.handleBeforeInput(s)}),/Android/i.test(navigator.userAgent)||t.on(d.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(t){ns({range:t,quill:this.quill})}replaceText(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t.length===0)return!1;if(e){let s=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents(new Cf.default().retain(t.index).insert(e,s),d.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+e.length,0,d.sources.SILENT),!0}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!av.includes(t.inputType))return;let e=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!e||e.collapsed===!0)return;let s=lv(t);if(s==null)return;let i=this.quill.selection.normalizeNative(e),n=i?this.quill.selection.normalizedToRange(i):null;n&&this.replaceText(n,s)&&t.preventDefault()}handleCompositionStart(){let t=this.quill.getSelection();t&&this.replaceText(t)}};function lv(r){return typeof r.data=="string"?r.data:r.dataTransfer?.types.includes("text/plain")?r.dataTransfer.getData("text/plain"):null}var Lf=vo;var cv=/Mac/i.test(navigator.platform),uv=100,fv=r=>!!(r.key==="ArrowLeft"||r.key==="ArrowRight"||r.key==="ArrowUp"||r.key==="ArrowDown"||r.key==="Home"||cv&&r.key==="a"&&r.ctrlKey===!0),wo=class extends P{isListening=!1;selectionChangeDeadline=0;constructor(t,e){super(t,e),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(t,e){let{line:s,event:i}=e;if(!(s instanceof ct)||!s.uiNode)return!0;let n=getComputedStyle(s.domNode).direction==="rtl";return n&&i.key!=="ArrowRight"||!n&&i.key!=="ArrowLeft"?!0:(this.quill.setSelection(t.index-1,t.length+(i.shiftKey?1:0),d.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",t=>{!t.defaultPrevented&&fv(t)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+uv,this.isListening)return;this.isListening=!0;let t=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",t,{once:!0})}handleSelectionChange(){let t=document.getSelection();if(!t)return;let e=t.getRangeAt(0);if(e.collapsed!==!0||e.startOffset!==0)return;let s=this.quill.scroll.find(e.startContainer);if(!(s instanceof ct)||!s.uiNode)return;let i=document.createRange();i.setStartAfter(s.uiNode),i.setEndAfter(s.uiNode),t.removeAllRanges(),t.addRange(i)}},Of=wo;d.register({"blots/block":I,"blots/block/embed":K,"blots/break":J,"blots/container":Et,"blots/cursor":de,"blots/embed":mr,"blots/inline":Q,"blots/scroll":hf,"blots/text":z,"modules/clipboard":wi,"modules/history":Ai,"modules/keyboard":is,"modules/uploader":Nf,"modules/input":Lf,"modules/uiNode":Of});var Ti=d;var Eo=class extends H{add(t,e){let s=0;if(e==="+1"||e==="-1"){let i=this.value(t)||0;s=e==="+1"?i+1:i-1}else typeof e=="number"&&(s=e);return s===0?(this.remove(t),!0):super.add(t,s.toString())}canAdd(t,e){return super.canAdd(t,e)||super.canAdd(t,parseInt(e,10))}value(t){return parseInt(super.value(t),10)||void 0}},hv=new Eo("indent","ql-indent",{scope:y.BLOCK,whitelist:[1,2,3,4,5,6,7,8]}),If=hv;var Ao=class extends I{static blotName="blockquote";static tagName="blockquote"},_f=Ao;var So=class extends I{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(t){return this.tagName.indexOf(t.tagName)+1}},qf=So;var Be=class extends Et{};Be.blotName="list-container";Be.tagName="OL";var be=class extends I{static create(t){let e=super.create();return e.setAttribute("data-list",t),e}static formats(t){return t.getAttribute("data-list")||void 0}static register(){d.register(Be)}constructor(t,e){super(t,e);let s=e.ownerDocument.createElement("span"),i=n=>{if(!t.isEnabled())return;let o=this.statics.formats(e,t);o==="checked"?(this.format("list","unchecked"),n.preventDefault()):o==="unchecked"&&(this.format("list","checked"),n.preventDefault())};s.addEventListener("mousedown",i),s.addEventListener("touchstart",i),this.attachUI(s)}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-list",e):super.format(t,e)}};be.blotName="list";be.tagName="LI";Be.allowedChildren=[be];be.requiredContainer=Be;var To=class extends Q{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(t){super.optimize(t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}},xr=To;var No=class extends xr{static blotName="italic";static tagName=["EM","I"]},kf=No;var Qt=class extends Q{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(t){let e=super.create(t);return e.setAttribute("href",this.sanitize(t)),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e}static formats(t){return t.getAttribute("href")}static sanitize(t){return Co(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}format(t,e){t!==this.statics.blotName||!e?super.format(t,e):this.domNode.setAttribute("href",this.constructor.sanitize(e))}};function Co(r,t){let e=document.createElement("a");e.href=r;let s=e.href.slice(0,e.href.indexOf(":"));return t.indexOf(s)>-1}var Lo=class extends Q{static blotName="script";static tagName=["SUB","SUP"];static create(t){return t==="super"?document.createElement("sup"):t==="sub"?document.createElement("sub"):super.create(t)}static formats(t){if(t.tagName==="SUB")return"sub";if(t.tagName==="SUP")return"super"}},Rf=Lo;var Oo=class extends xr{static blotName="strike";static tagName=["S","STRIKE"]},Mf=Oo;var Io=class extends Q{static blotName="underline";static tagName="U"},Bf=Io;var _o=class extends mr{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(t){if(window.katex==null)throw new Error("Formula module requires KaTeX.");let e=super.create(t);return typeof t=="string"&&(window.katex.render(t,e,{throwOnError:!1,errorColor:"#f00"}),e.setAttribute("data-value",t)),e}static value(t){return t.getAttribute("data-value")}html(){let{formula:t}=this.value();return`<span>${t}</span>`}},Df=_o;var jf=["alt","height","width"],qo=class extends D{static blotName="image";static tagName="IMG";static create(t){let e=super.create(t);return typeof t=="string"&&e.setAttribute("src",this.sanitize(t)),e}static formats(t){return jf.reduce((e,s)=>(t.hasAttribute(s)&&(e[s]=t.getAttribute(s)),e),{})}static match(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}static sanitize(t){return Co(t,["http","https","data"])?t:"//:0"}static value(t){return t.getAttribute("src")}format(t,e){jf.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}},Pf=qo;var zf=["height","width"],ko=class extends K{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(t){let e=super.create(t);return e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen","true"),e.setAttribute("src",this.sanitize(t)),e}static formats(t){return zf.reduce((e,s)=>(t.hasAttribute(s)&&(e[s]=t.getAttribute(s)),e),{})}static sanitize(t){return Qt.sanitize(t)}static value(t){return t.getAttribute("src")}format(t,e){zf.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}html(){let{video:t}=this.value();return`<a href="${t}">${t}</a>`}},Uf=ko;var Ni=rt(ft(),1);var as=new H("code-token","hljs",{scope:y.INLINE}),Xt=class r extends Q{static formats(t,e){for(;t!=null&&t!==e.domNode;){if(t.classList&&t.classList.contains($.className))return super.formats(t,e);t=t.parentNode}}constructor(t,e,s){super(t,e,s),as.add(this.domNode,s)}format(t,e){t!==r.blotName?super.format(t,e):e?as.add(this.domNode,e):(as.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),as.value(this.domNode)||this.unwrap()}};Xt.blotName="code-token";Xt.className="ql-token";var pt=class extends ${static create(t){let e=super.create(t);return typeof t=="string"&&e.setAttribute("data-language",t),e}static formats(t){return t.getAttribute("data-language")||"plain"}static register(){}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-language",e):super.format(t,e)}replaceWith(t,e){return this.formatAt(0,this.length(),Xt.blotName,!1),super.replaceWith(t,e)}},De=class extends Rt{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(t,e){t===pt.blotName&&(this.forceNext=!0,this.children.forEach(s=>{s.format(t,e)}))}formatAt(t,e,s,i){s===pt.blotName&&(this.forceNext=!0),super.formatAt(t,e,s,i)}highlight(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;let i=`${Array.from(this.domNode.childNodes).filter(o=>o!==this.uiNode).map(o=>o.textContent).join(`
`)}
`,n=pt.formats(this.children.head.domNode);if(e||this.forceNext||this.cachedText!==i){if(i.trim().length>0||this.cachedText==null){let o=this.children.reduce((l,c)=>l.concat(Pn(c,!1)),new Ni.default),a=t(i,n);o.diff(a).reduce((l,c)=>{let{retain:u,attributes:f}=c;return u?(f&&Object.keys(f).forEach(h=>{[pt.blotName,Xt.blotName].includes(h)&&this.formatAt(l,u,h,f[h])}),l+u):l},0)}this.cachedText=i,this.forceNext=!1}}html(t,e){let[s]=this.children.find(t);return`<pre data-language="${s?pt.formats(s.domNode):"plain"}">
${Re(this.code(t,e))}
</pre>`}optimize(t){if(super.optimize(t),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){let e=pt.formats(this.children.head.domNode);e!==this.uiNode.value&&(this.uiNode.value=e)}}};De.allowedChildren=[pt];pt.requiredContainer=De;pt.allowedChildren=[Xt,de,z,J];var dv=(r,t,e)=>{if(typeof r.versionString=="string"){let s=r.versionString.split(".")[0];if(parseInt(s,10)>=11)return r.highlight(e,{language:t}).value}return r.highlight(t,e).value},ls=class extends P{static register(){d.register(Xt,!0),d.register(pt,!0),d.register(De,!0)}constructor(t,e){if(super(t,e),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((s,i)=>{let{key:n}=i;return s[n]=!0,s},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(d.events.SCROLL_BLOT_MOUNT,t=>{if(!(t instanceof De))return;let e=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(s=>{let{key:i,label:n}=s,o=e.ownerDocument.createElement("option");o.textContent=n,o.setAttribute("value",i),e.appendChild(o)}),e.addEventListener("change",()=>{t.format(pt.blotName,e.value),this.quill.root.focus(),this.highlight(t,!0)}),t.uiNode==null&&(t.attachUI(e),t.children.head&&(e.value=pt.formats(t.children.head.domNode)))})}initTimer(){let t=null;this.quill.on(d.events.SCROLL_OPTIMIZE,()=>{t&&clearTimeout(t),t=setTimeout(()=>{this.highlight(),t=null},this.options.interval)})}highlight(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(d.sources.USER);let s=this.quill.getSelection();(t==null?this.quill.scroll.descendants(De):[t]).forEach(n=>{n.highlight(this.highlightBlot,e)}),this.quill.update(d.sources.SILENT),s!=null&&this.quill.setSelection(s,d.sources.SILENT)}highlightBlot(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(e=this.languages[e]?e:"plain",e==="plain")return Re(t).split(`
`).reduce((i,n,o)=>(o!==0&&i.insert(`
`,{[$.blotName]:e}),i.insert(n)),new Ni.default);let s=this.quill.root.ownerDocument.createElement("div");return s.classList.add($.className),s.innerHTML=dv(this.options.hljs,e,t),Ei(this.quill.scroll,s,[(i,n)=>{let o=as.value(i);return o?n.compose(new Ni.default().retain(n.length(),{[Xt.blotName]:o})):n}],[(i,n)=>i.data.split(`
`).reduce((o,a,l)=>(l!==0&&o.insert(`
`,{[$.blotName]:e}),o.insert(a)),n)],new WeakMap)}};ls.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};var Hf=rt(ft(),1);var St=class r extends I{static blotName="table";static tagName="TD";static create(t){let e=super.create();return t?e.setAttribute("data-row",t):e.setAttribute("data-row",Ci()),e}static formats(t){if(t.hasAttribute("data-row"))return t.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(t,e){t===r.blotName&&e?this.domNode.setAttribute("data-row",e):super.format(t,e)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}},Mt=class extends Et{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){let t=this.children.head.formats(),e=this.children.tail.formats(),s=this.next.children.head.formats(),i=this.next.children.tail.formats();return t.table===e.table&&t.table===s.table&&t.table===i.table}return!1}optimize(t){super.optimize(t),this.children.forEach(e=>{if(e.next==null)return;let s=e.formats(),i=e.next.formats();if(s.table!==i.table){let n=this.splitAfter(e);n&&n.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}},Lt=class extends Et{static blotName="table-body";static tagName="TBODY"},je=class extends Et{static blotName="table-container";static tagName="TABLE";balanceCells(){let t=this.descendants(Mt),e=t.reduce((s,i)=>Math.max(i.children.length,s),0);t.forEach(s=>{new Array(e-s.children.length).fill(0).forEach(()=>{let i;s.children.head!=null&&(i=St.formats(s.children.head.domNode));let n=this.scroll.create(St.blotName,i);s.appendChild(n),n.optimize()})})}cells(t){return this.rows().map(e=>e.children.at(t))}deleteColumn(t){let[e]=this.descendant(Lt);e==null||e.children.head==null||e.children.forEach(s=>{let i=s.children.at(t);i?.remove()})}insertColumn(t){let[e]=this.descendant(Lt);e==null||e.children.head==null||e.children.forEach(s=>{let i=s.children.at(t),n=St.formats(s.children.head.domNode),o=this.scroll.create(St.blotName,n);s.insertBefore(o,i)})}insertRow(t){let[e]=this.descendant(Lt);if(e==null||e.children.head==null)return;let s=Ci(),i=this.scroll.create(Mt.blotName);e.children.head.children.forEach(()=>{let o=this.scroll.create(St.blotName,s);i.appendChild(o)});let n=e.children.at(t);e.insertBefore(i,n)}rows(){let t=this.children.head;return t==null?[]:t.children.map(e=>e)}};je.allowedChildren=[Lt];Lt.requiredContainer=je;Lt.allowedChildren=[Mt];Mt.requiredContainer=Lt;Mt.allowedChildren=[St];St.requiredContainer=Mt;function Ci(){return`row-${Math.random().toString(36).slice(2,6)}`}var Ro=class extends P{static register(){d.register(St),d.register(Mt),d.register(Lt),d.register(je)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(je).forEach(t=>{t.balanceCells()})}deleteColumn(){let[t,,e]=this.getTable();e!=null&&(t.deleteColumn(e.cellOffset()),this.quill.update(d.sources.USER))}deleteRow(){let[,t]=this.getTable();t!=null&&(t.remove(),this.quill.update(d.sources.USER))}deleteTable(){let[t]=this.getTable();if(t==null)return;let e=t.offset();t.remove(),this.quill.update(d.sources.USER),this.quill.setSelection(e,d.sources.SILENT)}getTable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(t==null)return[null,null,null,-1];let[e,s]=this.quill.getLine(t.index);if(e==null||e.statics.blotName!==St.blotName)return[null,null,null,-1];let i=e.parent;return[i.parent.parent,i,e,s]}insertColumn(t){let e=this.quill.getSelection();if(!e)return;let[s,i,n]=this.getTable(e);if(n==null)return;let o=n.cellOffset();s.insertColumn(o+t),this.quill.update(d.sources.USER);let a=i.rowOffset();t===0&&(a+=1),this.quill.setSelection(e.index+a,e.length,d.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(t){let e=this.quill.getSelection();if(!e)return;let[s,i,n]=this.getTable(e);if(n==null)return;let o=i.rowOffset();s.insertRow(o+t),this.quill.update(d.sources.USER),t>0?this.quill.setSelection(e,d.sources.SILENT):this.quill.setSelection(e.index+i.children.length,e.length,d.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(t,e){let s=this.quill.getSelection();if(s==null)return;let i=new Array(t).fill(0).reduce(n=>{let o=new Array(e).fill(`
`).join("");return n.insert(o,{table:Ci()})},new Hf.default().retain(s.index));this.quill.updateContents(i,d.sources.USER),this.quill.setSelection(s.index,d.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(d.events.SCROLL_OPTIMIZE,t=>{t.some(e=>["TD","TR","TBODY","TABLE"].includes(e.target.tagName)?(this.quill.once(d.events.TEXT_CHANGE,(s,i,n)=>{n===d.sources.USER&&this.balanceTables()}),!0):!1)})}},Ff=Ro;var Kf=rt(ft(),1);var $f=yt("quill:toolbar"),vr=class extends P{constructor(t,e){if(super(t,e),Array.isArray(this.options.container)){let s=document.createElement("div");s.setAttribute("role","toolbar"),pv(s,this.options.container),t.container?.parentNode?.insertBefore(s,t.container),this.container=s}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){$f.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(s=>{let i=this.options.handlers?.[s];i&&this.addHandler(s,i)}),Array.from(this.container.querySelectorAll("button, select")).forEach(s=>{this.attach(s)}),this.quill.on(d.events.EDITOR_CHANGE,()=>{let[s]=this.quill.selection.getRange();this.update(s)})}addHandler(t,e){this.handlers[t]=e}attach(t){let e=Array.from(t.classList).find(i=>i.indexOf("ql-")===0);if(!e)return;if(e=e.slice(3),t.tagName==="BUTTON"&&t.setAttribute("type","button"),this.handlers[e]==null&&this.quill.scroll.query(e)==null){$f.warn("ignoring attaching to nonexistent format",e,t);return}let s=t.tagName==="SELECT"?"change":"click";t.addEventListener(s,i=>{let n;if(t.tagName==="SELECT"){if(t.selectedIndex<0)return;let a=t.options[t.selectedIndex];a.hasAttribute("selected")?n=!1:n=a.value||!1}else t.classList.contains("ql-active")?n=!1:n=t.value||!t.hasAttribute("value"),i.preventDefault();this.quill.focus();let[o]=this.quill.selection.getRange();if(this.handlers[e]!=null)this.handlers[e].call(this,n);else if(this.quill.scroll.query(e).prototype instanceof D){if(n=prompt(`Enter ${e}`),!n)return;this.quill.updateContents(new Kf.default().retain(o.index).delete(o.length).insert({[e]:n}),d.sources.USER)}else this.quill.format(e,n,d.sources.USER);this.update(o)}),this.controls.push([e,t])}update(t){let e=t==null?{}:this.quill.getFormat(t);this.controls.forEach(s=>{let[i,n]=s;if(n.tagName==="SELECT"){let o=null;if(t==null)o=null;else if(e[i]==null)o=n.querySelector("option[selected]");else if(!Array.isArray(e[i])){let a=e[i];typeof a=="string"&&(a=a.replace(/"/g,'\\"')),o=n.querySelector(`option[value="${a}"]`)}o==null?(n.value="",n.selectedIndex=-1):o.selected=!0}else if(t==null)n.classList.remove("ql-active"),n.setAttribute("aria-pressed","false");else if(n.hasAttribute("value")){let o=e[i],a=o===n.getAttribute("value")||o!=null&&o.toString()===n.getAttribute("value")||o==null&&!n.getAttribute("value");n.classList.toggle("ql-active",a),n.setAttribute("aria-pressed",a.toString())}else{let o=e[i]!=null;n.classList.toggle("ql-active",o),n.setAttribute("aria-pressed",o.toString())}})}};vr.DEFAULTS={};function Wf(r,t,e){let s=document.createElement("button");s.setAttribute("type","button"),s.classList.add(`ql-${t}`),s.setAttribute("aria-pressed","false"),e!=null?(s.value=e,s.setAttribute("aria-label",`${t}: ${e}`)):s.setAttribute("aria-label",t),r.appendChild(s)}function pv(r,t){Array.isArray(t[0])||(t=[t]),t.forEach(e=>{let s=document.createElement("span");s.classList.add("ql-formats"),e.forEach(i=>{if(typeof i=="string")Wf(s,i);else{let n=Object.keys(i)[0],o=i[n];Array.isArray(o)?mv(s,n,o):Wf(s,n,o)}}),r.appendChild(s)})}function mv(r,t,e){let s=document.createElement("select");s.classList.add(`ql-${t}`),e.forEach(i=>{let n=document.createElement("option");i!==!1?n.setAttribute("value",String(i)):n.setAttribute("selected","selected"),s.appendChild(n)}),r.appendChild(s)}vr.DEFAULTS={container:null,handlers:{clean(){let r=this.quill.getSelection();if(r!=null)if(r.length===0){let t=this.quill.getFormat();Object.keys(t).forEach(e=>{this.quill.scroll.query(e,y.INLINE)!=null&&this.quill.format(e,!1,d.sources.USER)})}else this.quill.removeFormat(r.index,r.length,d.sources.USER)},direction(r){let{align:t}=this.quill.getFormat();r==="rtl"&&t==null?this.quill.format("align","right",d.sources.USER):!r&&t==="right"&&this.quill.format("align",!1,d.sources.USER),this.quill.format("direction",r,d.sources.USER)},indent(r){let t=this.quill.getSelection(),e=this.quill.getFormat(t),s=parseInt(e.indent||0,10);if(r==="+1"||r==="-1"){let i=r==="+1"?1:-1;e.direction==="rtl"&&(i*=-1),this.quill.format("indent",s+i,d.sources.USER)}},link(r){r===!0&&(r=prompt("Enter link URL:")),this.quill.format("link",r,d.sources.USER)},list(r){let t=this.quill.getSelection(),e=this.quill.getFormat(t);r==="check"?e.list==="checked"||e.list==="unchecked"?this.quill.format("list",!1,d.sources.USER):this.quill.format("list","unchecked",d.sources.USER):this.quill.format("list",r,d.sources.USER)}}};var gv='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',bv='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',yv='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',xv='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',vv='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',wv='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',Ev='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',Av='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',Vf='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',Sv='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',Tv='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',Nv='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',Cv='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',Lv='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',Ov='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',Iv='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',_v='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',qv='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',kv='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',Rv='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',Mv='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',Bv='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',Dv='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',jv='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',Pv='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',zv='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',Uv='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',Hv='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',Fv='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',$v='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',Wv='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',Kv='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',Vv='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',ye={align:{"":gv,center:bv,right:yv,justify:xv},background:vv,blockquote:wv,bold:Ev,clean:Av,code:Vf,"code-block":Vf,color:Sv,direction:{"":Tv,rtl:Nv},formula:Cv,header:{1:Lv,2:Ov,3:Iv,4:_v,5:qv,6:kv},italic:Rv,image:Mv,indent:{"+1":Bv,"-1":Dv},link:jv,list:{bullet:Pv,check:zv,ordered:Uv},script:{sub:Hv,super:Fv},strike:$v,table:Wv,underline:Kv,video:Vv};var Gv='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>',Gf=0;function Zf(r,t){r.setAttribute(t,`${r.getAttribute(t)!=="true"}`)}var Mo=class{constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",e=>{switch(e.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),e.preventDefault();break;default:}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),Zf(this.label,"aria-expanded"),Zf(this.options,"aria-hidden")}buildItem(t){let e=document.createElement("span");e.tabIndex="0",e.setAttribute("role","button"),e.classList.add("ql-picker-item");let s=t.getAttribute("value");return s&&e.setAttribute("data-value",s),t.textContent&&e.setAttribute("data-label",t.textContent),e.addEventListener("click",()=>{this.selectItem(e,!0)}),e.addEventListener("keydown",i=>{switch(i.key){case"Enter":this.selectItem(e,!0),i.preventDefault();break;case"Escape":this.escape(),i.preventDefault();break;default:}}),e}buildLabel(){let t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=Gv,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){let t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id=`ql-picker-options-${Gf}`,Gf+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach(e=>{let s=this.buildItem(e);t.appendChild(s),e.selected===!0&&this.selectItem(s)}),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach(t=>{this.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=this.container.querySelector(".ql-selected");t!==s&&(s?.classList.remove("ql-selected"),t!=null&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){let s=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(s)}else this.selectItem(null);let e=t!=null&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}},xe=Mo;var Bo=class extends xe{constructor(t,e){super(t),this.label.innerHTML=e,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(s=>{s.classList.add("ql-primary")})}buildItem(t){let e=super.buildItem(t);return e.style.backgroundColor=t.getAttribute("value")||"",e}selectItem(t,e){super.selectItem(t,e);let s=this.label.querySelector(".ql-color-label"),i=t&&t.getAttribute("data-value")||"";s&&(s.tagName==="line"?s.style.stroke=i:s.style.fill=i)}},Li=Bo;var Do=class extends xe{constructor(t,e){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(s=>{s.innerHTML=e[s.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,e){super.selectItem(t,e);let s=t||this.defaultItem;if(s!=null){if(this.label.innerHTML===s.innerHTML)return;this.label.innerHTML=s.innerHTML}}},Oi=Do;var Zv=r=>{let{overflowY:t}=getComputedStyle(r,null);return t!=="visible"&&t!=="clip"},jo=class{constructor(t,e){this.quill=t,this.boundsContainer=e||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,Zv(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){let e=t.left+t.width/2-this.root.offsetWidth/2,s=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${e}px`,this.root.style.top=`${s}px`,this.root.classList.remove("ql-flip");let i=this.boundsContainer.getBoundingClientRect(),n=this.root.getBoundingClientRect(),o=0;if(n.right>i.right&&(o=i.right-n.right,this.root.style.left=`${e+o}px`),n.left<i.left&&(o=i.left-n.left,this.root.style.left=`${e+o}px`),n.bottom>i.bottom){let a=n.bottom-n.top,l=t.bottom-t.top+a;this.root.style.top=`${s-l}px`,this.root.classList.add("ql-flip")}return o}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}},Ii=jo;var Jv=[!1,"center","right","justify"],Qv=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Xv=[!1,"serif","monospace"],Yv=["1","2","3",!1],t2=["small",!1,"large","huge"],Yt=class extends gr{constructor(t,e){super(t,e);let s=i=>{if(!document.body.contains(t.root)){document.body.removeEventListener("click",s);return}this.tooltip!=null&&!this.tooltip.root.contains(i.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(n=>{n.container.contains(i.target)||n.close()})};t.emitter.listenDOM("click",document.body,s)}addModule(t){let e=super.addModule(t);return t==="toolbar"&&this.extendToolbar(e),e}buildButtons(t,e){Array.from(t).forEach(s=>{(s.getAttribute("class")||"").split(/\s+/).forEach(n=>{if(n.startsWith("ql-")&&(n=n.slice(3),e[n]!=null))if(n==="direction")s.innerHTML=e[n][""]+e[n].rtl;else if(typeof e[n]=="string")s.innerHTML=e[n];else{let o=s.value||"";o!=null&&e[n][o]&&(s.innerHTML=e[n][o])}})})}buildPickers(t,e){this.pickers=Array.from(t).map(i=>{if(i.classList.contains("ql-align")&&(i.querySelector("option")==null&&cs(i,Jv),typeof e.align=="object"))return new Oi(i,e.align);if(i.classList.contains("ql-background")||i.classList.contains("ql-color")){let n=i.classList.contains("ql-background")?"background":"color";return i.querySelector("option")==null&&cs(i,Qv,n==="background"?"#ffffff":"#000000"),new Li(i,e[n])}return i.querySelector("option")==null&&(i.classList.contains("ql-font")?cs(i,Xv):i.classList.contains("ql-header")?cs(i,Yv):i.classList.contains("ql-size")&&cs(i,t2)),new xe(i)});let s=()=>{this.pickers.forEach(i=>{i.update()})};this.quill.on(v.events.EDITOR_CHANGE,s)}};Yt.DEFAULTS=lt({},gr.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let r=this.container.querySelector("input.ql-image[type=file]");r==null&&(r=document.createElement("input"),r.setAttribute("type","file"),r.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),r.classList.add("ql-image"),r.addEventListener("change",()=>{let t=this.quill.getSelection(!0);this.quill.uploader.upload(t,r.files),r.value=""}),this.container.appendChild(r)),r.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});var wr=class extends Ii{constructor(t,e){super(t,e),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",t=>{t.key==="Enter"?(this.save(),t.preventDefault()):t.key==="Escape"&&(this.cancel(),t.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;e!=null?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");let s=this.quill.getBounds(this.quill.selection.savedRange);s!=null&&this.position(s),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||""),this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{let{scrollTop:e}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,v.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,v.sources.USER)),this.quill.root.scrollTop=e;break}case"video":t=e2(t);case"formula":{if(!t)break;let e=this.quill.getSelection(!0);if(e!=null){let s=e.index+e.length;this.quill.insertEmbed(s,this.root.getAttribute("data-mode"),t,v.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(s+1," ",v.sources.USER),this.quill.setSelection(s+2,v.sources.USER)}break}default:}this.textbox.value="",this.hide()}};function e2(r){let t=r.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||r.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?`${t[1]||"https"}://www.youtube.com/embed/${t[2]}?showinfo=0`:(t=r.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${t[1]||"https"}://player.vimeo.com/video/${t[2]}/`:r}function cs(r,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;t.forEach(s=>{let i=document.createElement("option");s===e?i.setAttribute("selected","selected"):i.setAttribute("value",String(s)),r.appendChild(i)})}var r2=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],Po=class extends wr{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(t,e){super(t,e),this.quill.on(v.events.EDITOR_CHANGE,(s,i,n,o)=>{if(s===v.events.SELECTION_CHANGE)if(i!=null&&i.length>0&&o===v.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;let a=this.quill.getLines(i.index,i.length);if(a.length===1){let l=this.quill.getBounds(i);l!=null&&this.position(l)}else{let l=a[a.length-1],c=this.quill.getIndex(l),u=Math.min(l.length()-1,i.index+i.length-c),f=this.quill.getBounds(new ot(c,u));f!=null&&this.position(f)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(v.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;let t=this.quill.getSelection();if(t!=null){let e=this.quill.getBounds(t);e!=null&&this.position(e)}},1)})}cancel(){this.show()}position(t){let e=super.position(t),s=this.root.querySelector(".ql-tooltip-arrow");return s.style.marginLeft="",e!==0&&(s.style.marginLeft=`${-1*e-s.offsetWidth/2}px`),e}},us=class extends Yt{constructor(t,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=r2),super(t,e),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new Po(this.quill,this.options.bounds),t.container!=null&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),ye),this.buildPickers(t.container.querySelectorAll("select"),ye))}};us.DEFAULTS=lt({},Yt.DEFAULTS,{modules:{toolbar:{handlers:{link(r){r?this.quill.theme.tooltip.edit():this.quill.format("link",!1,d.sources.USER)}}}}});var s2=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],zo=class extends wr{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",t=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),t.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",t=>{if(this.linkRange!=null){let e=this.linkRange;this.restoreFocus(),this.quill.formatText(e,"link",!1,v.sources.USER),delete this.linkRange}t.preventDefault(),this.hide()}),this.quill.on(v.events.SELECTION_CHANGE,(t,e,s)=>{if(t!=null){if(t.length===0&&s===v.sources.USER){let[i,n]=this.quill.scroll.descendant(Qt,t.index);if(i!=null){this.linkRange=new ot(t.index-n,i.length());let o=Qt.formats(i.domNode);this.preview.textContent=o,this.preview.setAttribute("href",o),this.show();let a=this.quill.getBounds(this.linkRange);a!=null&&this.position(a);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}},_i=class extends Yt{constructor(t,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=s2),super(t,e),this.quill.container.classList.add("ql-snow")}extendToolbar(t){t.container!=null&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),ye),this.buildPickers(t.container.querySelectorAll("select"),ye),this.tooltip=new zo(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(e,s)=>{t.handlers.link.call(t,!s.format.link)}))}};_i.DEFAULTS=lt({},Yt.DEFAULTS,{modules:{toolbar:{handlers:{link(r){if(r){let t=this.quill.getSelection();if(t==null||t.length===0)return;let e=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(e)&&e.indexOf("mailto:")!==0&&(e=`mailto:${e}`);let{tooltip:s}=this.quill.theme;s.edit("link",e)}else this.quill.format("link",!1,d.sources.USER)}}}}});var Jf=_i;Ti.register({"attributors/attribute/direction":mi,"attributors/class/align":lo,"attributors/class/background":mf,"attributors/class/color":pf,"attributors/class/direction":uo,"attributors/class/font":ho,"attributors/class/size":po,"attributors/style/align":pi,"attributors/style/background":ss,"attributors/style/color":rs,"attributors/style/direction":gi,"attributors/style/font":bi,"attributors/style/size":yi},!0);Ti.register({"formats/align":lo,"formats/direction":uo,"formats/indent":If,"formats/background":ss,"formats/color":rs,"formats/font":ho,"formats/size":po,"formats/blockquote":_f,"formats/code-block":$,"formats/header":qf,"formats/list":be,"formats/bold":xr,"formats/code":yr,"formats/italic":kf,"formats/link":Qt,"formats/script":Rf,"formats/strike":Mf,"formats/underline":Bf,"formats/formula":Df,"formats/image":Pf,"formats/video":Uf,"modules/syntax":ls,"modules/table":Ff,"modules/toolbar":vr,"themes/bubble":us,"themes/snow":Jf,"ui/icons":ye,"ui/picker":xe,"ui/icon-picker":Oi,"ui/color-picker":Li,"ui/tooltip":Ii},!0);var B=Ti;var mt=class{formatter;toolbarButtons=[];constructor(t){this.formatter=t}onCreate(){}onDestroy(){}onUpdate(){}};var uC=B.import("blots/inline"),i2=B.import("parchment"),{ClassAttributor:Qf,Scope:Xf}=i2,Uo=class extends Qf{constructor(){super("iframeAlign","ql-iframe-align",{scope:Xf.BLOCK,whitelist:["left","center","right"]})}add(t,e){if(t instanceof HTMLElement){typeof e=="object"?(super.add(t,e.align),t.dataset.blotAlign=e.align):(super.add(t,e),t.dataset.blotAlign=e);let s=t.getAttribute("width");return s?(isNaN(Number(s.trim().slice(-1)))||(s=`${s}px`),t.style.setProperty("--resize-width",s),t.dataset.relativeSize=`${s.endsWith("%")}`):(t.style.removeProperty("--resize-width"),t.dataset.relativeSize="false"),!0}else return!1}remove(t){t instanceof HTMLElement&&(super.remove(t),delete t.dataset.blotAlign)}value(t){let e=super.value(t),s=t instanceof HTMLElement&&(t.style.getPropertyValue("--resize-width")||t.getAttribute("width"))||"";return{align:e,width:s,relativeSize:`${s.endsWith("%")}`}}},fs=new Uo,Ho=class extends Qf{static tagName="SPAN";constructor(){super("imageAlign","ql-image-align",{scope:Xf.INLINE,whitelist:["left","center","right"]})}add(t,e){if(t instanceof HTMLSpanElement&&e){let s=t.querySelector("img");if(typeof e=="object"&&e.align)super.add(t,e.align),t.setAttribute("contenteditable","false"),e.title?t.setAttribute("data-title",e.title):t.removeAttribute("data-title"),e.align&&(s.dataset.blotAlign=e.align);else if(typeof e=="string")super.add(t,e),s.dataset.blotAlign=e;else return!1;let i=this.getImageWidth(s);return t.setAttribute("data-relative-size",`${i?.endsWith("%")}`),!0}else{let s=t.querySelector("img");if(s instanceof HTMLImageElement){let i=B.find(s);return i&&(t.firstChild instanceof HTMLSpanElement||!s.parentElement?.matches('span[class^="ql-image-align-"]'))&&i.format("imageAlign",e),!0}return!1}}remove(t){t instanceof HTMLElement&&(super.remove(t),t.firstChild&&t.firstChild instanceof HTMLElement&&delete t.firstChild.dataset.blotAlign)}value(t){let e=t.querySelector("img"),s=e.parentElement,i=super.value(s),n=e.getAttribute("title")||"",o=e.getAttribute("width")||"";return parseFloat(o)||(e.complete?o=this.getImageWidth(e):e.onload=a=>{o=this.getImageWidth(a.target)}),{align:i,title:n,width:o,contenteditable:"false",relativeSize:`${o.endsWith("%")}`}}getImageWidth=t=>{let e=t.getAttribute("width");return e?isNaN(Number(e.trim().slice(-1)))||(e=`${e}px`,t.setAttribute("width",e)):(e=`${t.naturalWidth}px`,t.setAttribute("width",e)),t.parentElement.style.setProperty("--resize-width",e),e}},te=new Ho;B.register({"formats/imageAlign":te,"attributors/class/imageAlign":te,"formats/iframeAlign":fs,"attributors/class/iframeAlign":fs},!0);var n2=B.import("parchment"),{Scope:ve}=n2,Er=class{alignments={};options;formatter;constructor(t){this.formatter=t,this.options=t.options,this.options.align.alignments.forEach(e=>{this.alignments[e]={name:e,apply:s=>{this.setAlignment(s,e)}}})}getAlignments(){return Object.keys(this.alignments).map(t=>this.alignments[t])}clear(t){t!=null&&(t.domNode.tagName==="IMG"?t.parent!==null&&t.parent.domNode.tagName==="SPAN"&&t.parent.format(te.attrName,!1):t.domNode.tagName==="IFRAME"&&t.format(fs.attrName,!1))}isInlineBlot(t){return(t.statics?.scope&ve.INLINE)===ve.INLINE_BLOT}isBlockBlot(t){return(t.statics?.scope&ve.BLOCK)===ve.BLOCK_BLOT}hasInlineScope(t){return(t.statics.scope&ve.INLINE)===ve.INLINE}hasBlockScope(t){return(t.statics.scope&ve.BLOCK)===ve.BLOCK}isAligned(t,e){let s=this.getAlignment(t);return e?s===e.name:!!s}getAlignment(t){return t.domNode.dataset.blotAlign}setAlignment(t,e){if(t!=null){let s=this.isAligned(t,this.alignments[e]);if(this.clear(t),!s)if(this.isInlineBlot(t)||this.hasInlineScope(t)){if(!t.domNode.getAttribute("width")&&this.formatter.options.resize.useRelativeSize&&!this.formatter.options.resize.allowResizeModeChange)try{let i=getComputedStyle(this.formatter.quill.root),n=this.formatter.quill.root.clientWidth-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight);t.domNode.setAttribute("width",`${Math.min(Math.round(100*t.domNode.naturalWidth/n),100)}%`)}catch{}t.format(te.attrName,{align:this.alignments[e].name,title:t.domNode.getAttribute("title")||""});try{let i=this.formatter.quill.getContents().ops;i.length===2&&i[1].insert===`
`&&this.formatter.quill.insertText(this.formatter.quill.getLength(),`
`,"user")}catch{}}else(this.isBlockBlot(t)||this.hasBlockScope(t))&&t.format(fs.attrName,this.alignments[e].name)}}};var Tt=class{action;icon;onClick;options;element=null;initialVisibility=!0;constructor(t,e,s){this.action=t,this.icon=s.icons[t],this.onClick=e,this.options=s}create(){return this.element=document.createElement("span"),this.element.innerHTML=this.icon,this.element.className=this.options.buttonClassName,this.styleButton(),this.element.dataset.action=this.action,this.selected=this.preselect(),this.element.onclick=this.onClick,this.visible=this.initialVisibility,this.element}destroy(){this.element&&(this.element.onclick=null,this.element.remove(),this.element=null)}preselect(){return!1}get selected(){return this.element?.dataset.selected==="true"}set selected(t){this.element&&(this.element.dataset.selected=`${t}`,t?this.element.style.setProperty("filter","invert(20%)"):this.element.style.removeProperty("filter"))}get visible(){return this.element?.style.display!=="none"}set visible(t){this.element&&(typeof t=="boolean"&&(t=t?"inline-block":"none"),this.element.style.display=t)}styleButton(){if(this.element&&(this.options.buttonStyle&&Object.assign(this.element.style,this.options.buttonStyle),this.options.svgStyle)){let t=this.element.children[0];t&&Object.assign(t.style,this.options.svgStyle)}}};var Ar=class extends mt{aligner;alignButtons={};constructor(t){super(t),this.aligner=new Er(t)}createAlignmentButtons(){for(let e of Object.values(this.aligner.alignments))this.alignButtons[e.name]=new Tt(e.name,this.onClickHandler,this.formatter.options.toolbar);let t=this.formatter.currentSpec?.getTargetBlot();if(t){let e=this.aligner.getAlignment(t);e&&this.alignButtons[e]&&(this.alignButtons[e].preselect=()=>!0)}}clearButtons(){for(let t of Object.values(this.alignButtons))t.selected=!1}onClickHandler=t=>{let e=t.target.closest(`span.${this.formatter.options.toolbar.buttonClassName}`);if(e){let s=e.dataset.action||"",i=this.formatter.currentSpec?.getTargetBlot();if(s&&i){let n=this.aligner.alignments[s];this.clearButtons(),this.aligner.isAligned(i,n)?this.aligner.clear(i):(this.aligner.setAlignment(i,s),this.alignButtons[s].selected=!0)}}this.formatter.update()};onCreate(){this.createAlignmentButtons(),this.toolbarButtons=Object.values(this.alignButtons)}onDestroy(){this.alignButtons={},this.toolbarButtons=[]}};var Sr=class extends mt{topLeftHandle;topRightHandle;bottomRightHandle;bottomLeftHandle;dragHandle=null;dragStartX=0;dragCursorStyle;preDragWidth=0;pinchStartDistance=0;calculatedAspectRatio=0;computedAspectRatio=void 0;target;editorStyle;editorWidth=0;useRelativeSize;resizeModeButton=null;isUnclickable=!1;hasResized=!1;formattedWidth="";sizeInfoTimerId=null;isImage=!1;isSVG=!1;naturalWidth=void 0;constructor(t){super(t),this.topLeftHandle=this.createHandle("top-left","nwse-resize"),this.topRightHandle=this.createHandle("top-right","nesw-resize"),this.bottomRightHandle=this.createHandle("bottom-right","nwse-resize"),this.bottomLeftHandle=this.createHandle("bottom-left","nesw-resize"),this.dragCursorStyle=document.createElement("style"),this.useRelativeSize=this.formatter.options.resize.useRelativeSize,t.options.resize.allowResizeModeChange&&(this.resizeModeButton=this.createResizeModeButton(),this.toolbarButtons=[this.resizeModeButton])}onCreate(){this.target=this.formatter.currentSpec?.getTargetElement(),this.isUnclickable=this.formatter.currentSpec?.isUnclickable||!1,this.isImage=this.target instanceof HTMLImageElement,this.isImage&&(this.isSVG=this.isSvgImage()),this.formatter.overlay.appendChild(this.topLeftHandle),this.formatter.overlay.appendChild(this.topRightHandle),this.formatter.overlay.appendChild(this.bottomRightHandle),this.formatter.overlay.appendChild(this.bottomLeftHandle),this.formatter.overlay.addEventListener("mousedown",this.onOverlayMouseDown),this.formatter.overlay.addEventListener("mouseup",this.onOverlayMouseUp),this.formatter.overlay.addEventListener("touchstart",this.onOverlayTouchStart,{passive:!1}),this.formatter.overlay.addEventListener("touchmove",this.onOverlayTouchMove,{passive:!1}),this.formatter.overlay.addEventListener("touchend",this.onOverlayTouchEnd,{passive:!1});let t=this.formatter.options.resize.handleStyle||{};this.repositionHandles(t)}onDestroy(){this.target=null,this.isUnclickable=!1,this.isImage=!1,this.naturalWidth=void 0,this.isSVG=!1,this.setCursor(""),this.formatter.overlay.removeChild(this.topLeftHandle),this.formatter.overlay.removeChild(this.topRightHandle),this.formatter.overlay.removeChild(this.bottomRightHandle),this.formatter.overlay.removeChild(this.bottomLeftHandle),this.formatter.overlay.removeEventListener("mousedown",this.onOverlayMouseDown),this.formatter.overlay.removeEventListener("mouseup",this.onOverlayMouseUp),this.formatter.overlay.removeEventListener("touchstart",this.onOverlayTouchStart,{passive:!1}),this.formatter.overlay.removeEventListener("touchmove",this.onOverlayTouchMove,{passive:!1}),this.formatter.overlay.removeEventListener("touchend",this.onOverlayTouchEnd,{passive:!1}),this.formatter.update()}createHandle(t,e){let s=document.createElement("div");return s.classList.add(this.formatter.options.resize.handleClassName),s.setAttribute("data-position",t),s.style.cursor=e,this.formatter.options.resize.handleStyle&&Object.assign(s.style,this.formatter.options.resize.handleStyle),s.addEventListener("pointerdown",this.onHandlePointerDown),s}repositionHandles(t){let e="0px",s="0px";t&&(t.width&&(e=`${-parseFloat(t.width)/2}px`),t.height&&(s=`${-parseFloat(t.height)/2}px`)),Object.assign(this.topLeftHandle.style,{left:e,top:s}),Object.assign(this.topRightHandle.style,{right:e,top:s}),Object.assign(this.bottomRightHandle.style,{right:e,bottom:s}),Object.assign(this.bottomLeftHandle.style,{left:e,bottom:s})}setCursor(t){if(document.body)if(t)this.dragCursorStyle.innerHTML=`body, body * { cursor: ${t} !important; }`,document.head.appendChild(this.dragCursorStyle);else try{document.head.removeChild(this.dragCursorStyle)}catch{}}resizeMode=t=>{if(t){if(this.hasResized=!1,this.formattedWidth="",this.target){this.useRelativeSize=this.formatter.useRelative(this.target),this.editorStyle=getComputedStyle(this.formatter.quill.root),this.editorWidth=this.formatter.quill.root.clientWidth-parseFloat(this.editorStyle.paddingLeft)-parseFloat(this.editorStyle.paddingRight);let e=this.target.getBoundingClientRect();if((e.height===void 0||e.height===0)&&(e.height=this.target.clientHeight+1),this.preDragWidth=e.width,this.computedAspectRatio=getComputedStyle(this.target).aspectRatio||"auto",this.calculatedAspectRatio=e.width/e.height,this.useRelativeSize)this.isUnclickable&&this.computedAspectRatio==="auto"&&(this.target.style.aspectRatio=this.formatter.options.video.defaultAspectRatio,console.warn(`No iframe aspect-ratio set. Set an aspect ratio either via custom blot or css.
Using temporary aspect ratio "${this.formatter.options.video.defaultAspectRatio}"`));else if(this.isUnclickable&&this.computedAspectRatio!=="auto"){let s=this.computedAspectRatio.match(/(\d+)\s*\/\s*(\d+)/);if(s)try{this.calculatedAspectRatio=parseFloat(s[1])/parseFloat(s[2])}catch{}}this.isImage&&!this.useRelativeSize&&!this.isSVG&&this.formatter.options.resize.imageOversizeProtection&&(this.naturalWidth=this.target.naturalWidth),this.showSizeInfo(!0,e.width,e.height)}}else{if(this.target&&this.hasResized){let e=this.roundDimension(this.formattedWidth);this.target.setAttribute("width",e),this.formatter.toolbar.buttons.resizeMode&&(this.formatter.toolbar.buttons.resizeMode.selected=this.isRelative),this.isUnclickable?(this.target.style.setProperty("--resize-width",`${e}`),this.target.dataset.relativeSize=`${this.isRelative}`):this.isAligned&&this.target.parentElement&&(this.target.parentElement.style.setProperty("--resize-width",`${e}`),this.target.parentElement.dataset.relativeSize=`${this.isRelative}`)}this.naturalWidth=void 0,this.formatter.update(),this.showSizeInfo(!1)}};onHandlePointerDown=t=>{this.resizeMode(!0),t.target instanceof HTMLElement&&this.target&&(this.dragHandle=t.target,this.setCursor(this.dragHandle.style.cursor),this.dragStartX=t.clientX,document.addEventListener("pointermove",this.onHandleDrag),document.addEventListener("pointerup",this.onHandlePointerUp))};onHandleDrag=t=>{if(this.target){this.hasResized=!0;let e=t.clientX-this.dragStartX,s=0;this.dragHandle===this.topLeftHandle||this.dragHandle===this.bottomLeftHandle?s=Math.round(this.preDragWidth-e):s=Math.round(this.preDragWidth+e),s=Math.max(Math.min(s,this.editorWidth),this.formatter.options.resize.minimumWidthPx),this.resizeTarget(s)}};onHandlePointerUp=()=>{this.setCursor(""),this.resizeMode(!1),document.removeEventListener("pointermove",this.onHandleDrag),document.removeEventListener("pointerup",this.onHandlePointerUp)};onOverlayTouchStart=t=>{t.target===this.formatter.overlay&&(this.resizeMode(!0),this.target&&t.touches.length===2&&(t.preventDefault(),this.pinchStartDistance=this.calculateDistance(t.touches[0],t.touches[1]),this.preDragWidth=this.target.clientWidth))};onOverlayTouchMove=t=>{if(t.target===this.formatter.overlay&&this.target&&t.touches.length===2&&this.pinchStartDistance!==null&&this.preDragWidth!==null&&(t.preventDefault(),this.target)){this.hasResized=!0;let s=this.calculateDistance(t.touches[0],t.touches[1])/this.pinchStartDistance,i=Math.round(this.preDragWidth*s);i=Math.max(Math.min(i,this.editorWidth),10),this.resizeTarget(i)}};onOverlayTouchEnd=t=>{t.target===this.formatter.overlay&&this.resizeMode(!1)};onOverlayMouseDown=t=>{t.target===this.formatter.overlay&&this.resizeMode(!0)};onOverlayMouseUp=t=>{t.target===this.formatter.overlay&&this.resizeMode(!1)};resizeTarget(t){if(this.target){t=Math.min(this.naturalWidth??1/0,t);let e=t/this.calculatedAspectRatio;this.updateSizeInfo(t,e),this.formatter.useRelative(this.target)?this.formattedWidth=`${100*t/this.editorWidth}%`:this.formattedWidth=`${t}px`,this.target.setAttribute("width",this.formattedWidth),this.target.setAttribute("height","auto"),this.isUnclickable?(!this.useRelativeSize&&this.computedAspectRatio==="auto"&&this.target.setAttribute("height",`${t/this.calculatedAspectRatio|0}px`),this.target.style.setProperty("--resize-width",this.formattedWidth)):!this.isUnclickable&&this.isAligned&&this.target.parentElement&&this.target.parentElement.style.setProperty("--resize-width",this.formattedWidth),this.formatter.update()}}showSizeInfo(t,e=null,s=null){t?(this.cancelSizeInfoTimer(),e!==null&&s!==null&&this.updateSizeInfo(e,s),this.formatter.sizeInfo.style.transition="",this.formatter.sizeInfo.style.opacity="1"):this.closeSizeInfo()}updateSizeInfo(t,e){t=Math.round(t),e=Math.round(e);let s=`${t} x ${e}px`;if(this.isRelative)s=`${Math.round(100*t/this.editorWidth)}% (${s})`;else if(!this.hasResized){let i=this.target?.getAttribute("width");if(i){if(parseFloat(i)!==t){let n=t/e;s=`${i} x ${Math.round(parseFloat(i)/n)}px (${s})`}}else this.target instanceof HTMLImageElement&&this.target.naturalWidth!==t&&(s=`${this.target.naturalWidth} x ${this.target.naturalHeight}px (${s})`)}this.formatter.sizeInfo.innerText=s}get isRelative(){return this.target?.getAttribute("width")?.endsWith("%")||!1}get isAligned(){return this.target?this.target.hasAttribute("data-blot-align"):!1}createResizeModeButton(){let t=new Tt("resizeMode",this.onResizeModeClickHandler,this.formatter.options.toolbar);return t.preselect=()=>this.isRelative,t}onResizeModeClickHandler=t=>{t.stopImmediatePropagation(),this.swapResizeMode(!0)};swapResizeMode(t=!1){if(this.target){let e=this.target.getBoundingClientRect();this.editorStyle=getComputedStyle(this.formatter.quill.root),this.editorWidth=this.formatter.quill.root.clientWidth-parseFloat(this.editorStyle.paddingLeft)-parseFloat(this.editorStyle.paddingRight);let s;this.isRelative?s=`${Math.round(e.width)}px`:s=`${Math.round(100*e.width/this.editorWidth)}%`,this.target.setAttribute("width",`${s}`),this.target.setAttribute("height","auto"),this.formatter.currentSpec?.isUnclickable?(this.target.style.setProperty("--resize-width",`${s}`),this.target.dataset.relativeSize=`${this.isRelative}`):this.isAligned&&this.target.parentElement&&(this.target.parentElement.style.setProperty("--resize-width",`${s}`),this.target.parentElement.dataset.relativeSize=`${this.isRelative}`),this.formatter.toolbar.buttons.resizeMode.selected=this.isRelative,this.formatter.update(),t&&(this.showSizeInfo(!0,e.width,e.height),this.showSizeInfo(!1))}}closeSizeInfo(){this.sizeInfoTimerId=setTimeout(()=>{this.formatter.sizeInfo.style.transition="opacity 1s",this.formatter.sizeInfo.style.opacity="0"},1e3)}cancelSizeInfoTimer(){this.sizeInfoTimerId!==null&&(clearTimeout(this.sizeInfoTimerId),this.sizeInfoTimerId=null)}calculateDistance(t,e){let s=e.clientX-t.clientX,i=e.clientY-t.clientY;return Math.sqrt(s*s+i*i)}roundDimension(t){return t.replace(/([^0-9.-]*)(-?[\d.]+)(.*)/,(e,s,i,n)=>`${s}${Math.round(Number(i))}${n}`)}isSvgImage(){return this.target instanceof HTMLImageElement?this.target.src.startsWith("data:image/")?this.target.src.includes("image/svg+xml"):this.target.src.endsWith(".svg"):!1}};var Tr=class extends mt{onCreate(){document.addEventListener("keyup",this.onKeyUp,!0),this.formatter.quill.root.addEventListener("input",this.onKeyUp,!0)}onDestroy(){document.removeEventListener("keyup",this.onKeyUp,!0),this.formatter.quill.root.removeEventListener("input",this.onKeyUp,!0)}onKeyUp=t=>{let e=!!document.querySelector("div[data-blot-formatter-modal]");if(!(!this.formatter.currentSpec||e)&&(t.code==="Delete"||t.code==="Backspace")){let s=this.formatter.currentSpec.getTargetElement();if(s){let i=B.find(s);if(i){let n=this.formatter.quill.getIndex(i);this.formatter.quill.deleteText(n,1,"user")}}this.formatter.hide()}}};var we=class{formatter;isUnclickable=!1;constructor(t){this.formatter=t}init(){}getActions(){let t=[];return this.formatter.options.align.allowAligning&&t.push(new Ar(this.formatter)),this.formatter.options.resize.allowResizing&&t.push(new Sr(this.formatter)),this.formatter.options.delete.allowKeyboardDelete&&t.push(new Tr(this.formatter)),t}getTargetElement(){return null}getTargetBlot(){let t=this.getTargetElement();return t?B.find(t):null}getOverlayElement(){return this.getTargetElement()}setSelection(){this.formatter.quill.setSelection(null)}onHide(){}};var Nr=class extends mt{modal;targetElement=null;constructor(t){super(t),this.toolbarButtons=[new Tt("attribute",this.onClickHandler,this.formatter.options.toolbar)],this.modal=this.createModal()}onCreate(){this.targetElement=this.formatter.currentSpec?.getTargetElement()}onDestroy(){this.targetElement=null,this.modal.element.remove()}onClickHandler=()=>{this.showAltTitleModal()};showAltTitleModal(){this.targetElement&&(this.modal.altInput.value=this.targetElement.getAttribute("alt")||"",this.modal.titleInput.value=this.targetElement.getAttribute("title")||"",document.body.append(this.modal.element))}hideAltTitleModal(){this.modal.element.remove()}setAltTitle(){if(this.targetElement){let t=typeof this.modal.altInput.value=="string"?this.modal.altInput.value:"",e=this.modal.titleInput.value;this.targetElement.setAttribute("alt",t),e?this.targetElement.setAttribute("title",e):this.targetElement.removeAttribute("title");let s=B.find(this.targetElement),i=s?.parent?.formats()[te.attrName]?.align;s&&i&&(s.parent?.format(te.attrName,!1),s.format(te.attrName,{align:i,title:e}))}}createModal(){let t=Array.from(crypto.getRandomValues(new Uint8Array(5)),h=>String.fromCharCode(97+h%26)).join(""),e=document.createElement("div");e.id=`${t}-modal`,e.setAttribute("data-blot-formatter-modal","");let s=document.createElement("div"),i=document.createElement("form");i.id=`${t}-form`;let n=document.createElement("label");n.setAttribute("for","alt"),n.textContent=this.formatter.options.overlay.labels?.alt||this.formatter.options.image.altTitleModalOptions.labels.alt;let o=document.createElement("textarea");o.name="alt",o.rows=3;let a=document.createElement("label");a.setAttribute("for","title"),a.textContent=this.formatter.options.overlay.labels?.title||this.formatter.options.image.altTitleModalOptions.labels.title;let l=document.createElement("textarea");l.name="title",l.rows=3;let c=document.createElement("div"),u=document.createElement("button");u.type="submit",u.innerHTML=this.formatter.options.image.altTitleModalOptions.icons.submitButton,c.appendChild(u),i.appendChild(n),i.appendChild(o),i.appendChild(a),i.appendChild(l),i.appendChild(c);let f=document.createElement("button");return f.id=`${t}-cancel`,f.type="button",f.innerHTML=this.formatter.options.image.altTitleModalOptions.icons.cancelButton,this.formatter.options.image.altTitleModalOptions.styles&&(Object.assign(e.style,this.formatter.options.image.altTitleModalOptions.styles.modalBackground),Object.assign(s.style,this.formatter.options.image.altTitleModalOptions.styles.modalContainer),Object.assign(n.style,this.formatter.options.image.altTitleModalOptions.styles.label),Object.assign(o.style,this.formatter.options.image.altTitleModalOptions.styles.textarea),Object.assign(a.style,this.formatter.options.image.altTitleModalOptions.styles.label),Object.assign(l.style,this.formatter.options.image.altTitleModalOptions.styles.textarea),Object.assign(u.style,this.formatter.options.image.altTitleModalOptions.styles.submitButton),Object.assign(f.style,this.formatter.options.image.altTitleModalOptions.styles.cancelButton)),s.appendChild(i),s.appendChild(f),e.appendChild(s),i.addEventListener("submit",h=>{h.preventDefault(),this.setAltTitle(),this.hideAltTitleModal()}),i.addEventListener("cancel",()=>{this.hideAltTitleModal()}),e.addEventListener("pointerdown",h=>{h.target===e&&this.hideAltTitleModal()}),f.addEventListener("click",()=>{this.hideAltTitleModal()}),{element:e,form:i,altInput:o,titleInput:l,cancelButton:f}}};var Cr=class r extends mt{options;modal;targetElement=null;imageDetails=null;constructor(t){super(t),this.options=this.formatter.options.image.compressorOptions,this.toolbarButtons=[new Tt("compress",this.onClickHandler,this.formatter.options.toolbar)],this.modal=this.createModal()}onCreate(){this.targetElement=this.formatter.currentSpec?.getTargetElement(),this.toolbarButtons[0].initialVisibility=r.isEligibleForCompression(this.targetElement)}onDestroy(){this.targetElement=null,this.hideModal()}onClickHandler=()=>{this.showModal()};showModal(){this.targetElement instanceof HTMLImageElement&&(this.imageDetails=this.getImageDetails(this.targetElement),this.imageDetails.canCompress?(this.modal.moreInfoButton.style.visibility="visible",this.modal.moreInfoText.style.display="none",document.body.append(this.modal.element)):this.displayFeedback(this.options.text.nothingToDo))}hideModal(){this.modal.element.remove()}static isEligibleForCompression(t){if(t instanceof HTMLImageElement&&t.src.startsWith("data:image/")){let e=t.src.substring(5,t.src.indexOf(";"));return e!=="svg+xml"&&e!=="gif"}return!1}parseDimensions(t){let e=t.getAttribute("width"),s=t.getAttribute("height"),i=null,n=null;if(e)if(e.toLowerCase().endsWith("px"))i=parseFloat(e);else if(e.endsWith("%"))i=this.options.maxWidth??null;else if(e.toLowerCase().endsWith("em")||e.toLowerCase().endsWith("rem"))i=parseFloat(e)*16;else if(!isNaN(parseFloat(e)))i=parseFloat(e);else return[null,null];if(s)if(!isNaN(parseFloat(s)))n=parseFloat(s);else if(s.toLowerCase().endsWith("px"))n=parseFloat(s);else if(s.toLowerCase().endsWith("em")||s.toLowerCase().endsWith("rem"))n=parseFloat(s)*16;else if(i&&t.naturalWidth>0&&t.naturalHeight>0)n=i/(t.naturalWidth/t.naturalHeight);else return[null,null];return[i,n]}getImageSize(t){let e=t.getAttribute("src");if(!e||!e.startsWith("data:image/"))return null;let s=e.split(",")[1];return s?Math.ceil(s.length*3/4):null}displayFeedback(t){this.formatter.sizeInfo.innerHTML=t,this.formatter.sizeInfo.style.transition="",this.formatter.sizeInfo.style.opacity="1",setTimeout(()=>{this.formatter.sizeInfo.style.transition="opacity 1s",this.formatter.sizeInfo.style.opacity="0"},2500)}getImageDetails(t){let[e,s]=this.parseDimensions(t);return!e&&(this.options.maxWidth??1/0)<t.naturalWidth&&(e=this.options.maxWidth,s=e/(t.naturalWidth/t.naturalHeight)),{naturalWidth:t.naturalWidth,naturalHeight:t.naturalHeight,targetWidth:e,targetHeight:s,size:this.getImageSize(t),canCompress:!!(e&&s&&e<t.naturalWidth&&r.isEligibleForCompression(t))}}compressImage=t=>{let e=!1;if(this.imageDetails&&this.imageDetails.canCompress){let s=new Image;s.src=t.src,s.onload=()=>{let i=document.createElement("canvas");i.width=this.imageDetails.targetWidth,i.height=this.imageDetails.targetHeight,i.getContext("2d").drawImage(s,0,0,i.width,i.height);let o=i.toDataURL("image/jpeg",this.options.jpegQuality),a=new TextEncoder().encode(t.src).length;new TextEncoder().encode(o).length<a&&(t.src=o);let c=`${Math.ceil((this.imageDetails.size-this.getImageSize(t))/1024)}kB`,u=`${this.options.text.reducedLabel}: ${c}<br>
                            ${this.imageDetails.naturalWidth} x ${this.imageDetails.naturalHeight}px \u2192 ${i.width} x ${Math.round(i.height)}px
                        `;return this.displayFeedback(u),!0},s.onerror=i=>(console.error("Image loading failed:",i),this.displayFeedback(`Image loading failed: ${i}`),!1)}else this.displayFeedback(this.options.text.nothingToDo);return!0};createModal(){let t=document.createElement("div");t.setAttribute("data-blot-formatter-compress-modal","");let e=document.createElement("div"),s=document.createElement("div"),i=document.createElement("div"),n=document.createElement("div"),o=document.createElement("button"),a=document.createElement("button"),l=document.createElement("button");return i.style.display="none",n.append(o,a,l),e.append(s,i,n),t.appendChild(e),s.innerHTML=this.options.text.prompt,i.innerHTML=this.options.text.moreInfo||"",this.options.styles&&(Object.assign(t.style,this.options.styles.modalBackground),Object.assign(e.style,this.options.styles.modalContainer),Object.assign(n.style,this.options.styles.buttonContainer),Object.assign(o.style,this.options.styles.buttons),this.options.text.moreInfo?Object.assign(a.style,this.options.styles.buttons):a.style.visibility="hidden",Object.assign(l.style,this.options.styles.buttons)),o.innerHTML=this.options.icons.cancel,a.innerHTML=this.options.icons.moreInfo,l.innerHTML=this.options.icons.continue,l.addEventListener("click",c=>{this.targetElement instanceof HTMLImageElement&&this.compressImage(this.targetElement),this.hideModal()}),a.addEventListener("click",c=>{i.innerHTML=this.options.text.moreInfo||"",i.style.display="block",a.style.visibility="hidden"}),o.addEventListener("click",()=>{this.hideModal()}),t.addEventListener("pointerdown",c=>{c.stopImmediatePropagation(),c.target===t&&this.hideModal()}),{element:t,moreInfoButton:a,moreInfoText:i}}};var Lr=class extends we{img;constructor(t){super(t),this.img=null}init(){this.formatter.quill.root.addEventListener("click",this.onClick)}getActions(){let t=super.getActions();return this.formatter.options.image.allowAltTitleEdit&&t.push(new Nr(this.formatter)),this.formatter.options.image.allowCompressor&&Cr.isEligibleForCompression(this.img)&&t.push(new Cr(this.formatter)),t}getTargetElement(){return this.img}onHide(){this.img=null}onClick=t=>{let e=t.target;e instanceof HTMLImageElement&&(t.stopImmediatePropagation(),t.preventDefault(),this.img=e,this.formatter.show(this))}};var o2="blot-formatter__proxy-image",Or=class extends we{selector;unclickable;proxyContainer;unclickableProxies;isUnclickable=!0;constructor(t){super(t),this.selector=t.options.video.selector,this.unclickable=null,this.proxyContainer=this.createProxyContainer(),this.unclickableProxies={}}init(){this.formatter.quill.on("text-change",this.onTextChange),this.formatter.quill.root.addEventListener("scroll",()=>{this.repositionProxyImages()}),this.observeEditorResize()}observeEditorResize(){let t=null;new ResizeObserver(s=>{for(let i of s)t&&clearTimeout(t),t=window.setTimeout(()=>{this.repositionProxyImages()},200)}).observe(this.formatter.quill.root)}passWheelEventThrough=t=>{this.formatter.passWheelEventThrough(t),this.repositionProxyImages()};getTargetElement(){return this.unclickable}getOverlayElement(){return this.unclickable}onTextChange=()=>{Object.entries(this.unclickableProxies).forEach(([t,{unclickable:e,proxyImage:s}])=>{try{this.formatter.quill.root.contains(e)||(s.remove(),delete this.unclickableProxies[t])}catch{}}),this.formatter.quill.root.querySelectorAll(`${this.selector}:not([data-blot-formatter-id])`).forEach(t=>{this.createUnclickableProxyImage(t)}),this.repositionProxyImages()};createUnclickableProxyImage(t){let e=Array.from(crypto.getRandomValues(new Uint8Array(5)),a=>String.fromCharCode(97+a%26)).join("");t.dataset.blotFormatterId=e;let s=document.createElement("canvas"),i=s.getContext("2d");i&&(i.globalAlpha=0,i.fillRect(0,0,1,1));let n=document.createElement("img");n.src=s.toDataURL("image/png"),n.classList.add(o2),n.dataset.blotFormatterId=e;let o={...this.formatter.options.video.proxyStyle,position:"absolute",margin:"0",userSelect:"none"};Object.assign(n.style,o),n.style.setProperty("-webkit-user-select","none"),n.style.setProperty("-moz-user-select","none"),n.style.setProperty("-ms-user-select","none"),this.proxyContainer.appendChild(n),n.addEventListener("click",this.onProxyImageClick),n.addEventListener("contextmenu",a=>{a.stopPropagation(),a.preventDefault()}),n.addEventListener("wheel",this.formatter.passWheelEventThrough),n.addEventListener("touchstart",this.formatter.onTouchScrollStart,{passive:!1}),n.addEventListener("touchmove",this.formatter.onTouchScrollMove,{passive:!1}),this.unclickableProxies[e]={unclickable:t,proxyImage:n}}repositionProxyImages(){if(Object.keys(this.unclickableProxies).length>0){let t=this.formatter.quill.container.getBoundingClientRect(),e=this.formatter.quill.container.scrollLeft,s=this.formatter.quill.container.scrollTop;Object.entries(this.unclickableProxies).forEach(([i,{unclickable:n,proxyImage:o}])=>{try{let a=n.getBoundingClientRect();Object.assign(o.style,{left:`${a.left-t.left-1+e}px`,top:`${a.top-t.top+s}px`,width:`${a.width}px`,height:`${a.height}px`})}catch(a){let l=`Error positioning proxy image with id ${i}: `;console.error(l,`${a instanceof Error?a.message:a}`)}})}}onProxyImageClick=t=>{let s=t.target.dataset.blotFormatterId;this.unclickable=this.unclickableProxies[`${s}`].unclickable,this.formatter.show(this)};createProxyContainer(){let t=document.createElement("div");return t.classList.add("proxy-container"),this.formatter.quill.container.appendChild(t),t}};var Ir=class extends Or{constructor(t){super(t)}};var a2={specs:[Lr,Ir],overlay:{className:"blot-formatter__overlay",style:{position:"absolute",boxSizing:"border-box",border:"1px dashed #444",backgroundColor:"rgba(255, 255, 255, 0.35)",maxWidth:"100%"},sizeInfoStyle:{position:"absolute",color:"rgba(255, 255, 255, 0.7)",backgroundColor:"rgba(0, 0, 0, 0.7)",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:"1em",textWrap:"nowrap",fontSize:"1rem",opacity:0,lineHeight:1.2}},align:{allowAligning:!0,alignments:["left","center","right"]},resize:{allowResizing:!0,allowResizeModeChange:!1,imageOversizeProtection:!1,handleClassName:"blot-formatter__resize-handle",handleStyle:{position:"absolute",height:"12px",width:"12px",backgroundColor:"white",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80"},useRelativeSize:!1,minimumWidthPx:25},delete:{allowKeyboardDelete:!0},toolbar:{icons:{left:`
        <svg viewbox="0 0 18 18">
          <line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"></line>
          <line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"></line>
          <line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"></line>
        </svg>
      `,center:`
        <svg viewbox="0 0 18 18">
          <line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"></line>
          <line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"></line>
          <line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"></line>
        </svg>
      `,right:`
        <svg viewbox="0 0 18 18">
          <line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"></line>
          <line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"></line>
          <line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"></line>
        </svg>
      `,attribute:`
        <svg viewBox="0 0 24 24" fill="none" class="ql-stroke">
          <path d="M10 19H12M12 19H14M12 19V5M12 5H6V6M12 5H18V6" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      `,resizeMode:`
        <svg viewBox="0 0 24 24" class="ql-stroke">
          <path
            d="m 7.7056591,11.853515 q -1.515179,0 -2.4160962,-0.993056 -0.9009172,-1.0032944 -0.9009172,-2.6720388 0,-1.8223098 0.9521057,-2.8665548 0.9521057,-1.0544826 2.5696616,-1.0544826 1.5663674,0 2.426334,0.9725811 0.870204,0.972581 0.870204,2.7334647 0,1.7608836 -0.972581,2.8256044 -0.9623435,1.054482 -2.5287109,1.054482 z M 7.8489868,5.3935293 q -0.9725811,0 -1.5356544,0.7268764 -0.5630732,0.7166387 -0.5630732,1.9758752 0,1.2387612 0.5528356,1.9349241 0.5528355,0.685926 1.5049412,0.685926 0.9623434,0 1.5049413,-0.716639 0.5425978,-0.7166384 0.5425978,-1.9861126 0,-1.2387612 -0.5425978,-1.9246868 Q 8.7806171,5.3935293 7.8489868,5.3935293 Z M 17.533847,4.4926121 8.1151669,19.275845 H 6.6511764 L 16.059619,4.4926121 Z M 16.448651,19.398697 q -1.515179,0 -2.416096,-1.003294 -0.900917,-1.003294 -0.900917,-2.661801 0,-1.82231 0.962343,-2.876793 0.962344,-1.06472 2.559424,-1.06472 1.55613,0 2.426334,0.982819 0.870204,0.982819 0.870204,2.75394 0,1.750646 -0.972581,2.815366 -0.962343,1.054483 -2.528711,1.054483 z m 0.143328,-6.449748 q -0.982819,0 -1.545892,0.716638 -0.552836,0.716639 -0.552836,1.986113 0,1.218286 0.552836,1.914449 0.552835,0.685926 1.504941,0.685926 0.962343,0 1.504941,-0.716639 0.542598,-0.726876 0.542598,-1.986113 0,-1.248998 -0.542598,-1.924686 -0.53236,-0.675688 -1.46399,-0.675688 z"
            style="fill:currentColor;stroke:currentColor;stroke-width:0.3"
          />
        </svg>
      `,compress:`
        <svg viewBox="0 0 28 28">
            <path d="m 19.250001,9.3125004 c 0.240623,0 0.437498,0.1968749 0.437498,0.4374991 V 18.49453 l -0.136717,-0.177734 -3.718751,-4.812498 c -0.123046,-0.161329 -0.317188,-0.254297 -0.51953,-0.254297 -0.202345,0 -0.39375,0.09297 -0.519532,0.254297 l -2.269532,2.936715 -0.833984,-1.167577 c -0.123047,-0.172265 -0.319922,-0.273437 -0.533204,-0.273437 -0.213281,0 -0.410156,0.101172 -0.533202,0.276172 l -2.1875003,3.0625 -0.1230462,0.169532 v -0.0082 -8.7500002 c 0,-0.2406242 0.1968749,-0.4374991 0.4374991,-0.4374991 z M 8.7499996,8 C 7.7847663,8 7,8.7847662 7,9.7499995 V 18.5 c 0,0.965233 0.7847663,1.75 1.7499996,1.75 H 19.250001 C 20.215235,20.25 21,19.465233 21,18.5 V 9.7499995 C 21,8.7847662 20.215235,8 19.250001,8 Z M 10.9375,13.250001 a 1.3125025,1.312501 0 1 0 0,-2.625002 1.3125025,1.312501 0 1 0 0,2.625002 z" />
            <path d="m 25.298508,20 h -3.58209 C 21.286567,20 21,20.286571 21,20.716427 v 3.582131 c 0,0.429856 0.286567,0.716426 0.716418,0.716426 v 0 c 0.429851,0 0.716418,-0.28657 0.716418,-0.716426 v -2.865705 h 2.865672 c 0.429851,0 0.716418,-0.28657 0.716418,-0.716426 C 26.014926,20.286571 25.728359,20 25.298508,20 Z" />
            <path d="M 6.298508,20 H 2.716418 C 2.2865673,20 2,20.286571 2,20.716427 c 0,0.429856 0.2865673,0.716426 0.716418,0.716426 H 5.58209 v 2.865705 c 0,0.429856 0.286567,0.716426 0.716418,0.716426 v 0 c 0.429851,0 0.716418,-0.28657 0.716418,-0.716426 V 20.716427 C 7.014926,20.286571 6.728359,20 6.298508,20 Z" />
            <path d="M 6.298507,3 C 5.868656,3 5.582089,3.28657 5.582089,3.716426 V 6.582131 H 2.716417 C 2.286567,6.582131 2,6.868702 2,7.298557 2,7.728413 2.286567,8.014984 2.716417,8.014984 h 3.58209 c 0.429845,0 0.716412,-0.286571 0.716412,-0.716427 V 3.716426 C 7.014919,3.28657 6.728352,3 6.298507,3 Z" />
            <path d="m 21.716418,8.014984 h 3.582089 c 0.429851,0 0.716418,-0.286571 0.716418,-0.716427 0,-0.429855 -0.286567,-0.716426 -0.716418,-0.716426 H 22.432836 V 3.716426 C 22.432836,3.28657 22.146269,3 21.716418,3 21.286567,3 21,3.28657 21,3.716426 v 3.582131 c 0,0.429856 0.286567,0.716427 0.716418,0.716427 z" />
        </svg>
      `},mainClassName:"blot-formatter__toolbar",mainStyle:{position:"absolute",display:"flex",top:"0",right:"0",left:"0",transform:"translateY(-50%)",justifyContent:"center",flexWrap:"wrap",color:"#333",zIndex:"1"},buttonClassName:"blot-formatter__toolbar-button",buttonStyle:{display:"inline-block",width:"27px",height:"26px",background:"white",border:"1px solid #999",cursor:"pointer",margin:"0 -1px 0 0"},svgStyle:{display:"inline-block",width:"100%",height:"100%",background:"white",verticalAlign:"top"}},image:{allowAltTitleEdit:!0,registerImageTitleBlot:!1,registerArrowRightFix:!0,altTitleModalOptions:{styles:{modalBackground:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},modalContainer:{backgroundColor:"#f2f2f2",padding:"5px 10px 10px 10px",borderRadius:"5px",position:"relative",width:"90%",maxWidth:"500px"},label:{display:"block",color:"black",margin:"10px 0 5px 0",fontSize:"0.9em"},textarea:{backgroundColor:"white",display:"block",resize:"none",width:"100%",padding:"5px"},submitButton:{display:"block",marginLeft:"auto",marginTop:"5px",cursor:"pointer",border:0,padding:0,width:"2.5rem",height:"2.5rem",fill:"green"},cancelButton:{display:"flex",width:"2rem",height:"2rem",position:"absolute",top:"-0.7rem",right:"-0.7rem",background:"white",border:"1px solid gray",borderRadius:"5px",cursor:"pointer",alignItems:"center",fill:"red"}},icons:{submitButton:`
        <svg viewBox="0 0 24 24">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C22 4.92893 22 7.28595 22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22ZM16.0303 8.96967C16.3232 9.26256 16.3232 9.73744 16.0303 10.0303L11.0303 15.0303C10.7374 15.3232 10.2626 15.3232 9.96967 15.0303L7.96967 13.0303C7.67678 12.7374 7.67678 12.2626 7.96967 11.9697C8.26256 11.6768 8.73744 11.6768 9.03033 11.9697L10.5 13.4393L14.9697 8.96967C15.2626 8.67678 15.7374 8.67678 16.0303 8.96967Z"></path>
        </svg>`,cancelButton:`
        <svg viewBox="0 0 384 512">   
            <path d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"/>
        </svg>`},labels:{alt:"Alt Text",title:"Image Title"}},allowCompressor:!1,compressorOptions:{jpegQuality:.8,styles:{modalBackground:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},modalContainer:{backgroundColor:"#000000c7",padding:"15px",borderRadius:"8px",position:"relative",maxWidth:"min(90%, 400px)",border:"3px solid black",color:"lightgray",textAlign:"justify",userSelect:"none"},buttonContainer:{gridTemplateColumns:"auto 1fr auto",display:"grid",gap:"1em",justifyItems:"center",borderTop:"1px solid lightgray",paddingTop:"12px"},buttons:{width:"2rem",height:"2rem",padding:0,backgroundColor:"transparent",border:0,cursor:"pointer"}},text:{prompt:"<h5>Compress image to its resized width?</h5>",moreInfo:`
              <p style="font-size: smaller; line-height: 1.2;">You can reduce the file size and save disk space by compressing pictures. The compression reduces both
              the file size and picture dimensions based on the width setting.</p>
              <p style="font-size: smaller;"><strong>NOTE:</strong> This process cannot be undone.</p>
          `,reducedLabel:"Reduced",nothingToDo:"Image already optimised."},icons:{cancel:`
              <svg viewBox="0 0 24 24" fill="#ea1414">
                  <path d="M 3.4285714,0 C 1.5375,0 0,1.5375 0,3.4285714 V 20.571429 C 0,22.4625 1.5375,24 3.4285714,24 H 20.571429 C 22.4625,24 24,22.4625 24,20.571429 V 3.4285714 C 24,1.5375 22.4625,0 20.571429,0 Z m 4.2321429,7.6607143 c 0.5035714,-0.5035714 1.3178571,-0.5035714 1.8160714,0 L 11.994643,10.178571 14.5125,7.6607143 c 0.503571,-0.5035714 1.317857,-0.5035714 1.816071,0 0.498215,0.5035714 0.503572,1.3178571 0,1.8160714 l -2.517857,2.5178573 2.517857,2.517857 c 0.503572,0.503571 0.503572,1.317857 0,1.816071 -0.503571,0.498215 -1.317857,0.503572 -1.816071,0 l -2.517857,-2.517857 -2.5178573,2.517857 c -0.5035714,0.503572 -1.3178571,0.503572 -1.8160714,0 C 7.1625,15.825 7.1571429,15.010714 7.6607143,14.5125 L 10.178571,11.994643 7.6607143,9.4767857 c -0.5035714,-0.5035714 -0.5035714,-1.3178571 0,-1.8160714 z" />
              </svg>`,moreInfo:`
              <svg viewBox="0 0 512 512" fill="royalblue">
                  <path d="M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm169.8-90.7c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z" />
              </svg>`,continue:`
              <svg viewBox="0 0 24 24" fill="green">
                  <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M 12,24 C 6.34314,24 3.514716,24 1.757364,22.2426 0,20.48532 0,17.6568 0,12 0,6.34314 0,3.514716 1.757364,1.757364 3.514716,0 6.34314,0 12,0 17.6568,0 20.48532,0 22.2426,1.757364 24,3.514716 24,6.34314 24,12 24,17.6568 24,20.48532 22.2426,22.2426 20.48532,24 17.6568,24 12,24 Z M 16.83636,8.363604 c 0.35148,0.351468 0.35148,0.921324 0,1.272756 l -6,6 c -0.35148,0.35148 -0.92124,0.35148 -1.272756,0 l -2.4,-2.4 c -0.351468,-0.35148 -0.351468,-0.92124 0,-1.27272 0.351468,-0.35148 0.921324,-0.35148 1.272792,0 L 10.2,13.72716 15.56364,8.363604 c 0.35148,-0.351468 0.92124,-0.351468 1.27272,0 z" />
              </svg>`}}},video:{selector:"iframe.ql-video",registerCustomVideoBlot:!1,registerBackspaceFix:!0,defaultAspectRatio:"16/9 auto",proxyStyle:{}}},qi=a2;var nh=rt(rh());var w2=B.import("formats/image"),sh=["alt","height","width","title"],Fo=class extends w2{static formats(t){return sh.reduce((e,s)=>(t.hasAttribute(s)&&(e[s]=t.getAttribute(s)),e),{})}format(t,e){sh.indexOf(t)>-1?e||t==="alt"?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}},ih=Fo;var E2=B.import("formats/video"),$o=class extends E2{static aspectRatio="16 / 9 auto";static create(t){let e=super.create(t);return e.setAttribute("width","100%"),e.style.aspectRatio=this.aspectRatio,e}html(){return this.domNode.outerHTML}},Wo=$o;var Pe=class{formatter;element;buttons={};constructor(t){this.formatter=t,this.element=document.createElement("div"),this.element.classList.add(this.formatter.options.toolbar.mainClassName),this.element.addEventListener("mousedown",e=>{e.stopPropagation()}),this.formatter.options.toolbar.mainStyle&&Object.assign(this.element.style,this.formatter.options.toolbar.mainStyle)}create(){let t=[];this.formatter.actions.forEach(e=>{e.toolbarButtons.forEach(s=>{this.buttons[s.action]=s,t.push(s.create())})}),this.element.append(...t),this.formatter.overlay.append(this.element)}destroy(){this.element&&this.formatter.overlay.removeChild(this.element);for(let t of Object.values(this.buttons))t.destroy();this.buttons={},this.element.innerHTML=""}};var A2=(r,t)=>t,qr=class{quill;options;currentSpec;specs;overlay;toolbar;sizeInfo;actions;startX=0;startY=0;constructor(t,e={}){if(this.quill=t,this.currentSpec=null,this.actions=[],t.options.readOnly){this.options=qi,this.toolbar=new Pe(this),this.specs=[],this.overlay=document.createElement("div"),this.sizeInfo=document.createElement("div");return}this.options=(0,nh.default)(qi,e,{arrayMerge:A2}),[this.overlay,this.sizeInfo]=this.createOverlay(),this.addEventListeners(),this.toolbar=new Pe(this),this.specs=this.options.specs.map(s=>new s(this)),this.specs.forEach(s=>s.init()),document.execCommand("enableObjectResizing",!1,"false"),this.quill.container.style.position=this.quill.container.style.position||"relative",this.registerCustomBlots(),this.keyboardBindings()}show(t){this.hide(),this.currentSpec=t,this.currentSpec.setSelection(),this.setUserSelect("none"),this.quill.container.appendChild(this.overlay),this.repositionOverlay(),this.createActions(t),this.toolbar.create(),document.addEventListener("pointerdown",this.onDocumentPointerDown)}hide(){this.currentSpec&&(this.currentSpec.onHide(),this.currentSpec=null,this.quill.container.removeChild(this.overlay),document.removeEventListener("pointerdown",this.onDocumentPointerDown),this.overlay.style.setProperty("display","none"),this.setUserSelect(""),this.destroyActions(),this.toolbar.destroy(),this.quill.emitter.emit(this.quill.constructor.events.TEXT_CHANGE,0,this.quill.getLength(),"api"))}update(){this.repositionOverlay(),this.actions.forEach(t=>t.onUpdate())}createActions(t){this.actions=t.getActions().map(e=>(e.onCreate(),e))}destroyActions(){this.actions.forEach(t=>t.onDestroy()),this.actions=[]}createOverlay(){let t=document.createElement("div");t.classList.add(this.options.overlay.className),this.options.overlay.style&&Object.assign(t.style,this.options.overlay.style),t.style.userSelect="none",t.style.setProperty("-webkit-user-select","none"),t.style.setProperty("-moz-user-select","none"),t.style.setProperty("-ms-user-select","none");let e=document.createElement("div");return this.options.overlay.sizeInfoStyle&&Object.assign(e.style,this.options.overlay.sizeInfoStyle),t.appendChild(e),[t,e]}addEventListeners(){this.overlay.addEventListener("wheel",this.passWheelEventThrough,{passive:!1}),this.overlay.addEventListener("touchstart",this.onTouchScrollStart,{passive:!1}),this.overlay.addEventListener("touchmove",this.onTouchScrollMove,{passive:!1}),this.overlay.addEventListener("contextmenu",t=>{t.stopPropagation(),t.preventDefault()}),this.repositionOverlay=this.repositionOverlay.bind(this),this.quill.root.addEventListener("scroll",this.repositionOverlay),new ResizeObserver(()=>{this.repositionOverlay()}).observe(this.quill.root),this.quill.root.addEventListener("click",this.onClick)}repositionOverlay(){if(this.currentSpec){let t=this.currentSpec.getOverlayElement();if(t){let e=this.quill.container.getBoundingClientRect(),s=t.getBoundingClientRect();Object.assign(this.overlay.style,{display:"block",left:`${s.left-e.left-1+this.quill.container.scrollLeft}px`,top:`${s.top-e.top+this.quill.container.scrollTop}px`,width:`${s.width}px`,height:`${s.height}px`})}}}setUserSelect(t){["userSelect","mozUserSelect","webkitUserSelect","msUserSelect"].forEach(s=>{this.quill.root.style.setProperty(s,t),document.documentElement&&document.documentElement.style.setProperty(s,t)})}onDocumentPointerDown=t=>{let e=t.target;this.quill.root.parentNode.contains(e)||e.closest("div[data-blot-formatter-modal]")||e.classList.contains("blot-formatter__proxy-image")||this.hide()};onClick=()=>{this.hide()};passWheelEventThrough=t=>{this.quill.root.scrollLeft+=t.deltaX,this.quill.root.scrollTop+=t.deltaY};onTouchScrollStart=t=>{if(t.touches.length===1){let e=t.touches[0];this.startX=e.clientX,this.startY=e.clientY}};onTouchScrollMove=t=>{if(t.touches.length===1){let e=t.touches[0],s=this.startX-e.clientX,i=this.startY-e.clientY,n=this.quill.root,o=n.scrollTop===0,a=n.scrollTop+n.clientHeight===n.scrollHeight,l=n.scrollLeft===0,c=n.scrollLeft+n.clientWidth===n.scrollWidth,u=Math.abs(i)>Math.abs(s),f=Math.abs(s)>Math.abs(i),h=!1;u&&!(o&&i<0)&&!(a&&i>0)&&(h=!0,n.scrollTop+=i),f&&!(l&&s<0)&&!(c&&s>0)&&(h=!0,n.scrollLeft+=s),h&&t.preventDefault(),this.startX=e.clientX,this.startY=e.clientY}};onOverlayTouchScrollMove=t=>{this.onTouchScrollMove(t),this.repositionOverlay()};registerCustomBlots(){this.options.image.registerImageTitleBlot&&B.register(ih,!0),this.options.video.registerCustomVideoBlot&&(Wo.aspectRatio=this.options.video.defaultAspectRatio,B.register(Wo,!0))}keyboardBindings(){this.options.video.registerBackspaceFix&&(this.quill.keyboard.bindings.Backspace||(this.quill.keyboard.bindings.Backspace=[]),this.quill.keyboard.bindings.Backspace.unshift({key:"Backspace",empty:!0,line:{domNode:{tagName:"IFRAME"}},handler:t=>{this.quill.deleteText(t.index-1,1,"user")}})),this.options.image.registerArrowRightFix&&(this.quill.keyboard.bindings.ArrowRight||(this.quill.keyboard.bindings.ArrowRight=[]),this.quill.keyboard.bindings.ArrowRight.unshift({key:"ArrowRight",collapsed:!0,empty:!1,suffix:/^$/,line:{domNode:{tagName:"P"}},handler:(t,e)=>{this.quill.setSelection(t.index+t.length+1,0,"user")}}))}useRelative(t){if(this.options.resize.allowResizeModeChange){let e=t.getAttribute("width");return e?e.endsWith("%"):this.options.resize.useRelativeSize}else return this.options.resize.useRelativeSize}};var ah=rt(ft(),1);var oh;(function(r){let t=[],e="__jsObjectId",s="__dotNetObject",i="__byte[]",n="__dotNetStream",o="__jsStreamReferenceLength",a,l;class c{constructor(g){this._jsObject=g,this._cachedFunctions=new Map}findFunction(g){let w=this._cachedFunctions.get(g);if(w)return w;let S=this._jsObject,k;if(g.split(".").forEach(tt=>{if(tt in S)k=S,S=S[tt];else throw new Error(`Could not find '${g}' ('${tt}' was undefined).`)}),S instanceof Function)return S=S.bind(k),this._cachedFunctions.set(g,S),S;throw new Error(`The value '${g}' is not a function.`)}getWrappedObject(){return this._jsObject}}let u=0,f={[u]:new c(window)};f[u]._cachedFunctions.set("import",E=>(typeof E=="string"&&E.startsWith("./")&&(E=new URL(E.substr(2),document.baseURI).toString()),import(E)));let h=1;function p(E){let g=new G(E);return a===void 0?a=g:a&&(a=null),g}r.attachDispatcher=p;function m(E){t.push(E)}r.attachReviver=m;function x(E,g,...w){return L().invokeDotNetStaticMethod(E,g,...w)}r.invokeMethod=x;function A(E,g,...w){return L().invokeDotNetStaticMethodAsync(E,g,...w)}r.invokeMethodAsync=A;function b(E){if(E&&typeof E=="object"){f[h]=new c(E);let g={[e]:h};return h++,g}throw new Error(`Cannot create a JSObjectReference from the value '${E}'.`)}r.createJSObjectReference=b;function T(E){let g=-1;if(E instanceof ArrayBuffer&&(E=new Uint8Array(E)),E instanceof Blob)g=E.size;else if(E.buffer instanceof ArrayBuffer){if(E.byteLength===void 0)throw new Error(`Cannot create a JSStreamReference from the value '${E}' as it doesn't have a byteLength.`);g=E.byteLength}else throw new Error("Supplied value is not a typed array or blob.");let w={[o]:g};try{let S=b(E);w[e]=S[e]}catch{throw new Error(`Cannot create a JSStreamReference from the value '${E}'.`)}return w}r.createJSStreamReference=T;function C(E){let g=E&&E[e];typeof g=="number"&&Jo(g)}r.disposeJSObjectReference=C;function N(E,g){l=E;let w=g?JSON.parse(g,(S,k)=>t.reduce((tt,Bt)=>Bt(S,tt),k)):null;return l=void 0,w}function L(){if(a===void 0)throw new Error("No call dispatcher has been set.");if(a===null)throw new Error("There are multiple .NET runtimes present, so a default dispatcher could not be resolved. Use DotNetObject to invoke .NET instance methods.");return a}let O;(function(E){E[E.Default=0]="Default",E[E.JSObjectReference=1]="JSObjectReference",E[E.JSStreamReference=2]="JSStreamReference",E[E.JSVoidResult=3]="JSVoidResult"})(O=r.JSCallResultType||(r.JSCallResultType={}));class G{constructor(g){this._dotNetCallDispatcher=g,this._byteArraysToBeRevived=new Map,this._pendingDotNetToJSStreams=new Map,this._pendingAsyncCalls={},this._nextAsyncCallId=1}getDotNetCallDispatcher(){return this._dotNetCallDispatcher}invokeJSFromDotNet(g,w,S,k){let tt=N(this,w),et=Mi(g,k)(...tt||[]),Ee=Xo(et,S);return Ee==null?null:ps(this,Ee)}beginInvokeJSFromDotNet(g,w,S,k,tt){let Bt=new Promise(et=>{let Ee=N(this,S),fh=Mi(w,tt)(...Ee||[]);et(fh)});g&&Bt.then(et=>ps(this,[g,!0,Xo(et,k)])).then(et=>this._dotNetCallDispatcher.endInvokeJSFromDotNet(g,!0,et),et=>this._dotNetCallDispatcher.endInvokeJSFromDotNet(g,!1,JSON.stringify([g,!1,gt(et)])))}endInvokeDotNetFromJS(g,w,S){let k=w?N(this,S):new Error(S);this.completePendingCall(parseInt(g,10),w,k)}invokeDotNetStaticMethod(g,w,...S){return this.invokeDotNetMethod(g,w,null,S)}invokeDotNetStaticMethodAsync(g,w,...S){return this.invokeDotNetMethodAsync(g,w,null,S)}invokeDotNetMethod(g,w,S,k){if(this._dotNetCallDispatcher.invokeDotNetFromJS){let tt=ps(this,k),Bt=this._dotNetCallDispatcher.invokeDotNetFromJS(g,w,S,tt);return Bt?N(this,Bt):null}throw new Error("The current dispatcher does not support synchronous calls from JS to .NET. Use invokeDotNetMethodAsync instead.")}invokeDotNetMethodAsync(g,w,S,k){if(g&&S)throw new Error(`For instance method calls, assemblyName should be null. Received '${g}'.`);let tt=this._nextAsyncCallId++,Bt=new Promise((et,Ee)=>{this._pendingAsyncCalls[tt]={resolve:et,reject:Ee}});try{let et=ps(this,k);this._dotNetCallDispatcher.beginInvokeDotNetFromJS(tt,g,w,S,et)}catch(et){this.completePendingCall(tt,!1,et)}return Bt}receiveByteArray(g,w){this._byteArraysToBeRevived.set(g,w)}processByteArray(g){let w=this._byteArraysToBeRevived.get(g);return w?(this._byteArraysToBeRevived.delete(g),w):null}supplyDotNetStream(g,w){if(this._pendingDotNetToJSStreams.has(g)){let S=this._pendingDotNetToJSStreams.get(g);this._pendingDotNetToJSStreams.delete(g),S.resolve(w)}else{let S=new Qo;S.resolve(w),this._pendingDotNetToJSStreams.set(g,S)}}getDotNetStreamPromise(g){let w;if(this._pendingDotNetToJSStreams.has(g))w=this._pendingDotNetToJSStreams.get(g).streamPromise,this._pendingDotNetToJSStreams.delete(g);else{let S=new Qo;this._pendingDotNetToJSStreams.set(g,S),w=S.streamPromise}return w}completePendingCall(g,w,S){if(!this._pendingAsyncCalls.hasOwnProperty(g))throw new Error(`There is no pending async call with ID ${g}.`);let k=this._pendingAsyncCalls[g];delete this._pendingAsyncCalls[g],w?k.resolve(S):k.reject(S)}}function gt(E){return E instanceof Error?`${E.message}
${E.stack}`:E?E.toString():"null"}function Mi(E,g){let w=f[g];if(w)return w.findFunction(E);throw new Error(`JS object instance with ID ${g} does not exist (has it been disposed?).`)}r.findJSFunction=Mi;function Jo(E){delete f[E]}r.disposeJSObjectReferenceById=Jo;class Bi{constructor(g,w){this._id=g,this._callDispatcher=w}invokeMethod(g,...w){return this._callDispatcher.invokeDotNetMethod(null,g,this._id,w)}invokeMethodAsync(g,...w){return this._callDispatcher.invokeDotNetMethodAsync(null,g,this._id,w)}dispose(){this._callDispatcher.invokeDotNetMethodAsync(null,"__Dispose",this._id,null).catch(w=>console.error(w))}serializeAsArg(){return{[s]:this._id}}}r.DotNetObject=Bi,m(function(g,w){if(w&&typeof w=="object"){if(w.hasOwnProperty(s))return new Bi(w[s],l);if(w.hasOwnProperty(e)){let S=w[e],k=f[S];if(k)return k.getWrappedObject();throw new Error(`JS object instance with Id '${S}' does not exist. It may have been disposed.`)}else if(w.hasOwnProperty(i)){let S=w[i],k=l.processByteArray(S);if(k===void 0)throw new Error(`Byte array index '${S}' does not exist.`);return k}else if(w.hasOwnProperty(n)){let S=w[n],k=l.getDotNetStreamPromise(S);return new ch(k)}}return w});class ch{constructor(g){this._streamPromise=g}stream(){return this._streamPromise}async arrayBuffer(){return new Response(await this.stream()).arrayBuffer()}}class Qo{constructor(){this.streamPromise=new Promise((g,w)=>{this.resolve=g,this.reject=w})}}function Xo(E,g){switch(g){case O.Default:return E;case O.JSObjectReference:return b(E);case O.JSStreamReference:return T(E);case O.JSVoidResult:return null;default:throw new Error(`Invalid JS call result type '${g}'.`)}}let ds=0;function ps(E,g){ds=0,l=E;let w=JSON.stringify(g,uh);return l=void 0,w}function uh(E,g){if(g instanceof Bi)return g.serializeAsArg();if(g instanceof Uint8Array){l.getDotNetCallDispatcher().sendByteArray(ds,g);let S={[i]:ds};return ds++,S}return g}})(oh||(oh={}));var ki=class{constructor(t){this.source=t}source},Ri=class{constructor(t,e,s){this.oldRange=t,this.newRange=e,this.source=s}oldRange;newRange;source};function Ko(r,t){let e;return function(...s){return new Promise((i,n)=>{let o=this,a=()=>{e=void 0;try{i(r.apply(o,s))}catch(l){n(l)}};clearTimeout(e),e=window.setTimeout(a,t)})}}function lh(){window.Spillgebees=window.Spillgebees||{},window.Spillgebees.fonts=window.Spillgebees.fonts||new Set,window.Spillgebees.editorFunctions=window.Spillgebees.editorFunctions||{createEditor:S2,setEditorEnabledState:_2,getContent:T2,setContent:N2,getSelection:C2,setSelection:L2,getText:O2,insertImage:I2,disposeEditor:q2,registerQuillEventCallback:Vo},window.Spillgebees.eventMap=window.Spillgebees.eventMap||new Map,window.Spillgebees.editors=window.Spillgebees.editors||new Map}var S2=async(r,t,e,s,i,n,o,a,l,c=new Array,u=500,f=!0)=>{if(B.register("modules/blotFormatter2",qr),c.length>0){window.Spillgebees.fonts=[...window.Spillgebees.fonts,...c];let x=B.import("formats/font");x.whitelist=window.Spillgebees.fonts,B.register(x,!0)}let h={};f&&(h={tab:null});let p={modules:{keyboard:{bindings:h},toolbar:s,blotFormatter2:{image:{allowAltTitleEdit:!1}}},placeholder:o,readOnly:!i,theme:a,debug:l},m=new B(e,p);window.Spillgebees.editors.set(e,m),window.Spillgebees.eventMap.set(e,new Map),n&&(await Vo(e,m,"OnContentChangedAsync","text-change",r,u),await Vo(e,m,"OnSelectionChangedAsync","selection-change",r,u)),await r.invokeMethodAsync(t)},T2=r=>window.Spillgebees.editors.get(r)?.root.innerHTML,N2=(r,t)=>{let e=window.Spillgebees.editors.get(r);if(e===void 0)return;let s=e.clipboard.convert({html:t});e.setContents(s,"api")},C2=r=>window.Spillgebees.editors.get(r)?.getSelection(),L2=(r,t)=>window.Spillgebees.editors.get(r)?.setSelection(t),O2=r=>window.Spillgebees.editors.get(r)?.getText(),I2=(r,t)=>{let e=window.Spillgebees.editors.get(r);if(e===void 0)return;let s=e.getSelection()?.index??0;return e.updateContents(new ah.default().retain(s).insert({image:t},{alt:t}))},_2=(r,t)=>window.Spillgebees.editors.get(r)?.enable(t),q2=r=>{if(!(window.Spillgebees.editors.get(r)===void 0||!window.Spillgebees.eventMap.has(r))){if(window.Spillgebees.eventMap.get(r)?.has("text-change")){let t=window.Spillgebees.eventMap.get(r).get("text-change");window.Spillgebees.editors.get(r).off("text-change",t)}if(window.Spillgebees.eventMap.get(r)?.has("selection-change")){let t=window.Spillgebees.eventMap.get(r).get("selection-change");window.Spillgebees.editors.get(r).off("selection-change",t)}window.Spillgebees.eventMap.delete(r),window.Spillgebees.editors.delete(r)}},Vo=async(r,t,e,s,i,n)=>{if(window.Spillgebees.eventMap.has(r)&&window.Spillgebees.eventMap.get(r)?.has(s))throw new Error(`Event already registered: ${s}`);if(s==="text-change"){let a=Ko(async(l,c,u)=>await i.invokeMethodAsync(e,new ki(u)),n);window.Spillgebees.eventMap.get(r)?.set(s,a),t.on("text-change",a)}else if(s==="selection-change"){let a=Ko(async(l,c,u)=>await i.invokeMethodAsync(e,new Ri(c,l,u)),n);window.Spillgebees.eventMap.get(r)?.set(s,a),t.on("selection-change",a)}else throw new Error(`Invalid eventName: ${s}`)};function PL(r){window.hasBeforeStartBeenCalled||Go(r)}function zL(r){window.hasAfterStartedBeenCalled||Zo(r)}function UL(r){window.hasBeforeStartBeenCalled||Go(r)}function HL(r){window.hasAfterStartedBeenCalled||Zo(r)}function FL(r){window.hasBeforeStartBeenCalled||Go(r)}function $L(r){window.hasAfterStartedBeenCalled||Zo(r)}function Go(r){window.hasBeforeStartBeenCalled=!0,lh()}function Zo(r){window.hasAfterStartedBeenCalled=!0}export{$L as afterServerStarted,Zo as afterStarted,HL as afterWebAssemblyStarted,zL as afterWebStarted,FL as beforeServerStart,Go as beforeStart,UL as beforeWebAssemblyStart,PL as beforeWebStart};
/*! Bundled license information:

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
